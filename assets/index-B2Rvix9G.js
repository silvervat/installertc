function wm(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zs(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var uh={exports:{}},xo={},ch={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fs=Symbol.for("react.element"),_m=Symbol.for("react.portal"),bm=Symbol.for("react.fragment"),xm=Symbol.for("react.strict_mode"),km=Symbol.for("react.profiler"),Sm=Symbol.for("react.provider"),Em=Symbol.for("react.context"),jm=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),Nm=Symbol.for("react.memo"),Om=Symbol.for("react.lazy"),pc=Symbol.iterator;function Cm(e){return e===null||typeof e!="object"?null:(e=pc&&e[pc]||e["@@iterator"],typeof e=="function"?e:null)}var dh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hh=Object.assign,fh={};function Fn(e,t,r){this.props=e,this.context=t,this.refs=fh,this.updater=r||dh}Fn.prototype.isReactComponent={};Fn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ph(){}ph.prototype=Fn.prototype;function Yl(e,t,r){this.props=e,this.context=t,this.refs=fh,this.updater=r||dh}var Xl=Yl.prototype=new ph;Xl.constructor=Yl;hh(Xl,Fn.prototype);Xl.isPureReactComponent=!0;var gc=Array.isArray,gh=Object.prototype.hasOwnProperty,Zl={current:null},mh={key:!0,ref:!0,__self:!0,__source:!0};function yh(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)gh.call(t,n)&&!mh.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Fs,type:e,key:i,ref:o,props:s,_owner:Zl.current}}function Pm(e,t){return{$$typeof:Fs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fs}function Am(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var mc=/\/+/g;function Go(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Am(""+e.key):t.toString(36)}function xi(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Fs:case _m:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Go(o,0):n,gc(s)?(r="",e!=null&&(r=e.replace(mc,"$&/")+"/"),xi(s,t,r,"",function(u){return u})):s!=null&&(eu(s)&&(s=Pm(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(mc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",gc(e))for(var a=0;a<e.length;a++){i=e[a];var l=n+Go(i,a);o+=xi(i,t,r,l,s)}else if(l=Cm(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=n+Go(i,a++),o+=xi(i,t,r,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Js(e,t,r){if(e==null)return e;var n=[],s=0;return xi(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Rm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var He={current:null},ki={transition:null},Im={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:ki,ReactCurrentOwner:Zl};function vh(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:Js,forEach:function(e,t,r){Js(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Js(e,function(){t++}),t},toArray:function(e){return Js(e,function(t){return t})||[]},only:function(e){if(!eu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=Fn;Y.Fragment=bm;Y.Profiler=km;Y.PureComponent=Yl;Y.StrictMode=xm;Y.Suspense=Tm;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Im;Y.act=vh;Y.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=hh({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Zl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)gh.call(t,l)&&!mh.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Fs,type:e.type,key:s,ref:i,props:n,_owner:o}};Y.createContext=function(e){return e={$$typeof:Em,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Sm,_context:e},e.Consumer=e};Y.createElement=yh;Y.createFactory=function(e){var t=yh.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:jm,render:e}};Y.isValidElement=eu;Y.lazy=function(e){return{$$typeof:Om,_payload:{_status:-1,_result:e},_init:Rm}};Y.memo=function(e,t){return{$$typeof:Nm,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=ki.transition;ki.transition={};try{e()}finally{ki.transition=t}};Y.unstable_act=vh;Y.useCallback=function(e,t){return He.current.useCallback(e,t)};Y.useContext=function(e){return He.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return He.current.useDeferredValue(e)};Y.useEffect=function(e,t){return He.current.useEffect(e,t)};Y.useId=function(){return He.current.useId()};Y.useImperativeHandle=function(e,t,r){return He.current.useImperativeHandle(e,t,r)};Y.useInsertionEffect=function(e,t){return He.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return He.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return He.current.useMemo(e,t)};Y.useReducer=function(e,t,r){return He.current.useReducer(e,t,r)};Y.useRef=function(e){return He.current.useRef(e)};Y.useState=function(e){return He.current.useState(e)};Y.useSyncExternalStore=function(e,t,r){return He.current.useSyncExternalStore(e,t,r)};Y.useTransition=function(){return He.current.useTransition()};Y.version="18.3.1";ch.exports=Y;var T=ch.exports;const $a=lh(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m=T,Dm=Symbol.for("react.element"),Mm=Symbol.for("react.fragment"),Um=Object.prototype.hasOwnProperty,Lm=$m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zm={key:!0,ref:!0,__self:!0,__source:!0};function wh(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Um.call(t,n)&&!zm.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Dm,type:e,key:i,ref:o,props:s,_owner:Lm.current}}xo.Fragment=Mm;xo.jsx=wh;xo.jsxs=wh;uh.exports=xo;var c=uh.exports,Da={},_h={exports:{}},ot={},bh={exports:{}},xh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,H){var q=R.length;R.push(H);e:for(;0<q;){var te=q-1>>>1,U=R[te];if(0<s(U,H))R[te]=H,R[q]=U,q=te;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var H=R[0],q=R.pop();if(q!==H){R[0]=q;e:for(var te=0,U=R.length,L=U>>>1;te<L;){var P=2*(te+1)-1,D=R[P],Z=P+1,Se=R[Z];if(0>s(D,q))Z<U&&0>s(Se,D)?(R[te]=Se,R[Z]=q,te=Z):(R[te]=D,R[P]=q,te=P);else if(Z<U&&0>s(Se,q))R[te]=Se,R[Z]=q,te=Z;else break e}}return H}function s(R,H){var q=R.sortIndex-H.sortIndex;return q!==0?q:R.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,m=!1,v=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=R)n(u),H.sortIndex=H.expirationTime,t(l,H);else break;H=r(u)}}function b(R){if(w=!1,y(R),!v)if(r(l)!==null)v=!0,ut(S);else{var H=r(u);H!==null&&Pt(b,H.startTime-R)}}function S(R,H){v=!1,w&&(w=!1,p(O),O=-1),m=!0;var q=f;try{for(y(H),h=r(l);h!==null&&(!(h.expirationTime>H)||R&&!se());){var te=h.callback;if(typeof te=="function"){h.callback=null,f=h.priorityLevel;var U=te(h.expirationTime<=H);H=e.unstable_now(),typeof U=="function"?h.callback=U:h===r(l)&&n(l),y(H)}else n(l);h=r(l)}if(h!==null)var L=!0;else{var P=r(u);P!==null&&Pt(b,P.startTime-H),L=!1}return L}finally{h=null,f=q,m=!1}}var E=!1,N=null,O=-1,J=5,B=-1;function se(){return!(e.unstable_now()-B<J)}function ne(){if(N!==null){var R=e.unstable_now();B=R;var H=!0;try{H=N(!0,R)}finally{H?vt():(E=!1,N=null)}}else E=!1}var vt;if(typeof g=="function")vt=function(){g(ne)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,jr=lt.port2;lt.port1.onmessage=ne,vt=function(){jr.postMessage(null)}}else vt=function(){_(ne,0)};function ut(R){N=R,E||(E=!0,vt())}function Pt(R,H){O=_(function(){R(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,ut(S))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var q=f;f=H;try{return R()}finally{f=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,H){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var q=f;f=R;try{return H()}finally{f=q}},e.unstable_scheduleCallback=function(R,H,q){var te=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?te+q:te):q=te,R){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=q+U,R={id:d++,callback:H,priorityLevel:R,startTime:q,expirationTime:U,sortIndex:-1},q>te?(R.sortIndex=q,t(u,R),r(l)===null&&R===r(u)&&(w?(p(O),O=-1):w=!0,Pt(b,q-te))):(R.sortIndex=U,t(l,R),v||m||(v=!0,ut(S))),R},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(R){var H=f;return function(){var q=f;f=H;try{return R.apply(this,arguments)}finally{f=q}}}})(xh);bh.exports=xh;var Fm=bh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm=T,it=Fm;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kh=new Set,bs={};function Xr(e,t){An(e,t),An(e+"Capture",t)}function An(e,t){for(bs[e]=t,e=0;e<t.length;e++)kh.add(t[e])}var Gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ma=Object.prototype.hasOwnProperty,Vm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yc={},vc={};function Hm(e){return Ma.call(vc,e)?!0:Ma.call(yc,e)?!1:Vm.test(e)?vc[e]=!0:(yc[e]=!0,!1)}function Wm(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qm(e,t,r,n){if(t===null||typeof t>"u"||Wm(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function We(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ie[e]=new We(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ie[t]=new We(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ie[e]=new We(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ie[e]=new We(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ie[e]=new We(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ie[e]=new We(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ie[e]=new We(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ie[e]=new We(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ie[e]=new We(e,5,!1,e.toLowerCase(),null,!1,!1)});var tu=/[\-:]([a-z])/g;function ru(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tu,ru);Ie[t]=new We(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tu,ru);Ie[t]=new We(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tu,ru);Ie[t]=new We(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ie[e]=new We(e,1,!1,e.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ie[e]=new We(e,1,!1,e.toLowerCase(),null,!0,!0)});function nu(e,t,r,n){var s=Ie.hasOwnProperty(t)?Ie[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qm(t,r,s,n)&&(r=null),n||s===null?Hm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Yt=Bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qs=Symbol.for("react.element"),cn=Symbol.for("react.portal"),dn=Symbol.for("react.fragment"),su=Symbol.for("react.strict_mode"),Ua=Symbol.for("react.profiler"),Sh=Symbol.for("react.provider"),Eh=Symbol.for("react.context"),iu=Symbol.for("react.forward_ref"),La=Symbol.for("react.suspense"),za=Symbol.for("react.suspense_list"),ou=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),jh=Symbol.for("react.offscreen"),wc=Symbol.iterator;function Qn(e){return e===null||typeof e!="object"?null:(e=wc&&e[wc]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Object.assign,Ko;function ss(e){if(Ko===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ko=t&&t[1]||""}return`
`+Ko+e}var Jo=!1;function Qo(e,t){if(!e||Jo)return"";Jo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ss(e):""}function Gm(e){switch(e.tag){case 5:return ss(e.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return e=Qo(e.type,!1),e;case 11:return e=Qo(e.type.render,!1),e;case 1:return e=Qo(e.type,!0),e;default:return""}}function Fa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dn:return"Fragment";case cn:return"Portal";case Ua:return"Profiler";case su:return"StrictMode";case La:return"Suspense";case za:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Eh:return(e.displayName||"Context")+".Consumer";case Sh:return(e._context.displayName||"Context")+".Provider";case iu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ou:return t=e.displayName||null,t!==null?t:Fa(e.type)||"Memo";case rr:t=e._payload,e=e._init;try{return Fa(e(t))}catch{}}return null}function Km(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fa(t);case 8:return t===su?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _r(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Th(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jm(e){var t=Th(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ys(e){e._valueTracker||(e._valueTracker=Jm(e))}function Nh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Th(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Li(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ba(e,t){var r=t.checked;return ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function _c(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=_r(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Oh(e,t){t=t.checked,t!=null&&nu(e,"checked",t,!1)}function Va(e,t){Oh(e,t);var r=_r(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ha(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ha(e,t.type,_r(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ha(e,t,r){(t!=="number"||Li(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var is=Array.isArray;function Sn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+_r(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Wa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(j(91));return ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(j(92));if(is(r)){if(1<r.length)throw Error(j(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:_r(r)}}function Ch(e,t){var r=_r(t.value),n=_r(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function kc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ph(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ph(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xs,Ah=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xs=Xs||document.createElement("div"),Xs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qm=["Webkit","ms","Moz","O"];Object.keys(ds).forEach(function(e){Qm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ds[t]=ds[e]})});function Rh(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ds.hasOwnProperty(e)&&ds[e]?(""+t).trim():t+"px"}function Ih(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Rh(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Ym=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ga(e,t){if(t){if(Ym[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(j(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(j(61))}if(t.style!=null&&typeof t.style!="object")throw Error(j(62))}}function Ka(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ja=null;function au(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qa=null,En=null,jn=null;function Sc(e){if(e=Hs(e)){if(typeof Qa!="function")throw Error(j(280));var t=e.stateNode;t&&(t=To(t),Qa(e.stateNode,e.type,t))}}function $h(e){En?jn?jn.push(e):jn=[e]:En=e}function Dh(){if(En){var e=En,t=jn;if(jn=En=null,Sc(e),t)for(e=0;e<t.length;e++)Sc(t[e])}}function Mh(e,t){return e(t)}function Uh(){}var Yo=!1;function Lh(e,t,r){if(Yo)return e(t,r);Yo=!0;try{return Mh(e,t,r)}finally{Yo=!1,(En!==null||jn!==null)&&(Uh(),Dh())}}function ks(e,t){var r=e.stateNode;if(r===null)return null;var n=To(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(j(231,t,typeof r));return r}var Ya=!1;if(Gt)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){Ya=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{Ya=!1}function Xm(e,t,r,n,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var hs=!1,zi=null,Fi=!1,Xa=null,Zm={onError:function(e){hs=!0,zi=e}};function ey(e,t,r,n,s,i,o,a,l){hs=!1,zi=null,Xm.apply(Zm,arguments)}function ty(e,t,r,n,s,i,o,a,l){if(ey.apply(this,arguments),hs){if(hs){var u=zi;hs=!1,zi=null}else throw Error(j(198));Fi||(Fi=!0,Xa=u)}}function Zr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function zh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ec(e){if(Zr(e)!==e)throw Error(j(188))}function ry(e){var t=e.alternate;if(!t){if(t=Zr(e),t===null)throw Error(j(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ec(s),e;if(i===n)return Ec(s),t;i=i.sibling}throw Error(j(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(j(189))}}if(r.alternate!==n)throw Error(j(190))}if(r.tag!==3)throw Error(j(188));return r.stateNode.current===r?e:t}function Fh(e){return e=ry(e),e!==null?Bh(e):null}function Bh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bh(e);if(t!==null)return t;e=e.sibling}return null}var Vh=it.unstable_scheduleCallback,jc=it.unstable_cancelCallback,ny=it.unstable_shouldYield,sy=it.unstable_requestPaint,ye=it.unstable_now,iy=it.unstable_getCurrentPriorityLevel,lu=it.unstable_ImmediatePriority,Hh=it.unstable_UserBlockingPriority,Bi=it.unstable_NormalPriority,oy=it.unstable_LowPriority,Wh=it.unstable_IdlePriority,ko=null,Ut=null;function ay(e){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(ko,e,void 0,(e.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:cy,ly=Math.log,uy=Math.LN2;function cy(e){return e>>>=0,e===0?32:31-(ly(e)/uy|0)|0}var Zs=64,ei=4194304;function os(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=os(a):(i&=o,i!==0&&(n=os(i)))}else o=r&~s,o!==0?n=os(o):i!==0&&(n=os(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Nt(t),s=1<<r,n|=e[r],t&=~s;return n}function dy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hy(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Nt(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=dy(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function Za(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qh(){var e=Zs;return Zs<<=1,!(Zs&4194240)&&(Zs=64),e}function Xo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Bs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nt(t),e[t]=r}function fy(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Nt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function uu(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Nt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var re=0;function Gh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Kh,cu,Jh,Qh,Yh,el=!1,ti=[],dr=null,hr=null,fr=null,Ss=new Map,Es=new Map,ir=[],py="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tc(e,t){switch(e){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Ss.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Es.delete(t.pointerId)}}function Xn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Hs(t),t!==null&&cu(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function gy(e,t,r,n,s){switch(t){case"focusin":return dr=Xn(dr,e,t,r,n,s),!0;case"dragenter":return hr=Xn(hr,e,t,r,n,s),!0;case"mouseover":return fr=Xn(fr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Ss.set(i,Xn(Ss.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Es.set(i,Xn(Es.get(i)||null,e,t,r,n,s)),!0}return!1}function Xh(e){var t=Fr(e.target);if(t!==null){var r=Zr(t);if(r!==null){if(t=r.tag,t===13){if(t=zh(r),t!==null){e.blockedOn=t,Yh(e.priority,function(){Jh(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Si(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=tl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ja=n,r.target.dispatchEvent(n),Ja=null}else return t=Hs(r),t!==null&&cu(t),e.blockedOn=r,!1;t.shift()}return!0}function Nc(e,t,r){Si(e)&&r.delete(t)}function my(){el=!1,dr!==null&&Si(dr)&&(dr=null),hr!==null&&Si(hr)&&(hr=null),fr!==null&&Si(fr)&&(fr=null),Ss.forEach(Nc),Es.forEach(Nc)}function Zn(e,t){e.blockedOn===t&&(e.blockedOn=null,el||(el=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,my)))}function js(e){function t(s){return Zn(s,e)}if(0<ti.length){Zn(ti[0],e);for(var r=1;r<ti.length;r++){var n=ti[r];n.blockedOn===e&&(n.blockedOn=null)}}for(dr!==null&&Zn(dr,e),hr!==null&&Zn(hr,e),fr!==null&&Zn(fr,e),Ss.forEach(t),Es.forEach(t),r=0;r<ir.length;r++)n=ir[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ir.length&&(r=ir[0],r.blockedOn===null);)Xh(r),r.blockedOn===null&&ir.shift()}var Tn=Yt.ReactCurrentBatchConfig,Hi=!0;function yy(e,t,r,n){var s=re,i=Tn.transition;Tn.transition=null;try{re=1,du(e,t,r,n)}finally{re=s,Tn.transition=i}}function vy(e,t,r,n){var s=re,i=Tn.transition;Tn.transition=null;try{re=4,du(e,t,r,n)}finally{re=s,Tn.transition=i}}function du(e,t,r,n){if(Hi){var s=tl(e,t,r,n);if(s===null)la(e,t,n,Wi,r),Tc(e,n);else if(gy(s,e,t,r,n))n.stopPropagation();else if(Tc(e,n),t&4&&-1<py.indexOf(e)){for(;s!==null;){var i=Hs(s);if(i!==null&&Kh(i),i=tl(e,t,r,n),i===null&&la(e,t,n,Wi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else la(e,t,n,null,r)}}var Wi=null;function tl(e,t,r,n){if(Wi=null,e=au(n),e=Fr(e),e!==null)if(t=Zr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=zh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wi=e,null}function Zh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iy()){case lu:return 1;case Hh:return 4;case Bi:case oy:return 16;case Wh:return 536870912;default:return 16}default:return 16}}var ur=null,hu=null,Ei=null;function ef(){if(Ei)return Ei;var e,t=hu,r=t.length,n,s="value"in ur?ur.value:ur.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Ei=s.slice(e,1<n?1-n:void 0)}function ji(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ri(){return!0}function Oc(){return!1}function at(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ri:Oc,this.isPropagationStopped=Oc,this}return ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),t}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fu=at(Bn),Vs=ge({},Bn,{view:0,detail:0}),wy=at(Vs),Zo,ea,es,So=ge({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==es&&(es&&e.type==="mousemove"?(Zo=e.screenX-es.screenX,ea=e.screenY-es.screenY):ea=Zo=0,es=e),Zo)},movementY:function(e){return"movementY"in e?e.movementY:ea}}),Cc=at(So),_y=ge({},So,{dataTransfer:0}),by=at(_y),xy=ge({},Vs,{relatedTarget:0}),ta=at(xy),ky=ge({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sy=at(ky),Ey=ge({},Bn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jy=at(Ey),Ty=ge({},Bn,{data:0}),Pc=at(Ty),Ny={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Py(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cy[e])?!!t[e]:!1}function pu(){return Py}var Ay=ge({},Vs,{key:function(e){if(e.key){var t=Ny[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Oy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pu,charCode:function(e){return e.type==="keypress"?ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ry=at(Ay),Iy=ge({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ac=at(Iy),$y=ge({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pu}),Dy=at($y),My=ge({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uy=at(My),Ly=ge({},So,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zy=at(Ly),Fy=[9,13,27,32],gu=Gt&&"CompositionEvent"in window,fs=null;Gt&&"documentMode"in document&&(fs=document.documentMode);var By=Gt&&"TextEvent"in window&&!fs,tf=Gt&&(!gu||fs&&8<fs&&11>=fs),Rc=" ",Ic=!1;function rf(e,t){switch(e){case"keyup":return Fy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hn=!1;function Vy(e,t){switch(e){case"compositionend":return nf(t);case"keypress":return t.which!==32?null:(Ic=!0,Rc);case"textInput":return e=t.data,e===Rc&&Ic?null:e;default:return null}}function Hy(e,t){if(hn)return e==="compositionend"||!gu&&rf(e,t)?(e=ef(),Ei=hu=ur=null,hn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tf&&t.locale!=="ko"?null:t.data;default:return null}}var Wy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $c(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wy[e.type]:t==="textarea"}function sf(e,t,r,n){$h(n),t=qi(t,"onChange"),0<t.length&&(r=new fu("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ps=null,Ts=null;function qy(e){mf(e,0)}function Eo(e){var t=gn(e);if(Nh(t))return e}function Gy(e,t){if(e==="change")return t}var of=!1;if(Gt){var ra;if(Gt){var na="oninput"in document;if(!na){var Dc=document.createElement("div");Dc.setAttribute("oninput","return;"),na=typeof Dc.oninput=="function"}ra=na}else ra=!1;of=ra&&(!document.documentMode||9<document.documentMode)}function Mc(){ps&&(ps.detachEvent("onpropertychange",af),Ts=ps=null)}function af(e){if(e.propertyName==="value"&&Eo(Ts)){var t=[];sf(t,Ts,e,au(e)),Lh(qy,t)}}function Ky(e,t,r){e==="focusin"?(Mc(),ps=t,Ts=r,ps.attachEvent("onpropertychange",af)):e==="focusout"&&Mc()}function Jy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Eo(Ts)}function Qy(e,t){if(e==="click")return Eo(t)}function Yy(e,t){if(e==="input"||e==="change")return Eo(t)}function Xy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:Xy;function Ns(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ma.call(t,s)||!Ct(e[s],t[s]))return!1}return!0}function Uc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lc(e,t){var r=Uc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Uc(r)}}function lf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uf(){for(var e=window,t=Li();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Li(e.document)}return t}function mu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zy(e){var t=uf(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&lf(r.ownerDocument.documentElement,r)){if(n!==null&&mu(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Lc(r,i);var o=Lc(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ev=Gt&&"documentMode"in document&&11>=document.documentMode,fn=null,rl=null,gs=null,nl=!1;function zc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nl||fn==null||fn!==Li(n)||(n=fn,"selectionStart"in n&&mu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),gs&&Ns(gs,n)||(gs=n,n=qi(rl,"onSelect"),0<n.length&&(t=new fu("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=fn)))}function ni(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var pn={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionend:ni("Transition","TransitionEnd")},sa={},cf={};Gt&&(cf=document.createElement("div").style,"AnimationEvent"in window||(delete pn.animationend.animation,delete pn.animationiteration.animation,delete pn.animationstart.animation),"TransitionEvent"in window||delete pn.transitionend.transition);function jo(e){if(sa[e])return sa[e];if(!pn[e])return e;var t=pn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in cf)return sa[e]=t[r];return e}var df=jo("animationend"),hf=jo("animationiteration"),ff=jo("animationstart"),pf=jo("transitionend"),gf=new Map,Fc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){gf.set(e,t),Xr(t,[e])}for(var ia=0;ia<Fc.length;ia++){var oa=Fc[ia],tv=oa.toLowerCase(),rv=oa[0].toUpperCase()+oa.slice(1);xr(tv,"on"+rv)}xr(df,"onAnimationEnd");xr(hf,"onAnimationIteration");xr(ff,"onAnimationStart");xr("dblclick","onDoubleClick");xr("focusin","onFocus");xr("focusout","onBlur");xr(pf,"onTransitionEnd");An("onMouseEnter",["mouseout","mouseover"]);An("onMouseLeave",["mouseout","mouseover"]);An("onPointerEnter",["pointerout","pointerover"]);An("onPointerLeave",["pointerout","pointerover"]);Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nv=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function Bc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ty(n,t,void 0,e),e.currentTarget=null}function mf(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Bc(s,a,u),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Bc(s,a,u),i=l}}}if(Fi)throw e=Xa,Fi=!1,Xa=null,e}function le(e,t){var r=t[ll];r===void 0&&(r=t[ll]=new Set);var n=e+"__bubble";r.has(n)||(yf(t,e,2,!1),r.add(n))}function aa(e,t,r){var n=0;t&&(n|=4),yf(r,e,n,t)}var si="_reactListening"+Math.random().toString(36).slice(2);function Os(e){if(!e[si]){e[si]=!0,kh.forEach(function(r){r!=="selectionchange"&&(nv.has(r)||aa(r,!1,e),aa(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[si]||(t[si]=!0,aa("selectionchange",!1,t))}}function yf(e,t,r,n){switch(Zh(t)){case 1:var s=yy;break;case 4:s=vy;break;default:s=du}r=s.bind(null,t,r,e),s=void 0,!Ya||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function la(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Fr(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}Lh(function(){var u=i,d=au(r),h=[];e:{var f=gf.get(e);if(f!==void 0){var m=fu,v=e;switch(e){case"keypress":if(ji(r)===0)break e;case"keydown":case"keyup":m=Ry;break;case"focusin":v="focus",m=ta;break;case"focusout":v="blur",m=ta;break;case"beforeblur":case"afterblur":m=ta;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=by;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Dy;break;case df:case hf:case ff:m=Sy;break;case pf:m=Uy;break;case"scroll":m=wy;break;case"wheel":m=zy;break;case"copy":case"cut":case"paste":m=jy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ac}var w=(t&4)!==0,_=!w&&e==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var g=u,y;g!==null;){y=g;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,p!==null&&(b=ks(g,p),b!=null&&w.push(Cs(g,b,y)))),_)break;g=g.return}0<w.length&&(f=new m(f,v,null,r,d),h.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==Ja&&(v=r.relatedTarget||r.fromElement)&&(Fr(v)||v[Kt]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=u,v=v?Fr(v):null,v!==null&&(_=Zr(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(w=Cc,b="onMouseLeave",p="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(w=Ac,b="onPointerLeave",p="onPointerEnter",g="pointer"),_=m==null?f:gn(m),y=v==null?f:gn(v),f=new w(b,g+"leave",m,r,d),f.target=_,f.relatedTarget=y,b=null,Fr(d)===u&&(w=new w(p,g+"enter",v,r,d),w.target=y,w.relatedTarget=_,b=w),_=b,m&&v)t:{for(w=m,p=v,g=0,y=w;y;y=rn(y))g++;for(y=0,b=p;b;b=rn(b))y++;for(;0<g-y;)w=rn(w),g--;for(;0<y-g;)p=rn(p),y--;for(;g--;){if(w===p||p!==null&&w===p.alternate)break t;w=rn(w),p=rn(p)}w=null}else w=null;m!==null&&Vc(h,f,m,w,!1),v!==null&&_!==null&&Vc(h,_,v,w,!0)}}e:{if(f=u?gn(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=Gy;else if($c(f))if(of)S=Yy;else{S=Jy;var E=Ky}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Qy);if(S&&(S=S(e,u))){sf(h,S,r,d);break e}E&&E(e,f,u),e==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Ha(f,"number",f.value)}switch(E=u?gn(u):window,e){case"focusin":($c(E)||E.contentEditable==="true")&&(fn=E,rl=u,gs=null);break;case"focusout":gs=rl=fn=null;break;case"mousedown":nl=!0;break;case"contextmenu":case"mouseup":case"dragend":nl=!1,zc(h,r,d);break;case"selectionchange":if(ev)break;case"keydown":case"keyup":zc(h,r,d)}var N;if(gu)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else hn?rf(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(tf&&r.locale!=="ko"&&(hn||O!=="onCompositionStart"?O==="onCompositionEnd"&&hn&&(N=ef()):(ur=d,hu="value"in ur?ur.value:ur.textContent,hn=!0)),E=qi(u,O),0<E.length&&(O=new Pc(O,e,null,r,d),h.push({event:O,listeners:E}),N?O.data=N:(N=nf(r),N!==null&&(O.data=N)))),(N=By?Vy(e,r):Hy(e,r))&&(u=qi(u,"onBeforeInput"),0<u.length&&(d=new Pc("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=N))}mf(h,t)})}function Cs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ks(e,r),i!=null&&n.unshift(Cs(e,i,s)),i=ks(e,t),i!=null&&n.push(Cs(e,i,s))),e=e.return}return n}function rn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vc(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,s?(l=ks(r,i),l!=null&&o.unshift(Cs(r,l,a))):s||(l=ks(r,i),l!=null&&o.push(Cs(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var sv=/\r\n?/g,iv=/\u0000|\uFFFD/g;function Hc(e){return(typeof e=="string"?e:""+e).replace(sv,`
`).replace(iv,"")}function ii(e,t,r){if(t=Hc(t),Hc(e)!==t&&r)throw Error(j(425))}function Gi(){}var sl=null,il=null;function ol(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var al=typeof setTimeout=="function"?setTimeout:void 0,ov=typeof clearTimeout=="function"?clearTimeout:void 0,Wc=typeof Promise=="function"?Promise:void 0,av=typeof queueMicrotask=="function"?queueMicrotask:typeof Wc<"u"?function(e){return Wc.resolve(null).then(e).catch(lv)}:al;function lv(e){setTimeout(function(){throw e})}function ua(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),js(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);js(t)}function pr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vn=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Vn,Ps="__reactProps$"+Vn,Kt="__reactContainer$"+Vn,ll="__reactEvents$"+Vn,uv="__reactListeners$"+Vn,cv="__reactHandles$"+Vn;function Fr(e){var t=e[Mt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Kt]||r[Mt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=qc(e);e!==null;){if(r=e[Mt])return r;e=qc(e)}return t}e=r,r=e.parentNode}return null}function Hs(e){return e=e[Mt]||e[Kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function To(e){return e[Ps]||null}var ul=[],mn=-1;function kr(e){return{current:e}}function ue(e){0>mn||(e.current=ul[mn],ul[mn]=null,mn--)}function ae(e,t){mn++,ul[mn]=e.current,e.current=t}var br={},ze=kr(br),Ye=kr(!1),Gr=br;function Rn(e,t){var r=e.type.contextTypes;if(!r)return br;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Xe(e){return e=e.childContextTypes,e!=null}function Ki(){ue(Ye),ue(ze)}function Gc(e,t,r){if(ze.current!==br)throw Error(j(168));ae(ze,t),ae(Ye,r)}function vf(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(j(108,Km(e)||"Unknown",s));return ge({},r,n)}function Ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||br,Gr=ze.current,ae(ze,e),ae(Ye,Ye.current),!0}function Kc(e,t,r){var n=e.stateNode;if(!n)throw Error(j(169));r?(e=vf(e,t,Gr),n.__reactInternalMemoizedMergedChildContext=e,ue(Ye),ue(ze),ae(ze,e)):ue(Ye),ae(Ye,r)}var Bt=null,No=!1,ca=!1;function wf(e){Bt===null?Bt=[e]:Bt.push(e)}function dv(e){No=!0,wf(e)}function Sr(){if(!ca&&Bt!==null){ca=!0;var e=0,t=re;try{var r=Bt;for(re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Bt=null,No=!1}catch(s){throw Bt!==null&&(Bt=Bt.slice(e+1)),Vh(lu,Sr),s}finally{re=t,ca=!1}}return null}var yn=[],vn=0,Qi=null,Yi=0,ht=[],ft=0,Kr=null,Ht=1,Wt="";function Rr(e,t){yn[vn++]=Yi,yn[vn++]=Qi,Qi=e,Yi=t}function _f(e,t,r){ht[ft++]=Ht,ht[ft++]=Wt,ht[ft++]=Kr,Kr=e;var n=Ht;e=Wt;var s=32-Nt(n)-1;n&=~(1<<s),r+=1;var i=32-Nt(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ht=1<<32-Nt(t)+s|r<<s|n,Wt=i+e}else Ht=1<<i|r<<s|n,Wt=e}function yu(e){e.return!==null&&(Rr(e,1),_f(e,1,0))}function vu(e){for(;e===Qi;)Qi=yn[--vn],yn[vn]=null,Yi=yn[--vn],yn[vn]=null;for(;e===Kr;)Kr=ht[--ft],ht[ft]=null,Wt=ht[--ft],ht[ft]=null,Ht=ht[--ft],ht[ft]=null}var st=null,nt=null,de=!1,Tt=null;function bf(e,t){var r=pt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Jc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,st=e,nt=pr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,st=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Kr!==null?{id:Ht,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=pt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,st=e,nt=null,!0):!1;default:return!1}}function cl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dl(e){if(de){var t=nt;if(t){var r=t;if(!Jc(e,t)){if(cl(e))throw Error(j(418));t=pr(r.nextSibling);var n=st;t&&Jc(e,t)?bf(n,r):(e.flags=e.flags&-4097|2,de=!1,st=e)}}else{if(cl(e))throw Error(j(418));e.flags=e.flags&-4097|2,de=!1,st=e}}}function Qc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;st=e}function oi(e){if(e!==st)return!1;if(!de)return Qc(e),de=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ol(e.type,e.memoizedProps)),t&&(t=nt)){if(cl(e))throw xf(),Error(j(418));for(;t;)bf(e,t),t=pr(t.nextSibling)}if(Qc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){nt=pr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=st?pr(e.stateNode.nextSibling):null;return!0}function xf(){for(var e=nt;e;)e=pr(e.nextSibling)}function In(){nt=st=null,de=!1}function wu(e){Tt===null?Tt=[e]:Tt.push(e)}var hv=Yt.ReactCurrentBatchConfig;function ts(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(j(309));var n=r.stateNode}if(!n)throw Error(j(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(j(284));if(!r._owner)throw Error(j(290,e))}return e}function ai(e,t){throw e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yc(e){var t=e._init;return t(e._payload)}function kf(e){function t(p,g){if(e){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function r(p,g){if(!e)return null;for(;g!==null;)t(p,g),g=g.sibling;return null}function n(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function s(p,g){return p=vr(p,g),p.index=0,p.sibling=null,p}function i(p,g,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=2,g):y):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,g,y,b){return g===null||g.tag!==6?(g=ya(y,p.mode,b),g.return=p,g):(g=s(g,y),g.return=p,g)}function l(p,g,y,b){var S=y.type;return S===dn?d(p,g,y.props.children,b,y.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===rr&&Yc(S)===g.type)?(b=s(g,y.props),b.ref=ts(p,g,y),b.return=p,b):(b=Ri(y.type,y.key,y.props,null,p.mode,b),b.ref=ts(p,g,y),b.return=p,b)}function u(p,g,y,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=va(y,p.mode,b),g.return=p,g):(g=s(g,y.children||[]),g.return=p,g)}function d(p,g,y,b,S){return g===null||g.tag!==7?(g=qr(y,p.mode,b,S),g.return=p,g):(g=s(g,y),g.return=p,g)}function h(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=ya(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Qs:return y=Ri(g.type,g.key,g.props,null,p.mode,y),y.ref=ts(p,null,g),y.return=p,y;case cn:return g=va(g,p.mode,y),g.return=p,g;case rr:var b=g._init;return h(p,b(g._payload),y)}if(is(g)||Qn(g))return g=qr(g,p.mode,y,null),g.return=p,g;ai(p,g)}return null}function f(p,g,y,b){var S=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(p,g,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qs:return y.key===S?l(p,g,y,b):null;case cn:return y.key===S?u(p,g,y,b):null;case rr:return S=y._init,f(p,g,S(y._payload),b)}if(is(y)||Qn(y))return S!==null?null:d(p,g,y,b,null);ai(p,y)}return null}function m(p,g,y,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(y)||null,a(g,p,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qs:return p=p.get(b.key===null?y:b.key)||null,l(g,p,b,S);case cn:return p=p.get(b.key===null?y:b.key)||null,u(g,p,b,S);case rr:var E=b._init;return m(p,g,y,E(b._payload),S)}if(is(b)||Qn(b))return p=p.get(y)||null,d(g,p,b,S,null);ai(g,b)}return null}function v(p,g,y,b){for(var S=null,E=null,N=g,O=g=0,J=null;N!==null&&O<y.length;O++){N.index>O?(J=N,N=null):J=N.sibling;var B=f(p,N,y[O],b);if(B===null){N===null&&(N=J);break}e&&N&&B.alternate===null&&t(p,N),g=i(B,g,O),E===null?S=B:E.sibling=B,E=B,N=J}if(O===y.length)return r(p,N),de&&Rr(p,O),S;if(N===null){for(;O<y.length;O++)N=h(p,y[O],b),N!==null&&(g=i(N,g,O),E===null?S=N:E.sibling=N,E=N);return de&&Rr(p,O),S}for(N=n(p,N);O<y.length;O++)J=m(N,p,O,y[O],b),J!==null&&(e&&J.alternate!==null&&N.delete(J.key===null?O:J.key),g=i(J,g,O),E===null?S=J:E.sibling=J,E=J);return e&&N.forEach(function(se){return t(p,se)}),de&&Rr(p,O),S}function w(p,g,y,b){var S=Qn(y);if(typeof S!="function")throw Error(j(150));if(y=S.call(y),y==null)throw Error(j(151));for(var E=S=null,N=g,O=g=0,J=null,B=y.next();N!==null&&!B.done;O++,B=y.next()){N.index>O?(J=N,N=null):J=N.sibling;var se=f(p,N,B.value,b);if(se===null){N===null&&(N=J);break}e&&N&&se.alternate===null&&t(p,N),g=i(se,g,O),E===null?S=se:E.sibling=se,E=se,N=J}if(B.done)return r(p,N),de&&Rr(p,O),S;if(N===null){for(;!B.done;O++,B=y.next())B=h(p,B.value,b),B!==null&&(g=i(B,g,O),E===null?S=B:E.sibling=B,E=B);return de&&Rr(p,O),S}for(N=n(p,N);!B.done;O++,B=y.next())B=m(N,p,O,B.value,b),B!==null&&(e&&B.alternate!==null&&N.delete(B.key===null?O:B.key),g=i(B,g,O),E===null?S=B:E.sibling=B,E=B);return e&&N.forEach(function(ne){return t(p,ne)}),de&&Rr(p,O),S}function _(p,g,y,b){if(typeof y=="object"&&y!==null&&y.type===dn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Qs:e:{for(var S=y.key,E=g;E!==null;){if(E.key===S){if(S=y.type,S===dn){if(E.tag===7){r(p,E.sibling),g=s(E,y.props.children),g.return=p,p=g;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===rr&&Yc(S)===E.type){r(p,E.sibling),g=s(E,y.props),g.ref=ts(p,E,y),g.return=p,p=g;break e}r(p,E);break}else t(p,E);E=E.sibling}y.type===dn?(g=qr(y.props.children,p.mode,b,y.key),g.return=p,p=g):(b=Ri(y.type,y.key,y.props,null,p.mode,b),b.ref=ts(p,g,y),b.return=p,p=b)}return o(p);case cn:e:{for(E=y.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){r(p,g.sibling),g=s(g,y.children||[]),g.return=p,p=g;break e}else{r(p,g);break}else t(p,g);g=g.sibling}g=va(y,p.mode,b),g.return=p,p=g}return o(p);case rr:return E=y._init,_(p,g,E(y._payload),b)}if(is(y))return v(p,g,y,b);if(Qn(y))return w(p,g,y,b);ai(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(r(p,g.sibling),g=s(g,y),g.return=p,p=g):(r(p,g),g=ya(y,p.mode,b),g.return=p,p=g),o(p)):r(p,g)}return _}var $n=kf(!0),Sf=kf(!1),Xi=kr(null),Zi=null,wn=null,_u=null;function bu(){_u=wn=Zi=null}function xu(e){var t=Xi.current;ue(Xi),e._currentValue=t}function hl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Nn(e,t){Zi=e,_u=wn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qe=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(_u!==e)if(e={context:e,memoizedValue:t,next:null},wn===null){if(Zi===null)throw Error(j(308));wn=e,Zi.dependencies={lanes:0,firstContext:e}}else wn=wn.next=e;return t}var Br=null;function ku(e){Br===null?Br=[e]:Br.push(e)}function Ef(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,ku(t)):(r.next=s.next,s.next=r),t.interleaved=r,Jt(e,n)}function Jt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var nr=!1;function Su(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ee&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Jt(e,r)}return s=n.interleaved,s===null?(t.next=t,ku(n)):(t.next=s.next,s.next=t),n.interleaved=t,Jt(e,r)}function Ti(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,uu(e,r)}}function Xc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function eo(e,t,r,n){var s=e.updateQueue;nr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,w=a;switch(f=t,m=r,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=ge({},h,f);break e;case 2:nr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Qr|=o,e.lanes=o,e.memoizedState=h}}function Zc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(j(191,s));s.call(n)}}}var Ws={},Lt=kr(Ws),As=kr(Ws),Rs=kr(Ws);function Vr(e){if(e===Ws)throw Error(j(174));return e}function Eu(e,t){switch(ae(Rs,t),ae(As,e),ae(Lt,Ws),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qa(t,e)}ue(Lt),ae(Lt,t)}function Dn(){ue(Lt),ue(As),ue(Rs)}function Tf(e){Vr(Rs.current);var t=Vr(Lt.current),r=qa(t,e.type);t!==r&&(ae(As,e),ae(Lt,r))}function ju(e){As.current===e&&(ue(Lt),ue(As))}var fe=kr(0);function to(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var da=[];function Tu(){for(var e=0;e<da.length;e++)da[e]._workInProgressVersionPrimary=null;da.length=0}var Ni=Yt.ReactCurrentDispatcher,ha=Yt.ReactCurrentBatchConfig,Jr=0,pe=null,xe=null,Ee=null,ro=!1,ms=!1,Is=0,fv=0;function De(){throw Error(j(321))}function Nu(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ct(e[r],t[r]))return!1;return!0}function Ou(e,t,r,n,s,i){if(Jr=i,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ni.current=e===null||e.memoizedState===null?yv:vv,e=r(n,s),ms){i=0;do{if(ms=!1,Is=0,25<=i)throw Error(j(301));i+=1,Ee=xe=null,t.updateQueue=null,Ni.current=wv,e=r(n,s)}while(ms)}if(Ni.current=no,t=xe!==null&&xe.next!==null,Jr=0,Ee=xe=pe=null,ro=!1,t)throw Error(j(300));return e}function Cu(){var e=Is!==0;return Is=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?pe.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function yt(){if(xe===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=xe.next;var t=Ee===null?pe.memoizedState:Ee.next;if(t!==null)Ee=t,xe=e;else{if(e===null)throw Error(j(310));xe=e,e={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},Ee===null?pe.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function $s(e,t){return typeof t=="function"?t(e):t}function fa(e){var t=yt(),r=t.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=e;var n=xe,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((Jr&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,pe.lanes|=d,Qr|=d}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=a,Ct(n,t.memoizedState)||(Qe=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,pe.lanes|=i,Qr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function pa(e){var t=yt(),r=t.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ct(i,t.memoizedState)||(Qe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Nf(){}function Of(e,t){var r=pe,n=yt(),s=t(),i=!Ct(n.memoizedState,s);if(i&&(n.memoizedState=s,Qe=!0),n=n.queue,Pu(Af.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ee!==null&&Ee.memoizedState.tag&1){if(r.flags|=2048,Ds(9,Pf.bind(null,r,n,s,t),void 0,null),je===null)throw Error(j(349));Jr&30||Cf(r,t,s)}return s}function Cf(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Pf(e,t,r,n){t.value=r,t.getSnapshot=n,Rf(t)&&If(e)}function Af(e,t,r){return r(function(){Rf(t)&&If(e)})}function Rf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ct(e,r)}catch{return!0}}function If(e){var t=Jt(e,1);t!==null&&Ot(t,e,1,-1)}function ed(e){var t=$t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:e},t.queue=e,e=e.dispatch=mv.bind(null,pe,e),[t.memoizedState,e]}function Ds(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function $f(){return yt().memoizedState}function Oi(e,t,r,n){var s=$t();pe.flags|=e,s.memoizedState=Ds(1|t,r,void 0,n===void 0?null:n)}function Oo(e,t,r,n){var s=yt();n=n===void 0?null:n;var i=void 0;if(xe!==null){var o=xe.memoizedState;if(i=o.destroy,n!==null&&Nu(n,o.deps)){s.memoizedState=Ds(t,r,i,n);return}}pe.flags|=e,s.memoizedState=Ds(1|t,r,i,n)}function td(e,t){return Oi(8390656,8,e,t)}function Pu(e,t){return Oo(2048,8,e,t)}function Df(e,t){return Oo(4,2,e,t)}function Mf(e,t){return Oo(4,4,e,t)}function Uf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lf(e,t,r){return r=r!=null?r.concat([e]):null,Oo(4,4,Uf.bind(null,t,e),r)}function Au(){}function zf(e,t){var r=yt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Nu(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ff(e,t){var r=yt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Nu(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Bf(e,t,r){return Jr&21?(Ct(r,t)||(r=qh(),pe.lanes|=r,Qr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=r)}function pv(e,t){var r=re;re=r!==0&&4>r?r:4,e(!0);var n=ha.transition;ha.transition={};try{e(!1),t()}finally{re=r,ha.transition=n}}function Vf(){return yt().memoizedState}function gv(e,t,r){var n=yr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Hf(e))Wf(t,r);else if(r=Ef(e,t,r,n),r!==null){var s=Ve();Ot(r,e,n,s),qf(r,t,n)}}function mv(e,t,r){var n=yr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Hf(e))Wf(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,Ct(a,o)){var l=t.interleaved;l===null?(s.next=s,ku(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=Ef(e,t,s,n),r!==null&&(s=Ve(),Ot(r,e,n,s),qf(r,t,n))}}function Hf(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function Wf(e,t){ms=ro=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qf(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,uu(e,r)}}var no={readContext:mt,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},yv={readContext:mt,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:td,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Oi(4194308,4,Uf.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var r=$t();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=$t();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=gv.bind(null,pe,e),[n.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:ed,useDebugValue:Au,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=ed(!1),t=e[0];return e=pv.bind(null,e[1]),$t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=pe,s=$t();if(de){if(r===void 0)throw Error(j(407));r=r()}else{if(r=t(),je===null)throw Error(j(349));Jr&30||Cf(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,td(Af.bind(null,n,i,e),[e]),n.flags|=2048,Ds(9,Pf.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=$t(),t=je.identifierPrefix;if(de){var r=Wt,n=Ht;r=(n&~(1<<32-Nt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Is++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=fv++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vv={readContext:mt,useCallback:zf,useContext:mt,useEffect:Pu,useImperativeHandle:Lf,useInsertionEffect:Df,useLayoutEffect:Mf,useMemo:Ff,useReducer:fa,useRef:$f,useState:function(){return fa($s)},useDebugValue:Au,useDeferredValue:function(e){var t=yt();return Bf(t,xe.memoizedState,e)},useTransition:function(){var e=fa($s)[0],t=yt().memoizedState;return[e,t]},useMutableSource:Nf,useSyncExternalStore:Of,useId:Vf,unstable_isNewReconciler:!1},wv={readContext:mt,useCallback:zf,useContext:mt,useEffect:Pu,useImperativeHandle:Lf,useInsertionEffect:Df,useLayoutEffect:Mf,useMemo:Ff,useReducer:pa,useRef:$f,useState:function(){return pa($s)},useDebugValue:Au,useDeferredValue:function(e){var t=yt();return xe===null?t.memoizedState=e:Bf(t,xe.memoizedState,e)},useTransition:function(){var e=pa($s)[0],t=yt().memoizedState;return[e,t]},useMutableSource:Nf,useSyncExternalStore:Of,useId:Vf,unstable_isNewReconciler:!1};function kt(e,t){if(e&&e.defaultProps){t=ge({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function fl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ge({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Co={isMounted:function(e){return(e=e._reactInternals)?Zr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ve(),s=yr(e),i=qt(n,s);i.payload=t,r!=null&&(i.callback=r),t=gr(e,i,s),t!==null&&(Ot(t,e,s,n),Ti(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ve(),s=yr(e),i=qt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=gr(e,i,s),t!==null&&(Ot(t,e,s,n),Ti(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ve(),n=yr(e),s=qt(r,n);s.tag=2,t!=null&&(s.callback=t),t=gr(e,s,n),t!==null&&(Ot(t,e,n,r),Ti(t,e,n))}};function rd(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ns(r,n)||!Ns(s,i):!0}function Gf(e,t,r){var n=!1,s=br,i=t.contextType;return typeof i=="object"&&i!==null?i=mt(i):(s=Xe(t)?Gr:ze.current,n=t.contextTypes,i=(n=n!=null)?Rn(e,s):br),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Co,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function nd(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Co.enqueueReplaceState(t,t.state,null)}function pl(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Su(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=mt(i):(i=Xe(t)?Gr:ze.current,s.context=Rn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(fl(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Co.enqueueReplaceState(s,s.state,null),eo(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Mn(e,t){try{var r="",n=t;do r+=Gm(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ga(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function gl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var _v=typeof WeakMap=="function"?WeakMap:Map;function Kf(e,t,r){r=qt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){io||(io=!0,El=n),gl(e,t)},r}function Jf(e,t,r){r=qt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){gl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){gl(e,t),typeof n!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function sd(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new _v;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Iv.bind(null,e,t,r),t.then(e,e))}function id(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function od(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=qt(-1,1),t.tag=2,gr(r,t,1))),r.lanes|=1),e)}var bv=Yt.ReactCurrentOwner,Qe=!1;function Be(e,t,r,n){t.child=e===null?Sf(t,null,r,n):$n(t,e.child,r,n)}function ad(e,t,r,n,s){r=r.render;var i=t.ref;return Nn(t,s),n=Ou(e,t,r,n,i,s),r=Cu(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qt(e,t,s)):(de&&r&&yu(t),t.flags|=1,Be(e,t,n,s),t.child)}function ld(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!zu(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Qf(e,t,i,n,s)):(e=Ri(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ns,r(o,n)&&e.ref===t.ref)return Qt(e,t,s)}return t.flags|=1,e=vr(i,n),e.ref=t.ref,e.return=t,t.child=e}function Qf(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Ns(i,n)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Qe=!0);else return t.lanes=e.lanes,Qt(e,t,s)}return ml(e,t,r,n,s)}function Yf(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(bn,tt),tt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ae(bn,tt),tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ae(bn,tt),tt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ae(bn,tt),tt|=n;return Be(e,t,s,r),t.child}function Xf(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ml(e,t,r,n,s){var i=Xe(r)?Gr:ze.current;return i=Rn(t,i),Nn(t,s),r=Ou(e,t,r,n,i,s),n=Cu(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qt(e,t,s)):(de&&n&&yu(t),t.flags|=1,Be(e,t,r,s),t.child)}function ud(e,t,r,n,s){if(Xe(r)){var i=!0;Ji(t)}else i=!1;if(Nn(t,s),t.stateNode===null)Ci(e,t),Gf(t,r,n),pl(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=mt(u):(u=Xe(r)?Gr:ze.current,u=Rn(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&nd(t,o,n,u),nr=!1;var f=t.memoizedState;o.state=f,eo(t,n,o,s),l=t.memoizedState,a!==n||f!==l||Ye.current||nr?(typeof d=="function"&&(fl(t,r,d,n),l=t.memoizedState),(a=nr||rd(t,r,a,n,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,jf(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:kt(t.type,a),o.props=u,h=t.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=mt(l):(l=Xe(r)?Gr:ze.current,l=Rn(t,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&nd(t,o,n,l),nr=!1,f=t.memoizedState,o.state=f,eo(t,n,o,s);var v=t.memoizedState;a!==h||f!==v||Ye.current||nr?(typeof m=="function"&&(fl(t,r,m,n),v=t.memoizedState),(u=nr||rd(t,r,u,n,f,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return yl(e,t,r,n,i,s)}function yl(e,t,r,n,s,i){Xf(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Kc(t,r,!1),Qt(e,t,i);n=t.stateNode,bv.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=$n(t,e.child,null,i),t.child=$n(t,null,a,i)):Be(e,t,a,i),t.memoizedState=n.state,s&&Kc(t,r,!0),t.child}function Zf(e){var t=e.stateNode;t.pendingContext?Gc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gc(e,t.context,!1),Eu(e,t.containerInfo)}function cd(e,t,r,n,s){return In(),wu(s),t.flags|=256,Be(e,t,r,n),t.child}var vl={dehydrated:null,treeContext:null,retryLane:0};function wl(e){return{baseLanes:e,cachePool:null,transitions:null}}function ep(e,t,r){var n=t.pendingProps,s=fe.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ae(fe,s&1),e===null)return dl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ro(o,n,0,null),e=qr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=wl(r),t.memoizedState=vl,e):Ru(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return xv(e,t,o,n,a,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=vr(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=vr(a,i):(i=qr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?wl(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=vl,n}return i=e.child,e=i.sibling,n=vr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ru(e,t){return t=Ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function li(e,t,r,n){return n!==null&&wu(n),$n(t,e.child,null,r),e=Ru(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xv(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=ga(Error(j(422))),li(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Ro({mode:"visible",children:n.children},s,0,null),i=qr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&$n(t,e.child,null,o),t.child.memoizedState=wl(o),t.memoizedState=vl,i);if(!(t.mode&1))return li(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(j(419)),n=ga(i,n,void 0),li(e,t,o,n)}if(a=(o&e.childLanes)!==0,Qe||a){if(n=je,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Jt(e,s),Ot(n,e,s,-1))}return Lu(),n=ga(Error(j(421))),li(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=$v.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,nt=pr(s.nextSibling),st=t,de=!0,Tt=null,e!==null&&(ht[ft++]=Ht,ht[ft++]=Wt,ht[ft++]=Kr,Ht=e.id,Wt=e.overflow,Kr=t),t=Ru(t,n.children),t.flags|=4096,t)}function dd(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),hl(e.return,t,r)}function ma(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function tp(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Be(e,t,n.children,r),n=fe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dd(e,r,t);else if(e.tag===19)dd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ae(fe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&to(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ma(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&to(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ma(t,!0,r,null,i);break;case"together":ma(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ci(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Qr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,r=vr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function kv(e,t,r){switch(t.tag){case 3:Zf(t),In();break;case 5:Tf(t);break;case 1:Xe(t.type)&&Ji(t);break;case 4:Eu(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ae(Xi,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ae(fe,fe.current&1),t.flags|=128,null):r&t.child.childLanes?ep(e,t,r):(ae(fe,fe.current&1),e=Qt(e,t,r),e!==null?e.sibling:null);ae(fe,fe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return tp(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ae(fe,fe.current),n)break;return null;case 22:case 23:return t.lanes=0,Yf(e,t,r)}return Qt(e,t,r)}var rp,_l,np,sp;rp=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_l=function(){};np=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Vr(Lt.current);var i=null;switch(r){case"input":s=Ba(e,s),n=Ba(e,n),i=[];break;case"select":s=ge({},s,{value:void 0}),n=ge({},n,{value:void 0}),i=[];break;case"textarea":s=Wa(e,s),n=Wa(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Gi)}Ga(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bs.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&le("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};sp=function(e,t,r,n){r!==n&&(t.flags|=4)};function rs(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Sv(e,t,r){var n=t.pendingProps;switch(vu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return Xe(t.type)&&Ki(),Me(t),null;case 3:return n=t.stateNode,Dn(),ue(Ye),ue(ze),Tu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(oi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tt!==null&&(Nl(Tt),Tt=null))),_l(e,t),Me(t),null;case 5:ju(t);var s=Vr(Rs.current);if(r=t.type,e!==null&&t.stateNode!=null)np(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(j(166));return Me(t),null}if(e=Vr(Lt.current),oi(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Mt]=t,n[Ps]=i,e=(t.mode&1)!==0,r){case"dialog":le("cancel",n),le("close",n);break;case"iframe":case"object":case"embed":le("load",n);break;case"video":case"audio":for(s=0;s<as.length;s++)le(as[s],n);break;case"source":le("error",n);break;case"img":case"image":case"link":le("error",n),le("load",n);break;case"details":le("toggle",n);break;case"input":_c(n,i),le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},le("invalid",n);break;case"textarea":xc(n,i),le("invalid",n)}Ga(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&ii(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ii(n.textContent,a,e),s=["children",""+a]):bs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&le("scroll",n)}switch(r){case"input":Ys(n),bc(n,i,!0);break;case"textarea":Ys(n),kc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Gi)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ph(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Mt]=t,e[Ps]=n,rp(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ka(r,n),r){case"dialog":le("cancel",e),le("close",e),s=n;break;case"iframe":case"object":case"embed":le("load",e),s=n;break;case"video":case"audio":for(s=0;s<as.length;s++)le(as[s],e);s=n;break;case"source":le("error",e),s=n;break;case"img":case"image":case"link":le("error",e),le("load",e),s=n;break;case"details":le("toggle",e),s=n;break;case"input":_c(e,n),s=Ba(e,n),le("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ge({},n,{value:void 0}),le("invalid",e);break;case"textarea":xc(e,n),s=Wa(e,n),le("invalid",e);break;default:s=n}Ga(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Ih(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ah(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&xs(e,l):typeof l=="number"&&xs(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bs.hasOwnProperty(i)?l!=null&&i==="onScroll"&&le("scroll",e):l!=null&&nu(e,i,l,o))}switch(r){case"input":Ys(e),bc(e,n,!1);break;case"textarea":Ys(e),kc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+_r(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Sn(e,!!n.multiple,i,!1):n.defaultValue!=null&&Sn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Gi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)sp(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(j(166));if(r=Vr(Rs.current),Vr(Lt.current),oi(t)){if(n=t.stateNode,r=t.memoizedProps,n[Mt]=t,(i=n.nodeValue!==r)&&(e=st,e!==null))switch(e.tag){case 3:ii(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ii(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Mt]=t,t.stateNode=n}return Me(t),null;case 13:if(ue(fe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&nt!==null&&t.mode&1&&!(t.flags&128))xf(),In(),t.flags|=98560,i=!1;else if(i=oi(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(j(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[Mt]=t}else In(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),i=!1}else Tt!==null&&(Nl(Tt),Tt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||fe.current&1?ke===0&&(ke=3):Lu())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return Dn(),_l(e,t),e===null&&Os(t.stateNode.containerInfo),Me(t),null;case 10:return xu(t.type._context),Me(t),null;case 17:return Xe(t.type)&&Ki(),Me(t),null;case 19:if(ue(fe),i=t.memoizedState,i===null)return Me(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)rs(i,!1);else{if(ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=to(e),o!==null){for(t.flags|=128,rs(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ae(fe,fe.current&1|2),t.child}e=e.sibling}i.tail!==null&&ye()>Un&&(t.flags|=128,n=!0,rs(i,!1),t.lanes=4194304)}else{if(!n)if(e=to(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),rs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!de)return Me(t),null}else 2*ye()-i.renderingStartTime>Un&&r!==1073741824&&(t.flags|=128,n=!0,rs(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ye(),t.sibling=null,r=fe.current,ae(fe,n?r&1|2:r&1),t):(Me(t),null);case 22:case 23:return Uu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?tt&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(j(156,t.tag))}function Ev(e,t){switch(vu(t),t.tag){case 1:return Xe(t.type)&&Ki(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dn(),ue(Ye),ue(ze),Tu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ju(t),null;case 13:if(ue(fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));In()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(fe),null;case 4:return Dn(),null;case 10:return xu(t.type._context),null;case 22:case 23:return Uu(),null;case 24:return null;default:return null}}var ui=!1,Ue=!1,jv=typeof WeakSet=="function"?WeakSet:Set,I=null;function _n(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){me(e,t,n)}else r.current=null}function bl(e,t,r){try{r()}catch(n){me(e,t,n)}}var hd=!1;function Tv(e,t){if(sl=Hi,e=uf(),mu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(a=o+s),h!==i||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===s&&(a=o),f===i&&++d===n&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(il={focusedElem:e,selectionRange:r},Hi=!1,I=t;I!==null;)if(t=I,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,I=e;else for(;I!==null;){t=I;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,_=v.memoizedState,p=t.stateNode,g=p.getSnapshotBeforeUpdate(t.elementType===t.type?w:kt(t.type,w),_);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(b){me(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,I=e;break}I=t.return}return v=hd,hd=!1,v}function ys(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&bl(t,r,i)}s=s.next}while(s!==n)}}function Po(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function xl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ip(e){var t=e.alternate;t!==null&&(e.alternate=null,ip(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mt],delete t[Ps],delete t[ll],delete t[uv],delete t[cv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function op(e){return e.tag===5||e.tag===3||e.tag===4}function fd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||op(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Gi));else if(n!==4&&(e=e.child,e!==null))for(kl(e,t,r),e=e.sibling;e!==null;)kl(e,t,r),e=e.sibling}function Sl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Sl(e,t,r),e=e.sibling;e!==null;)Sl(e,t,r),e=e.sibling}var Ae=null,Et=!1;function er(e,t,r){for(r=r.child;r!==null;)ap(e,t,r),r=r.sibling}function ap(e,t,r){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(ko,r)}catch{}switch(r.tag){case 5:Ue||_n(r,t);case 6:var n=Ae,s=Et;Ae=null,er(e,t,r),Ae=n,Et=s,Ae!==null&&(Et?(e=Ae,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ae.removeChild(r.stateNode));break;case 18:Ae!==null&&(Et?(e=Ae,r=r.stateNode,e.nodeType===8?ua(e.parentNode,r):e.nodeType===1&&ua(e,r),js(e)):ua(Ae,r.stateNode));break;case 4:n=Ae,s=Et,Ae=r.stateNode.containerInfo,Et=!0,er(e,t,r),Ae=n,Et=s;break;case 0:case 11:case 14:case 15:if(!Ue&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&bl(r,t,o),s=s.next}while(s!==n)}er(e,t,r);break;case 1:if(!Ue&&(_n(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){me(r,t,a)}er(e,t,r);break;case 21:er(e,t,r);break;case 22:r.mode&1?(Ue=(n=Ue)||r.memoizedState!==null,er(e,t,r),Ue=n):er(e,t,r);break;default:er(e,t,r)}}function pd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new jv),t.forEach(function(n){var s=Dv.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function bt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ae=a.stateNode,Et=!1;break e;case 3:Ae=a.stateNode.containerInfo,Et=!0;break e;case 4:Ae=a.stateNode.containerInfo,Et=!0;break e}a=a.return}if(Ae===null)throw Error(j(160));ap(i,o,s),Ae=null,Et=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){me(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lp(t,e),t=t.sibling}function lp(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bt(t,e),It(e),n&4){try{ys(3,e,e.return),Po(3,e)}catch(w){me(e,e.return,w)}try{ys(5,e,e.return)}catch(w){me(e,e.return,w)}}break;case 1:bt(t,e),It(e),n&512&&r!==null&&_n(r,r.return);break;case 5:if(bt(t,e),It(e),n&512&&r!==null&&_n(r,r.return),e.flags&32){var s=e.stateNode;try{xs(s,"")}catch(w){me(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Oh(s,i),Ka(a,o);var u=Ka(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Ih(s,h):d==="dangerouslySetInnerHTML"?Ah(s,h):d==="children"?xs(s,h):nu(s,d,h,u)}switch(a){case"input":Va(s,i);break;case"textarea":Ch(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Sn(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Sn(s,!!i.multiple,i.defaultValue,!0):Sn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ps]=i}catch(w){me(e,e.return,w)}}break;case 6:if(bt(t,e),It(e),n&4){if(e.stateNode===null)throw Error(j(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){me(e,e.return,w)}}break;case 3:if(bt(t,e),It(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{js(t.containerInfo)}catch(w){me(e,e.return,w)}break;case 4:bt(t,e),It(e);break;case 13:bt(t,e),It(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Du=ye())),n&4&&pd(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ue=(u=Ue)||d,bt(t,e),Ue=u):bt(t,e),It(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(I=e,d=e.child;d!==null;){for(h=I=d;I!==null;){switch(f=I,m=f.child,f.tag){case 0:case 11:case 14:case 15:ys(4,f,f.return);break;case 1:_n(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){me(n,r,w)}}break;case 5:_n(f,f.return);break;case 22:if(f.memoizedState!==null){md(h);continue}}m!==null?(m.return=f,I=m):md(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Rh("display",o))}catch(w){me(e,e.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){me(e,e.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:bt(t,e),It(e),n&4&&pd(e);break;case 21:break;default:bt(t,e),It(e)}}function It(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(op(r)){var n=r;break e}r=r.return}throw Error(j(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(xs(s,""),n.flags&=-33);var i=fd(e);Sl(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=fd(e);kl(e,a,o);break;default:throw Error(j(161))}}catch(l){me(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Nv(e,t,r){I=e,up(e)}function up(e,t,r){for(var n=(e.mode&1)!==0;I!==null;){var s=I,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ui;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ue;a=ui;var u=Ue;if(ui=o,(Ue=l)&&!u)for(I=s;I!==null;)o=I,l=o.child,o.tag===22&&o.memoizedState!==null?yd(s):l!==null?(l.return=o,I=l):yd(s);for(;i!==null;)I=i,up(i),i=i.sibling;I=s,ui=a,Ue=u}gd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,I=i):gd(e)}}function gd(e){for(;I!==null;){var t=I;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ue||Po(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ue)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:kt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Zc(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Zc(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&js(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}Ue||t.flags&512&&xl(t)}catch(f){me(t,t.return,f)}}if(t===e){I=null;break}if(r=t.sibling,r!==null){r.return=t.return,I=r;break}I=t.return}}function md(e){for(;I!==null;){var t=I;if(t===e){I=null;break}var r=t.sibling;if(r!==null){r.return=t.return,I=r;break}I=t.return}}function yd(e){for(;I!==null;){var t=I;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Po(4,t)}catch(l){me(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){me(t,s,l)}}var i=t.return;try{xl(t)}catch(l){me(t,i,l)}break;case 5:var o=t.return;try{xl(t)}catch(l){me(t,o,l)}}}catch(l){me(t,t.return,l)}if(t===e){I=null;break}var a=t.sibling;if(a!==null){a.return=t.return,I=a;break}I=t.return}}var Ov=Math.ceil,so=Yt.ReactCurrentDispatcher,Iu=Yt.ReactCurrentOwner,gt=Yt.ReactCurrentBatchConfig,ee=0,je=null,_e=null,Re=0,tt=0,bn=kr(0),ke=0,Ms=null,Qr=0,Ao=0,$u=0,vs=null,Ke=null,Du=0,Un=1/0,Ft=null,io=!1,El=null,mr=null,ci=!1,cr=null,oo=0,ws=0,jl=null,Pi=-1,Ai=0;function Ve(){return ee&6?ye():Pi!==-1?Pi:Pi=ye()}function yr(e){return e.mode&1?ee&2&&Re!==0?Re&-Re:hv.transition!==null?(Ai===0&&(Ai=qh()),Ai):(e=re,e!==0||(e=window.event,e=e===void 0?16:Zh(e.type)),e):1}function Ot(e,t,r,n){if(50<ws)throw ws=0,jl=null,Error(j(185));Bs(e,r,n),(!(ee&2)||e!==je)&&(e===je&&(!(ee&2)&&(Ao|=r),ke===4&&or(e,Re)),Ze(e,n),r===1&&ee===0&&!(t.mode&1)&&(Un=ye()+500,No&&Sr()))}function Ze(e,t){var r=e.callbackNode;hy(e,t);var n=Vi(e,e===je?Re:0);if(n===0)r!==null&&jc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&jc(r),t===1)e.tag===0?dv(vd.bind(null,e)):wf(vd.bind(null,e)),av(function(){!(ee&6)&&Sr()}),r=null;else{switch(Gh(n)){case 1:r=lu;break;case 4:r=Hh;break;case 16:r=Bi;break;case 536870912:r=Wh;break;default:r=Bi}r=yp(r,cp.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function cp(e,t){if(Pi=-1,Ai=0,ee&6)throw Error(j(327));var r=e.callbackNode;if(On()&&e.callbackNode!==r)return null;var n=Vi(e,e===je?Re:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ao(e,n);else{t=n;var s=ee;ee|=2;var i=hp();(je!==e||Re!==t)&&(Ft=null,Un=ye()+500,Wr(e,t));do try{Av();break}catch(a){dp(e,a)}while(!0);bu(),so.current=i,ee=s,_e!==null?t=0:(je=null,Re=0,t=ke)}if(t!==0){if(t===2&&(s=Za(e),s!==0&&(n=s,t=Tl(e,s))),t===1)throw r=Ms,Wr(e,0),or(e,n),Ze(e,ye()),r;if(t===6)or(e,n);else{if(s=e.current.alternate,!(n&30)&&!Cv(s)&&(t=ao(e,n),t===2&&(i=Za(e),i!==0&&(n=i,t=Tl(e,i))),t===1))throw r=Ms,Wr(e,0),or(e,n),Ze(e,ye()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(j(345));case 2:Ir(e,Ke,Ft);break;case 3:if(or(e,n),(n&130023424)===n&&(t=Du+500-ye(),10<t)){if(Vi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ve(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=al(Ir.bind(null,e,Ke,Ft),t);break}Ir(e,Ke,Ft);break;case 4:if(or(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Nt(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=ye()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ov(n/1960))-n,10<n){e.timeoutHandle=al(Ir.bind(null,e,Ke,Ft),n);break}Ir(e,Ke,Ft);break;case 5:Ir(e,Ke,Ft);break;default:throw Error(j(329))}}}return Ze(e,ye()),e.callbackNode===r?cp.bind(null,e):null}function Tl(e,t){var r=vs;return e.current.memoizedState.isDehydrated&&(Wr(e,t).flags|=256),e=ao(e,t),e!==2&&(t=Ke,Ke=r,t!==null&&Nl(t)),e}function Nl(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function Cv(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ct(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function or(e,t){for(t&=~$u,t&=~Ao,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Nt(t),n=1<<r;e[r]=-1,t&=~n}}function vd(e){if(ee&6)throw Error(j(327));On();var t=Vi(e,0);if(!(t&1))return Ze(e,ye()),null;var r=ao(e,t);if(e.tag!==0&&r===2){var n=Za(e);n!==0&&(t=n,r=Tl(e,n))}if(r===1)throw r=Ms,Wr(e,0),or(e,t),Ze(e,ye()),r;if(r===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ir(e,Ke,Ft),Ze(e,ye()),null}function Mu(e,t){var r=ee;ee|=1;try{return e(t)}finally{ee=r,ee===0&&(Un=ye()+500,No&&Sr())}}function Yr(e){cr!==null&&cr.tag===0&&!(ee&6)&&On();var t=ee;ee|=1;var r=gt.transition,n=re;try{if(gt.transition=null,re=1,e)return e()}finally{re=n,gt.transition=r,ee=t,!(ee&6)&&Sr()}}function Uu(){tt=bn.current,ue(bn)}function Wr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ov(r)),_e!==null)for(r=_e.return;r!==null;){var n=r;switch(vu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ki();break;case 3:Dn(),ue(Ye),ue(ze),Tu();break;case 5:ju(n);break;case 4:Dn();break;case 13:ue(fe);break;case 19:ue(fe);break;case 10:xu(n.type._context);break;case 22:case 23:Uu()}r=r.return}if(je=e,_e=e=vr(e.current,null),Re=tt=t,ke=0,Ms=null,$u=Ao=Qr=0,Ke=vs=null,Br!==null){for(t=0;t<Br.length;t++)if(r=Br[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Br=null}return e}function dp(e,t){do{var r=_e;try{if(bu(),Ni.current=no,ro){for(var n=pe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ro=!1}if(Jr=0,Ee=xe=pe=null,ms=!1,Is=0,Iu.current=null,r===null||r.return===null){ke=1,Ms=t,_e=null;break}e:{var i=e,o=r.return,a=r,l=t;if(t=Re,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=id(o);if(m!==null){m.flags&=-257,od(m,o,a,i,t),m.mode&1&&sd(i,u,t),t=m,l=u;var v=t.updateQueue;if(v===null){var w=new Set;w.add(l),t.updateQueue=w}else v.add(l);break e}else{if(!(t&1)){sd(i,u,t),Lu();break e}l=Error(j(426))}}else if(de&&a.mode&1){var _=id(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),od(_,o,a,i,t),wu(Mn(l,a));break e}}i=l=Mn(l,a),ke!==4&&(ke=2),vs===null?vs=[i]:vs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Kf(i,l,t);Xc(i,p);break e;case 1:a=l;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(mr===null||!mr.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=Jf(i,a,t);Xc(i,b);break e}}i=i.return}while(i!==null)}pp(r)}catch(S){t=S,_e===r&&r!==null&&(_e=r=r.return);continue}break}while(!0)}function hp(){var e=so.current;return so.current=no,e===null?no:e}function Lu(){(ke===0||ke===3||ke===2)&&(ke=4),je===null||!(Qr&268435455)&&!(Ao&268435455)||or(je,Re)}function ao(e,t){var r=ee;ee|=2;var n=hp();(je!==e||Re!==t)&&(Ft=null,Wr(e,t));do try{Pv();break}catch(s){dp(e,s)}while(!0);if(bu(),ee=r,so.current=n,_e!==null)throw Error(j(261));return je=null,Re=0,ke}function Pv(){for(;_e!==null;)fp(_e)}function Av(){for(;_e!==null&&!ny();)fp(_e)}function fp(e){var t=mp(e.alternate,e,tt);e.memoizedProps=e.pendingProps,t===null?pp(e):_e=t,Iu.current=null}function pp(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ev(r,t),r!==null){r.flags&=32767,_e=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ke=6,_e=null;return}}else if(r=Sv(r,t,tt),r!==null){_e=r;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);ke===0&&(ke=5)}function Ir(e,t,r){var n=re,s=gt.transition;try{gt.transition=null,re=1,Rv(e,t,r,n)}finally{gt.transition=s,re=n}return null}function Rv(e,t,r,n){do On();while(cr!==null);if(ee&6)throw Error(j(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(fy(e,i),e===je&&(_e=je=null,Re=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ci||(ci=!0,yp(Bi,function(){return On(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=gt.transition,gt.transition=null;var o=re;re=1;var a=ee;ee|=4,Iu.current=null,Tv(e,r),lp(r,e),Zy(il),Hi=!!sl,il=sl=null,e.current=r,Nv(r),sy(),ee=a,re=o,gt.transition=i}else e.current=r;if(ci&&(ci=!1,cr=e,oo=s),i=e.pendingLanes,i===0&&(mr=null),ay(r.stateNode),Ze(e,ye()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(io)throw io=!1,e=El,El=null,e;return oo&1&&e.tag!==0&&On(),i=e.pendingLanes,i&1?e===jl?ws++:(ws=0,jl=e):ws=0,Sr(),null}function On(){if(cr!==null){var e=Gh(oo),t=gt.transition,r=re;try{if(gt.transition=null,re=16>e?16:e,cr===null)var n=!1;else{if(e=cr,cr=null,oo=0,ee&6)throw Error(j(331));var s=ee;for(ee|=4,I=e.current;I!==null;){var i=I,o=i.child;if(I.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(I=u;I!==null;){var d=I;switch(d.tag){case 0:case 11:case 15:ys(8,d,i)}var h=d.child;if(h!==null)h.return=d,I=h;else for(;I!==null;){d=I;var f=d.sibling,m=d.return;if(ip(d),d===u){I=null;break}if(f!==null){f.return=m,I=f;break}I=m}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}I=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,I=o;else e:for(;I!==null;){if(i=I,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ys(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,I=p;break e}I=i.return}}var g=e.current;for(I=g;I!==null;){o=I;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,I=y;else e:for(o=g;I!==null;){if(a=I,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Po(9,a)}}catch(S){me(a,a.return,S)}if(a===o){I=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,I=b;break e}I=a.return}}if(ee=s,Sr(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(ko,e)}catch{}n=!0}return n}finally{re=r,gt.transition=t}}return!1}function wd(e,t,r){t=Mn(r,t),t=Kf(e,t,1),e=gr(e,t,1),t=Ve(),e!==null&&(Bs(e,1,t),Ze(e,t))}function me(e,t,r){if(e.tag===3)wd(e,e,r);else for(;t!==null;){if(t.tag===3){wd(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(mr===null||!mr.has(n))){e=Mn(r,e),e=Jf(t,e,1),t=gr(t,e,1),e=Ve(),t!==null&&(Bs(t,1,e),Ze(t,e));break}}t=t.return}}function Iv(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&r,je===e&&(Re&r)===r&&(ke===4||ke===3&&(Re&130023424)===Re&&500>ye()-Du?Wr(e,0):$u|=r),Ze(e,t)}function gp(e,t){t===0&&(e.mode&1?(t=ei,ei<<=1,!(ei&130023424)&&(ei=4194304)):t=1);var r=Ve();e=Jt(e,t),e!==null&&(Bs(e,t,r),Ze(e,r))}function $v(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),gp(e,r)}function Dv(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(j(314))}n!==null&&n.delete(t),gp(e,r)}var mp;mp=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ye.current)Qe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Qe=!1,kv(e,t,r);Qe=!!(e.flags&131072)}else Qe=!1,de&&t.flags&1048576&&_f(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ci(e,t),e=t.pendingProps;var s=Rn(t,ze.current);Nn(t,r),s=Ou(null,t,n,e,s,r);var i=Cu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xe(n)?(i=!0,Ji(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Su(t),s.updater=Co,t.stateNode=s,s._reactInternals=t,pl(t,n,e,r),t=yl(null,t,n,!0,i,r)):(t.tag=0,de&&i&&yu(t),Be(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ci(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Uv(n),e=kt(n,e),s){case 0:t=ml(null,t,n,e,r);break e;case 1:t=ud(null,t,n,e,r);break e;case 11:t=ad(null,t,n,e,r);break e;case 14:t=ld(null,t,n,kt(n.type,e),r);break e}throw Error(j(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:kt(n,s),ml(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:kt(n,s),ud(e,t,n,s,r);case 3:e:{if(Zf(t),e===null)throw Error(j(387));n=t.pendingProps,i=t.memoizedState,s=i.element,jf(e,t),eo(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Mn(Error(j(423)),t),t=cd(e,t,n,r,s);break e}else if(n!==s){s=Mn(Error(j(424)),t),t=cd(e,t,n,r,s);break e}else for(nt=pr(t.stateNode.containerInfo.firstChild),st=t,de=!0,Tt=null,r=Sf(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(In(),n===s){t=Qt(e,t,r);break e}Be(e,t,n,r)}t=t.child}return t;case 5:return Tf(t),e===null&&dl(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,ol(n,s)?o=null:i!==null&&ol(n,i)&&(t.flags|=32),Xf(e,t),Be(e,t,o,r),t.child;case 6:return e===null&&dl(t),null;case 13:return ep(e,t,r);case 4:return Eu(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=$n(t,null,n,r):Be(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:kt(n,s),ad(e,t,n,s,r);case 7:return Be(e,t,t.pendingProps,r),t.child;case 8:return Be(e,t,t.pendingProps.children,r),t.child;case 12:return Be(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ae(Xi,n._currentValue),n._currentValue=o,i!==null)if(Ct(i.value,o)){if(i.children===s.children&&!Ye.current){t=Qt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=qt(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),hl(i.return,r,t),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(j(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),hl(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Be(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Nn(t,r),s=mt(s),n=n(s),t.flags|=1,Be(e,t,n,r),t.child;case 14:return n=t.type,s=kt(n,t.pendingProps),s=kt(n.type,s),ld(e,t,n,s,r);case 15:return Qf(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:kt(n,s),Ci(e,t),t.tag=1,Xe(n)?(e=!0,Ji(t)):e=!1,Nn(t,r),Gf(t,n,s),pl(t,n,s,r),yl(null,t,n,!0,e,r);case 19:return tp(e,t,r);case 22:return Yf(e,t,r)}throw Error(j(156,t.tag))};function yp(e,t){return Vh(e,t)}function Mv(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(e,t,r,n){return new Mv(e,t,r,n)}function zu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Uv(e){if(typeof e=="function")return zu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===iu)return 11;if(e===ou)return 14}return 2}function vr(e,t){var r=e.alternate;return r===null?(r=pt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ri(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")zu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case dn:return qr(r.children,s,i,t);case su:o=8,s|=8;break;case Ua:return e=pt(12,r,t,s|2),e.elementType=Ua,e.lanes=i,e;case La:return e=pt(13,r,t,s),e.elementType=La,e.lanes=i,e;case za:return e=pt(19,r,t,s),e.elementType=za,e.lanes=i,e;case jh:return Ro(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Sh:o=10;break e;case Eh:o=9;break e;case iu:o=11;break e;case ou:o=14;break e;case rr:o=16,n=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return t=pt(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function qr(e,t,r,n){return e=pt(7,e,n,t),e.lanes=r,e}function Ro(e,t,r,n){return e=pt(22,e,n,t),e.elementType=jh,e.lanes=r,e.stateNode={isHidden:!1},e}function ya(e,t,r){return e=pt(6,e,null,t),e.lanes=r,e}function va(e,t,r){return t=pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lv(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xo(0),this.expirationTimes=Xo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xo(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fu(e,t,r,n,s,i,o,a,l){return e=new Lv(e,t,r,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=pt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Su(i),e}function zv(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function vp(e){if(!e)return br;e=e._reactInternals;e:{if(Zr(e)!==e||e.tag!==1)throw Error(j(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(j(171))}if(e.tag===1){var r=e.type;if(Xe(r))return vf(e,r,t)}return t}function wp(e,t,r,n,s,i,o,a,l){return e=Fu(r,n,!0,e,s,i,o,a,l),e.context=vp(null),r=e.current,n=Ve(),s=yr(r),i=qt(n,s),i.callback=t??null,gr(r,i,s),e.current.lanes=s,Bs(e,s,n),Ze(e,n),e}function Io(e,t,r,n){var s=t.current,i=Ve(),o=yr(s);return r=vp(r),t.context===null?t.context=r:t.pendingContext=r,t=qt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=gr(s,t,o),e!==null&&(Ot(e,s,o,i),Ti(e,s,o)),o}function lo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _d(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Bu(e,t){_d(e,t),(e=e.alternate)&&_d(e,t)}function Fv(){return null}var _p=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vu(e){this._internalRoot=e}$o.prototype.render=Vu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));Io(e,t,null,null)};$o.prototype.unmount=Vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yr(function(){Io(null,e,null,null)}),t[Kt]=null}};function $o(e){this._internalRoot=e}$o.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qh();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ir.length&&t!==0&&t<ir[r].priority;r++);ir.splice(r,0,e),r===0&&Xh(e)}};function Hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Do(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bd(){}function Bv(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=lo(o);i.call(u)}}var o=wp(t,n,e,0,null,!1,!1,"",bd);return e._reactRootContainer=o,e[Kt]=o.current,Os(e.nodeType===8?e.parentNode:e),Yr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=lo(l);a.call(u)}}var l=Fu(e,0,!1,null,null,!1,!1,"",bd);return e._reactRootContainer=l,e[Kt]=l.current,Os(e.nodeType===8?e.parentNode:e),Yr(function(){Io(t,l,r,n)}),l}function Mo(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=lo(o);a.call(l)}}Io(t,o,e,s)}else o=Bv(r,t,e,s,n);return lo(o)}Kh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=os(t.pendingLanes);r!==0&&(uu(t,r|1),Ze(t,ye()),!(ee&6)&&(Un=ye()+500,Sr()))}break;case 13:Yr(function(){var n=Jt(e,1);if(n!==null){var s=Ve();Ot(n,e,1,s)}}),Bu(e,1)}};cu=function(e){if(e.tag===13){var t=Jt(e,134217728);if(t!==null){var r=Ve();Ot(t,e,134217728,r)}Bu(e,134217728)}};Jh=function(e){if(e.tag===13){var t=yr(e),r=Jt(e,t);if(r!==null){var n=Ve();Ot(r,e,t,n)}Bu(e,t)}};Qh=function(){return re};Yh=function(e,t){var r=re;try{return re=e,t()}finally{re=r}};Qa=function(e,t,r){switch(t){case"input":if(Va(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=To(n);if(!s)throw Error(j(90));Nh(n),Va(n,s)}}}break;case"textarea":Ch(e,r);break;case"select":t=r.value,t!=null&&Sn(e,!!r.multiple,t,!1)}};Mh=Mu;Uh=Yr;var Vv={usingClientEntryPoint:!1,Events:[Hs,gn,To,$h,Dh,Mu]},ns={findFiberByHostInstance:Fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hv={bundleType:ns.bundleType,version:ns.version,rendererPackageName:ns.rendererPackageName,rendererConfig:ns.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fh(e),e===null?null:e.stateNode},findFiberByHostInstance:ns.findFiberByHostInstance||Fv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!di.isDisabled&&di.supportsFiber)try{ko=di.inject(Hv),Ut=di}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vv;ot.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hu(t))throw Error(j(200));return zv(e,t,null,r)};ot.createRoot=function(e,t){if(!Hu(e))throw Error(j(299));var r=!1,n="",s=_p;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Fu(e,1,!1,null,null,r,!1,n,s),e[Kt]=t.current,Os(e.nodeType===8?e.parentNode:e),new Vu(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=Fh(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return Yr(e)};ot.hydrate=function(e,t,r){if(!Do(t))throw Error(j(200));return Mo(null,e,t,!0,r)};ot.hydrateRoot=function(e,t,r){if(!Hu(e))throw Error(j(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=_p;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=wp(t,null,e,1,r??null,s,!1,i,o),e[Kt]=t.current,Os(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new $o(t)};ot.render=function(e,t,r){if(!Do(t))throw Error(j(200));return Mo(null,e,t,!1,r)};ot.unmountComponentAtNode=function(e){if(!Do(e))throw Error(j(40));return e._reactRootContainer?(Yr(function(){Mo(null,null,e,!1,function(){e._reactRootContainer=null,e[Kt]=null})}),!0):!1};ot.unstable_batchedUpdates=Mu;ot.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Do(r))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return Mo(e,t,r,!1,n)};ot.version="18.3.1-next-f1338f8080-20240426";function bp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bp)}catch(e){console.error(e)}}bp(),_h.exports=ot;var Wv=_h.exports,xd=Wv;Da.createRoot=xd.createRoot,Da.hydrateRoot=xd.hydrateRoot;const qv={postMessage:(e,t)=>{const r=JSON.stringify(e);connectWsApiIntegrator.postMessage(r)}},Gv={postMessage:(e,t)=>{window.chrome.webview.postMessage(e)}},Kv={postMessage:(e,t)=>{window.webkit.messageHandlers.webwindowinterop.postMessage(e)}},Jv={postMessage:(e,t)=>{const r=JSON.stringify(e);window.hybridWebViewHost.sendMessage(r)}},Qv=()=>crypto.randomUUID(),xp=()=>{const e=window;return!!(e&&e.chrome&&e.chrome.webview)},kp=()=>{const e=window;return!(!e||!("CefSharp"in e))},Sp=async()=>(window.connectWsApiIntegrator||await CefSharp.BindObjectAsync("connectWsApiIntegrator"),qv),Ep=()=>Gv,Yv=async e=>{let t;return t=e===window?kp()?await Sp():xp()?Ep():e:e,t},_s="Trimble.dispatcher.v1",Ii={},sr={};let Xv=1;function jp(e){const t=Tp();return sr[t]=e,()=>delete sr[t]}function kd(e,t,r,n,s=3e5){return new Promise((i,o)=>{const a=Tp(),l={scope:_s,type:"request",id:a,api:r,args:n};let u;s>0&&(u=setTimeout(()=>{delete Ii[a],o(new Error("dispatcher.ts | sendRequest(): Operation timed out."))},s)),Ii[a]=d=>{delete Ii[a],u&&clearTimeout(u),d.error?o(d.error):i(d.result)},e.postMessage(l,t)})}async function Zv(e){const t=e.origin==="null"?"*":e.origin,r=e.data;if(function(n){return wa(n)&&n.type==="event"}(r))for(const n in sr){if(!sr.hasOwnProperty(n))continue;const s=sr[n].event;s&&s(e.source,t,r.event,r.data)}else if(function(n){return wa(n)&&n.type==="request"}(r)){const n=await Yv(e.source);let s;for(const i in sr){if(!sr.hasOwnProperty(i))continue;const o=sr[i].request;if(o&&!s){const a=o(n,t,r.api,r.args);if(a!==void 0)try{s={scope:_s,type:"response",id:r.id,api:r.api,result:await a}}catch(l){s={scope:_s,type:"response",id:r.id,api:r.api,error:String(l)}}}}s||(s={scope:_s,type:"response",id:r.id,api:r.api,error:"Not supported"}),n.postMessage(s,t)}else if(function(n){return wa(n)&&n.type==="response"}(r)){const n=Ii[r.id];n&&n(r)}}function wa(e){return!!e&&e.scope===_s}function Tp(){return Xv++}const Vt={},_a=[],e0=new Promise(e=>{});let Ol;function t0(e,t,r=1e4){async function n(o,a){const l=await kd(o,a,".connect_api_client_v1",[],0);if(l&&typeof l=="object")return Wu(l,(u,d,h)=>{if(d===".api_function_v1"){const f=h?h+"."+String(u):String(u);return(...m)=>kd(o,a,f,m,r)}return d});throw new Error("Failed to connect")}function s(o){if(!o)return"*";try{return new URL(o).origin}catch{return"*"}}if(t&&(Ol=jp({event:(o,a,l,u)=>t(l,u)})),e===window)return Object.keys(Vt).length!==0?Promise.resolve(Vt):kp()?new Promise(async o=>{const a=await Sp();o(await n(a,"*"))}):xp()?n(Ep(),"*"):function(){const o=window;return o&&o.webkit&&o.webkit.messageHandlers&&o.webkit.messageHandlers.webwindowinterop}()?n(Kv,"*"):function(){const o=window;return o&&o.hybridWebViewHost}()?n(Jv,"*"):Promise.resolve(Vt);if((i=e)&&typeof i.postMessage=="function")return n(e,"*");if((o=>o&&typeof o.contentWindow=="object")(e)){const o=[];return o.push(new Promise((a,l)=>{const u=async()=>{e.removeEventListener("load",u),e.contentWindow?a(await n(e.contentWindow,s(e.src))):l(new Error("Cannot access the target content window"))};e.addEventListener("load",u)})),e.contentWindow&&o.push(n(e.contentWindow,s(e.src))),Promise.race(o)}return Promise.reject(new Error("Target must be a window or an iframe"));var i}function Wu(e,t,r){const n={};for(const s in e){const i=e[s];if((r!==void 0||s!=="onConnect"&&s!=="onRequest")&&i)if(typeof i=="object"){const o=r&&r+"."+String(s)||String(s);n[s]=Wu(i,t,o)}else n[s]=t(s,e[s],r)}return n}var Sd,Ed,jd,Td;jp({request:(e,t,r,n)=>{if(r===".connect_api_client_v1")return e0.then(()=>{let i=_a.find(a=>a.dispatcher===e);if(i)i.origin=t;else{if(!e)return;i={dispatcher:e,origin:t,identifier:Qv()},_a.push(i)}var o;return(o=Vt)&&typeof o.onConnect=="function"&&Vt.onConnect(i),Wu(Vt,(a,l)=>typeof l=="function"?".api_function_v1":l)});{const i=_a.find(o=>o.dispatcher===e&&o.origin===t);if(i){if((s=Vt)&&typeof s.onRequest=="function"){const a=Vt.onRequest(i,r,n);if(a!==void 0)return a}const o=function(a,l){const u=l.split(".");let d=a;for(const h of u)d=typeof d=="object"&&d&&h in d?d[h]:void 0;return d}(Vt,r);if(typeof o=="function"){const a=o.apply(void 0,n);return a===void 0?Promise.resolve(a):a}return Promise.resolve(o)}return}var s}}),function(e){e[e.LengthMeasure=0]="LengthMeasure",e[e.AreaMeasure=1]="AreaMeasure",e[e.VolumeMeasure=2]="VolumeMeasure",e[e.MassMeasure=3]="MassMeasure",e[e.AngleMeasure=4]="AngleMeasure",e[e.StringValue=5]="StringValue",e[e.IntValue=6]="IntValue",e[e.DoubleValue=7]="DoubleValue",e[e.DateTime=8]="DateTime",e[e.Logical=9]="Logical",e[e.Boolean=10]="Boolean"}(Sd||(Sd={})),function(e){e[e.Selected=1]="Selected",e[e.Hidden=4]="Hidden",e[e.SelectedHidden=5]="SelectedHidden",e[e.Visible=6]="Visible",e[e.SelectedVisible=7]="SelectedVisible",e[e.Highlighted=8]="Highlighted"}(Ed||(Ed={})),function(e){e.Project="project",e.Viewer="3dviewer"}(jd||(jd={})),function(e){e.Models="models",e.Layers="layers",e.Attachments="attachments",e.ToDos="todos",e.Views="views",e.ClashSets="clashes",e.Organizer="organizer",e.DataTable="contentbrowser",e.Topics="topics",e.LiveCollaboration="livecollaboration",e.StatusSharing="statussharing",e.Connect2Fab="connect2fab",e.QrMarkers="qrmarkers",e.RealityCapture="realitycapture"}(Td||(Td={}));var Nd,Od,Cd;function r0(e,t,r){return window.removeEventListener("message",Pd),window.addEventListener("message",Pd),Ol&&Ol(),t0(e,t,r)}function Pd(e){return Zv(e)}(function(e){e.LookAround="look_around",e.Pan="pan",e.Panorama="panorama",e.Rotate="rotate",e.Walk="walk"})(Nd||(Nd={})),function(e){e[e.Guid=0]="Guid",e[e.String=1]="String",e[e.SpatialHash=2]="SpatialHash",e[e.DwgHandle=3]="DwgHandle",e[e.None=4]="None"}(Od||(Od={})),function(e){e[e.SORT_NONE=0]="SORT_NONE",e[e.SORT_UP=1]="SORT_UP",e[e.SORT_DOWN=-1]="SORT_DOWN"}(Cd||(Cd={}));var n0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const s0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i0=(e,t)=>{const r=T.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...l},u)=>T.createElement("svg",{ref:u,...n0,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${s0(e)}`,...l},[...t.map(([d,h])=>T.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return r.displayName=`${e}`,r};var X=i0;const o0=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),a0=X("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l0=X("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ad=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),u0=X("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),c0=X("Box",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),d0=X("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),Np=X("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),h0=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),f0=X("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),p0=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Cl=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Rd=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),g0=X("Forklift",[["path",{d:"M12 12H5a2 2 0 0 0-2 2v5",key:"7zsz91"}],["circle",{cx:"13",cy:"19",r:"2",key:"wjnkru"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M8 19h3m5-17v17h6M6 12V7c0-1.1.9-2 2-2h3l5 5",key:"13bk1p"}]]),ba=X("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),m0=X("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),y0=X("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),v0=X("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),w0=X("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),_0=X("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]),uo=X("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),b0=X("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),qu=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Gu=X("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),xa=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),x0=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),k0=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Id=X("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),S0=X("TowerControl",[["path",{d:"M18.2 12.27 20 6H4l1.8 6.27a1 1 0 0 0 .95.73h10.5a1 1 0 0 0 .96-.73Z",key:"1pledb"}],["path",{d:"M8 13v9",key:"hmv0ci"}],["path",{d:"M16 22v-9",key:"ylnf1u"}],["path",{d:"m9 6 1 7",key:"dpdgam"}],["path",{d:"m15 6-1 7",key:"ls7zgu"}],["path",{d:"M12 6V2",key:"1pj48d"}],["path",{d:"M13 2h-2",key:"mj6ths"}]]),Op=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ur=X("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),xn=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ka=X("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),wr=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Sa="Silver Vat",$d="123 ABC",E0=["phapev","esmaspev","teisipev","kolmapev","neljapev","reede","laupev"],j0=["Jaanuar","Veebruar","Mrts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],Pl=["Kraana","Upitaja","Ksitsi","MUU"],hi={Kraana:c.jsx(S0,{size:16}),Upitaja:c.jsx(g0,{size:16}),Ksitsi:c.jsx(m0,{size:16}),MUU:c.jsx(y0,{size:16})},Al={Kraana:"Kraana",Upitaja:"Teleskooplaadur (Upitaja)",Ksitsi:"Ksitsi (Muskel)",MUU:"Muu"},zt=e=>{if(!e)return"";const[t,r,n]=e.split("-");return`${n}.${r}.${t}`},T0=e=>{const[t,r,n]=e.split("-").map(Number),s=new Date(t,r-1,n),i=E0[s.getDay()];return`${zt(e)} - ${i}`},N0=(e,t)=>`${j0[t]} ${e}`,co=()=>new Date().toISOString().split("T")[0],O0=(e,t)=>{if(!e)return"";const[r,n]=e.split(":").map(Number),s=new Date;return s.setHours(r+t,n),s.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})},Ea=({duplicates:e,onConfirm:t,getPartLabel:r,mode:n})=>{const[s,i]=T.useState(!1),o=20,a=e.slice(0,o),l=e.length-o;return c.jsxs("div",{className:"text-xs",children:[c.jsxs("p",{className:"font-bold mb-1 flex items-center gap-1",children:[c.jsx(a0,{size:12})," Jrgmised detailid on juba ",n==="installation"?"paigaldatud":n==="delivery"?"tarnitud":"pingutatud",":"]}),c.jsxs("ul",{className:"list-disc pl-4 space-y-0.5 mb-3 text-slate-600 max-h-32 overflow-y-auto",children:[a.map(u=>{let d="";return n==="installation"&&u.installation&&(d=`${zt(u.installation.date)} (${u.installation.installers.join(", ")})`),n==="delivery"&&u.delivery&&(d=`${zt(u.delivery.date)} (${u.delivery.vehicle})`),n==="bolts"&&u.bolting&&(d=`${zt(u.bolting.date)} (${u.bolting.installer})`),c.jsxs("li",{children:[c.jsx("span",{className:"font-semibold",children:r(u)}),": ",d]},u.id)}),l>0&&c.jsxs("li",{className:"text-gray-400 italic font-medium pt-1 list-none -ml-4 pl-4 border-t border-gray-100 mt-1",children:["... ja ",l," detaili veel."]})]}),c.jsx("div",{className:"bg-orange-100/50 p-2 rounded border border-orange-200 mb-2",children:c.jsxs("label",{className:"flex items-start gap-2 cursor-pointer select-none",children:[c.jsx("input",{type:"checkbox",checked:s,onChange:u=>i(u.target.checked),className:"mt-0.5 rounded border-orange-400 text-orange-600 focus:ring-orange-500"}),c.jsx("span",{className:"font-medium text-orange-800 leading-tight",children:"Olen teadlik, et olemasolevad andmed kirjutatakse le."})]})}),c.jsxs("button",{type:"button",onClick:t,disabled:!s,className:`w-full px-3 py-2 rounded-md text-xs font-bold flex items-center justify-center gap-2 transition-colors shadow-sm ${s?"bg-orange-500 hover:bg-orange-600 text-white cursor-pointer":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[c.jsx(Gu,{size:12})," Jah, kirjuta le"]})]})},Rl=({label:e,icon:t,values:r,onChange:n,options:s,placeholder:i})=>{const[o,a]=T.useState(""),[l,u]=T.useState(!1),d=T.useRef(null),h=T.useRef(null);T.useEffect(()=>{function _(p){d.current&&!d.current.contains(p.target)&&u(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const f=_=>{var g;const p=_.trim();p&&!r.includes(p)&&n([...r,p]),a(""),(g=h.current)==null||g.focus()},m=_=>{n(r.filter(p=>p!==_))},v=_=>{_.key==="Enter"?(_.preventDefault(),f(o)):_.key==="Backspace"&&!o&&r.length>0&&m(r[r.length-1])},w=s.filter(_=>_.toLowerCase().includes(o.toLowerCase())&&!r.includes(_));return c.jsxs("div",{className:"",ref:d,children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:e}),c.jsxs("div",{className:"relative min-h-[42px] bg-white border border-gray-300 rounded-md focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 flex flex-wrap items-center gap-1.5 p-1.5 cursor-text transition-all",onClick:()=>{var _;return(_=h.current)==null?void 0:_.focus()},children:[c.jsx("div",{className:"text-gray-400 pointer-events-none pl-1",children:t}),r.map(_=>c.jsxs("span",{className:"bg-blue-50 text-blue-700 text-xs font-medium px-2 py-1 rounded-md flex items-center gap-1 border border-blue-100 shadow-sm animate-in zoom-in-95 duration-200",children:[_,c.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),m(_)},className:"hover:text-blue-900 focus:outline-none p-0.5 hover:bg-blue-100 rounded-full",children:c.jsx(wr,{size:12})})]},_)),c.jsx("input",{ref:h,type:"text",value:o,onChange:_=>{a(_.target.value),u(!0)},onFocus:()=>u(!0),onKeyDown:v,placeholder:r.length===0?i:"",className:"bg-transparent outline-none flex-1 min-w-[80px] text-sm py-1"}),o&&c.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),f(o)},className:"bg-blue-600 hover:bg-blue-700 text-white rounded p-1 transition-colors",title:"Lisa nimekirja",children:c.jsx(qu,{size:14})})]}),l&&w.length>0&&c.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-xl max-h-48 overflow-y-auto animate-in fade-in slide-in-from-top-1",children:[c.jsx("div",{className:"px-3 py-1.5 text-[10px] font-bold text-gray-400 uppercase bg-gray-50 border-b border-gray-100",children:"Viimati kasutatud"}),w.map((_,p)=>c.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 text-gray-700 border-b border-gray-50 last:border-0 transition-colors",onClick:()=>{f(_),u(!1)},children:_},p))]})]})},kn=({label:e,icon:t,value:r,onChange:n,options:s,placeholder:i})=>{const[o,a]=T.useState(!1),l=T.useRef(null);T.useEffect(()=>{function d(h){l.current&&!l.current.contains(h.target)&&a(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const u=s.filter(d=>d.toLowerCase().includes(r.toLowerCase())&&d!==r);return c.jsxs("div",{className:"",ref:l,children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:e}),c.jsxs("div",{className:"relative flex items-center",children:[c.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:t}),c.jsx("input",{type:"text",value:r,onChange:d=>{n(d.target.value),a(!0)},onFocus:()=>a(!0),placeholder:i,className:"w-full pl-9 pr-8 py-2 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm transition-all shadow-sm"}),r&&!s.includes(r)&&c.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:c.jsx(qu,{size:14,className:"text-blue-500 animate-pulse"})})]}),o&&c.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-xl max-h-48 overflow-y-auto animate-in fade-in slide-in-from-top-1",children:u.length>0?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"px-3 py-1.5 text-[10px] font-bold text-gray-400 uppercase bg-gray-50 border-b border-gray-100",children:"Soovitused"}),u.map((d,h)=>c.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 text-gray-700 border-b border-gray-50 last:border-0 transition-colors",onClick:()=>{n(d),a(!1)},children:d},h))]}):r&&c.jsxs("div",{className:"px-3 py-2 text-sm text-blue-600 bg-blue-50 font-medium",children:['Lisa uus: "',r,'"']})})]})},ja=({label:e,value:t,total:r,colorClass:n,icon:s,onClick:i})=>{const o=r>0?Math.round(t/r*100):0;return c.jsxs("div",{className:`mb-3 last:mb-0 ${i?"cursor-pointer hover:opacity-80 transition-opacity":""}`,onClick:i,title:i?"Kliki, et nha mudelis":void 0,children:[c.jsxs("div",{className:"flex justify-between items-center text-xs mb-1",children:[c.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600 font-medium",children:[s&&c.jsx(s,{size:12}),e]}),c.jsxs("div",{className:"font-bold text-gray-800",children:[t," / ",r," ",c.jsxs("span",{className:"text-gray-400 font-normal ml-1",children:["(",o,"%)"]})]})]}),c.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2 overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${n}`,style:{width:`${o}%`}})})]})},Dd=({data:e,colorClass:t,onBarClick:r})=>{const n=Math.max(...e.map(s=>s.value),1);return c.jsx("div",{className:"flex items-end h-24 gap-1.5 mt-2",children:e.map((s,i)=>c.jsxs("div",{onClick:()=>r&&r(s.label),className:`flex-1 flex flex-col justify-end group relative ${r?"cursor-pointer":""}`,children:[c.jsx("div",{className:`w-full rounded-t-sm min-h-[4px] transition-all duration-500 hover:opacity-80 ${t}`,style:{height:`${s.value/n*100}%`}}),c.jsxs("div",{className:"text-[9px] text-gray-400 text-center mt-1 truncate w-full",title:s.label,children:[zt(s.label).split(".")[0],".",zt(s.label).split(".")[1]]}),c.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-2 py-1 bg-gray-800 text-white text-[10px] rounded opacity-0 group-hover:opacity-100 pointer-events-none z-10 whitespace-nowrap",children:[zt(s.label),": ",s.value," tk",r&&c.jsx("div",{className:"text-[9px] opacity-70 mt-0.5",children:"Kliki, et valida"})]})]},i))})},Ta=({rank:e,name:t,value:r,max:n,colorClass:s,onClick:i})=>c.jsxs("div",{onClick:i,className:`flex items-center gap-2 text-xs py-1.5 border-b border-gray-50 last:border-0 ${i?"cursor-pointer hover:bg-gray-50 transition-colors":""}`,title:i?"Kliki, et valida mudelis":void 0,children:[c.jsx("div",{className:`w-5 h-5 flex items-center justify-center rounded-full text-[10px] font-bold ${e<=3?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-500"}`,children:e}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between mb-0.5",children:[c.jsx("span",{className:"truncate font-medium text-gray-700",children:t}),c.jsx("span",{className:"font-bold text-gray-800",children:r})]}),c.jsx("div",{className:"w-full bg-gray-100 h-1 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full ${s}`,style:{width:`${r/n*100}%`}})})]})]}),C0=({part:e,onClose:t})=>c.jsxs("div",{className:"absolute inset-0 z-[70] bg-white flex flex-col animate-in slide-in-from-right duration-200",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 bg-gray-50 flex-none",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-bold text-gray-800",children:e.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[e.castUnitPos," | ",e.guid]})]}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-200 rounded text-gray-500",children:c.jsx(wr,{size:18})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-5 space-y-3",children:e.logs&&e.logs.length>0?[...e.logs].reverse().map((r,n)=>{const s=new Date(r.timestamp);return c.jsxs("div",{className:"flex gap-3 text-xs",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1"}),c.jsx("div",{className:"w-px h-full bg-gray-200 my-0.5"})]}),c.jsxs("div",{className:"pb-2",children:[c.jsx("p",{className:"font-semibold text-gray-700",children:r.action}),c.jsxs("div",{className:"flex gap-2 text-gray-400 text-[10px] mt-0.5",children:[c.jsxs("span",{children:[s.toLocaleDateString("et-EE")," ",s.toLocaleTimeString("et-EE",{hour:"2-digit",minute:"2-digit"})]}),c.jsx("span",{children:""}),c.jsx("span",{children:r.user})]})]})]},n)}):c.jsx("div",{className:"text-center text-gray-400 italic text-xs py-4",children:"Ajalugu puudub"})})]}),P0=({mode:e,parts:t,suggestions:r,selectedParts:n,onSave:s,onRemoveFromGroup:i,onClose:o,getPartLabel:a,onSetSelection:l})=>{const u=e==="installation"?t[0].installation:e==="delivery"?t[0].delivery:t[0].bolting,[d,h]=T.useState(null),[f,m]=T.useState((u==null?void 0:u.date)||co()),[v,w]=T.useState((u==null?void 0:u.installers)||(u!=null&&u.installer?[u.installer]:[])||[]),[_,p]=T.useState((u==null?void 0:u.method)||"Kraana"),[g,y]=T.useState((u==null?void 0:u.vehicle)||""),[b,S]=T.useState((u==null?void 0:u.arrivalTime)||"09:00"),[E,N]=T.useState((u==null?void 0:u.unloadingTime)||"10:00"),[O,J]=T.useState(new Set),B=new Set(t.map(k=>k.id)),se=n.filter(k=>!B.has(k.id)),[ne,vt]=T.useState(new Set),lt=v[0]||"",jr=k=>w([k]),[ut,Pt]=T.useState(""),[R,H]=T.useState([]),[q,te]=T.useState(""),[U,L]=T.useState(""),[P,D]=T.useState(""),[Z,Se]=T.useState(""),[ct,wt]=T.useState("");T.useEffect(()=>{if(d){const k=e==="installation"?d.installation:e==="delivery"?d.delivery:d.bolting;Pt((k==null?void 0:k.date)||co()),H((k==null?void 0:k.installers)||(k!=null&&k.installer?[k.installer]:[])||[]),te((k==null?void 0:k.method)||"Kraana"),L((k==null?void 0:k.vehicle)||""),D((k==null?void 0:k.installer)||""),Se((k==null?void 0:k.arrivalTime)||"09:00"),wt((k==null?void 0:k.unloadingTime)||"10:00"),l([d.id])}},[d,e,l]);const et=()=>{O.size>0&&i(Array.from(O));const k=[...t.filter(Te=>!O.has(Te.id)).map(Te=>Te.id),...Array.from(ne)];if(k.length===0){o();return}let G={date:f};e==="installation"?G={...G,installerNames:v,method:_}:e==="delivery"?G={...G,vehicle:g,arrivalTime:b,unloadingTime:E}:e==="bolts"&&(G={...G,installerName:lt}),s(k,G)},Zt=()=>{if(!d)return;let k={date:ut};e==="installation"?k={...k,installerNames:R,method:q}:e==="delivery"?k={...k,vehicle:U,arrivalTime:Z,unloadingTime:ct}:e==="bolts"&&(k={...k,installerName:P}),s([d.id],k),h(null)},Gn=k=>{const G=new Set(O);G.has(k)?G.delete(k):G.add(k),J(G)},Tr=k=>{const G=new Set(ne);G.has(k)?G.delete(k):G.add(k),vt(G)};return d?c.jsxs("div",{className:"absolute inset-0 z-[60] bg-white flex flex-col animate-in slide-in-from-right duration-200",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 bg-gray-50 flex-none",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>h(null),className:"p-1 hover:bg-gray-200 rounded text-gray-500",children:c.jsx(Ad,{size:16})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-800",children:["Muuda detaili: ",a(d)]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Muudad ainult hte detaili."})]})]}),c.jsx("button",{onClick:o,children:c.jsx(wr,{size:16,className:"text-gray-400 hover:text-gray-600"})})]}),c.jsx("div",{className:"p-5 flex-1 overflow-y-auto",children:c.jsxs("div",{className:"space-y-4 bg-white rounded-md",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Kuupev"}),c.jsx("input",{type:"date",value:ut,onChange:k=>Pt(k.target.value),className:"w-full px-2 py-1.5 bg-white border border-gray-300 rounded-md text-sm"})]}),e==="installation"&&c.jsxs(c.Fragment,{children:[c.jsx(Rl,{label:"Paigaldajad",icon:c.jsx(xn,{size:14}),values:R,onChange:H,options:r.installers,placeholder:"Lisa nimi..."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Paigaldus Viis"}),c.jsx("select",{value:q,onChange:k=>te(k.target.value),className:"w-full px-2 py-1.5 bg-white border border-gray-300 rounded-md text-sm",children:Pl.map(k=>c.jsx("option",{value:k,children:Al[k]},k))})]})]}),e==="delivery"&&c.jsxs(c.Fragment,{children:[c.jsx(kn,{label:"Auto Nr",icon:c.jsx(Ur,{size:14}),value:U,onChange:L,options:r.vehicles}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Saabumine"}),c.jsx("input",{type:"time",value:Z,onChange:k=>Se(k.target.value),className:"w-full px-2 py-1.5 bg-white border border-gray-300 rounded-md text-sm"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Lpp"}),c.jsx("input",{type:"time",value:ct,onChange:k=>wt(k.target.value),className:"w-full px-2 py-1.5 bg-white border border-gray-300 rounded-md text-sm"})]})]})]}),e==="bolts"&&c.jsx(kn,{label:"Pingutaja",icon:c.jsx(xn,{size:14}),value:P,onChange:D,options:r.installers})]})}),c.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:c.jsx("button",{onClick:Zt,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-semibold shadow-sm transition-colors",children:"Salvesta muudatus"})})]}):c.jsxs("div",{className:"absolute inset-0 z-[60] bg-white flex flex-col animate-in slide-in-from-right duration-200",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 bg-gray-50 flex-none",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:o,className:"p-1 hover:bg-gray-200 rounded text-gray-500",title:"Thista",children:c.jsx(Ad,{size:16})}),c.jsxs("h3",{className:"text-sm font-bold text-gray-800 flex items-center gap-2",children:[c.jsx(uo,{size:14,className:"text-blue-600"})," Muuda grupi andmeid"]})]}),c.jsx("button",{onClick:o,children:c.jsx(wr,{size:16,className:"text-gray-400 hover:text-gray-600"})})]}),c.jsxs("div",{className:"overflow-y-auto flex-1 p-5 space-y-5",children:[c.jsxs("div",{className:"space-y-3 bg-gray-50 p-3 rounded-md border border-gray-100",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Kuupev"}),c.jsx("input",{type:"date",value:f,onChange:k=>m(k.target.value),className:"w-full px-2 py-1.5 bg-white border border-gray-300 rounded-md text-sm"})]}),e==="installation"&&c.jsxs(c.Fragment,{children:[c.jsx(Rl,{label:"Paigaldajad",icon:c.jsx(xn,{size:14}),values:v,onChange:w,options:r.installers,placeholder:"Lisa nimi..."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Paigaldus Viis"}),c.jsx("select",{value:_,onChange:k=>p(k.target.value),className:"w-full px-2 py-1.5 bg-white border border-gray-300 rounded-md text-sm",children:Pl.map(k=>c.jsx("option",{value:k,children:Al[k]},k))})]})]}),e==="delivery"&&c.jsxs(c.Fragment,{children:[c.jsx(kn,{label:"Auto Nr",icon:c.jsx(Ur,{size:14}),value:g,onChange:y,options:r.vehicles}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Saabumine"}),c.jsx("input",{type:"time",value:b,onChange:k=>S(k.target.value),className:"w-full px-2 py-1.5 bg-white border border-gray-300 rounded-md text-sm"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Lpp"}),c.jsx("input",{type:"time",value:E,onChange:k=>N(k.target.value),className:"w-full px-2 py-1.5 bg-white border border-gray-300 rounded-md text-sm"})]})]})]}),e==="bolts"&&c.jsx(kn,{label:"Pingutaja",icon:c.jsx(xn,{size:14}),value:lt,onChange:jr,options:r.installers})]}),c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xs font-bold text-gray-600 mb-2 uppercase border-b border-gray-100 pb-1",children:["Detailid (",t.length-O.size+ne.size,")"]}),c.jsxs("div",{className:"space-y-1",children:[t.map(k=>{const G=O.has(k.id);return c.jsxs("div",{className:`flex items-center justify-between text-xs p-1.5 rounded ${G?"bg-red-50 opacity-60":"hover:bg-blue-50/50"}`,children:[c.jsx("span",{onClick:()=>l([k.id]),className:`font-medium cursor-pointer ${G?"line-through text-gray-400":"text-gray-700 hover:text-blue-600 hover:underline"}`,title:"Kliki, et nha mudelis",children:a(k)}),c.jsxs("div",{className:"flex gap-1",children:[!G&&c.jsx("button",{onClick:()=>h(k),className:"p-1 rounded text-gray-300 hover:text-blue-600 hover:bg-blue-50",title:"Muuda ainult seda detaili",children:c.jsx(uo,{size:12})}),c.jsx("button",{onClick:()=>Gn(k.id),className:`p-1 rounded transition-colors ${G?"text-gray-500 hover:bg-gray-200":"text-gray-300 hover:text-red-500 hover:bg-red-50"}`,title:G?"Taasta":"Eemalda grupist",children:G?c.jsx(Gu,{size:12}):c.jsx(Op,{size:12})})]})]},k.id)}),se.length>0&&c.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[c.jsx("div",{className:"text-[10px] font-bold text-blue-500 mb-1 uppercase",children:"Lisa hetkel valitud detailid"}),se.map(k=>{const G=ne.has(k.id);return c.jsxs("div",{className:`flex items-center justify-between text-xs p-1.5 rounded border border-transparent ${G?"bg-blue-50 border-blue-100":"hover:bg-gray-50"}`,children:[c.jsx("span",{className:"font-medium text-gray-700",children:a(k)}),c.jsx("button",{onClick:()=>Tr(k.id),className:`p-1 rounded transition-colors ${G?"text-blue-600":"text-gray-300 hover:text-blue-500"}`,children:G?c.jsx(h0,{size:14}):c.jsx(qu,{size:14})})]},k.id)})]})]})]})]}),c.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:c.jsx("button",{onClick:et,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-semibold shadow-sm transition-colors",children:"Salvesta muudatused"})})]})},A0=({allParts:e,onClose:t})=>{const r=new Date,[n,s]=T.useState(new Date(r.getFullYear(),r.getMonth(),1)),i=T.useMemo(()=>{const u=new Date(n.getFullYear(),n.getMonth(),1).getDay()||7,d=new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),h=u-1,f=[];for(let m=0;m<h;m++)f.push(null);for(let m=1;m<=d;m++)f.push(new Date(n.getFullYear(),n.getMonth(),m));return f},[n]),o=T.useMemo(()=>{const u={};return e.forEach(d=>{if(d.installation){const h=d.installation.date;u[h]||(u[h]={install:0,delivery:0,bolts:0}),u[h].install++}if(d.delivery){const h=d.delivery.date;u[h]||(u[h]={install:0,delivery:0,bolts:0}),u[h].delivery++}if(d.bolting){const h=d.bolting.date;u[h]||(u[h]={install:0,delivery:0,bolts:0}),u[h].bolts++}}),u},[e]),a=()=>s(new Date(n.getFullYear(),n.getMonth()-1,1)),l=()=>s(new Date(n.getFullYear(),n.getMonth()+1,1));return c.jsxs("div",{className:"absolute inset-0 z-[60] bg-white flex flex-col p-4 animate-in slide-in-from-right duration-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[c.jsxs("h2",{className:"text-lg font-bold text-gray-800 capitalize flex items-center gap-2",children:[c.jsx(Np,{className:"text-blue-600"}),n.toLocaleString("et-EE",{month:"long",year:"numeric"})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded",children:c.jsx(Cl,{className:"rotate-180",size:20})}),c.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-100 rounded",children:c.jsx(Cl,{size:20})}),c.jsx("div",{className:"w-px h-6 bg-gray-200 mx-1"}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-red-50 text-gray-400 hover:text-red-500 rounded",children:c.jsx(wr,{size:20})})]})]}),c.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:["E","T","K","N","R","L","P"].map(u=>c.jsx("div",{className:"text-xs font-bold text-gray-400",children:u},u))}),c.jsx("div",{className:"grid grid-cols-7 gap-1 auto-rows-fr",children:i.map((u,d)=>{if(!u)return c.jsx("div",{className:"aspect-square"},`empty-${d}`);const h=u.toISOString().split("T")[0],f=o[h];return c.jsxs("div",{className:"aspect-square border border-gray-100 rounded-lg flex flex-col items-center justify-center relative group hover:border-blue-300 transition-colors bg-gray-50/50",children:[c.jsx("span",{className:`text-xs font-medium ${f?"text-gray-800":"text-gray-400"}`,children:u.getDate()}),c.jsxs("div",{className:"flex gap-0.5 mt-1",children:[(f==null?void 0:f.install)>0&&c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500",title:`${f.install} paigaldust`}),(f==null?void 0:f.delivery)>0&&c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500",title:`${f.delivery} tarnet`}),(f==null?void 0:f.bolts)>0&&c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500",title:`${f.bolts} polti`})]}),f&&c.jsxs("div",{className:"absolute bottom-full mb-2 z-10 bg-gray-800 text-white text-[10px] p-2 rounded shadow-lg opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap",children:[f.install>0&&c.jsxs("div",{children:["Paigaldatud: ",f.install]}),f.delivery>0&&c.jsxs("div",{children:["Tarnitud: ",f.delivery]}),f.bolts>0&&c.jsxs("div",{children:["Poldid: ",f.bolts]})]})]},h)})})]})},R0=({selectedParts:e,allParts:t,mode:r,assemblySelectionEnabled:n,onModeChange:s,onSaveInstallation:i,onSaveDelivery:o,onSaveBolting:a,onClearSelection:l,onRemovePart:u,onSetSelection:d,onBulkUpdate:h,onDeleteData:f,onZoomToGuid:m})=>{const[v,w]=T.useState([Sa]),[_,p]=T.useState($d),[g,y]=T.useState(Sa),[b,S]=T.useState(co()),[E,N]=T.useState(!1),[O,J]=T.useState(""),[B,se]=T.useState(!1),[ne,vt]=T.useState("Kraana"),[lt,jr]=T.useState(""),[ut,Pt]=T.useState("09:00"),[R,H]=T.useState("10:00"),[q,te]=T.useState(null),[U,L]=T.useState(new Set),[P,D]=T.useState(null),[Z,Se]=T.useState(null),[ct,wt]=T.useState(null),[et,Zt]=T.useState(null),[Gn,Tr]=T.useState(!1),[k,G]=T.useState(!1),[Te,_t]=T.useState("castUnitPos"),[At,Nr]=T.useState("castUnitPos"),[Or,K]=T.useState("castUnitPos"),[he,Q]=T.useState(50);T.useEffect(()=>{te(null),d([]),D(null),S(co())},[r]),T.useEffect(()=>{D(null),Q(50)},[e]);const Ne=x=>{let C=Te;switch(r==="delivery"&&(C=At),r==="bolts"&&(C=Or),C){case"guid":return x.guid;case"castUnitPos":return x.castUnitPos||x.name;case"name":return x.name;default:return x.name}},ie=T.useMemo(()=>r==="installation"||r==="delivery"?!n:r==="bolts"?n:!1,[r,n]),im=x=>{Pt(x);const C=O0(x,1);H(C)},Ks=T.useMemo(()=>{const x=new Set,C=new Set;return t.forEach(z=>{var A,F,W;(A=z.installation)!=null&&A.installers&&z.installation.installers.forEach(qe=>x.add(qe)),(F=z.bolting)!=null&&F.installer&&x.add(z.bolting.installer),(W=z.delivery)!=null&&W.vehicle&&C.add(z.delivery.vehicle)}),x.add(Sa),C.add($d),{installers:Array.from(x).sort(),vehicles:Array.from(C).sort()}},[t]),be=T.useMemo(()=>{const x=t.length;let C=0,z=0,A=0;const F={},W={},qe={},dt={},Oe={};t.forEach($e=>{$e.installation&&(C++,F[$e.installation.date]=(F[$e.installation.date]||0)+1,$e.installation.installers.forEach(Rt=>{W[Rt]=(W[Rt]||0)+1})),$e.delivery&&(z++,qe[$e.delivery.date]=(qe[$e.delivery.date]||0)+1,dt[$e.delivery.vehicle]=(dt[$e.delivery.vehicle]||0)+1),$e.bolting&&(A++,Oe[$e.bolting.installer]=(Oe[$e.bolting.installer]||0)+1)});const Kn=$e=>Object.entries($e).map(([Rt,Cr])=>({label:Rt,value:Cr})).sort((Rt,Cr)=>Cr.value-Rt.value),en=$e=>Object.entries($e).map(([Rt,Cr])=>({label:Rt,value:Cr})).sort((Rt,Cr)=>Rt.label.localeCompare(Cr.label)),Jn=en(F).slice(-7),vm=en(qe).slice(-7);return{total:x,counts:{installed:C,delivered:z,bolted:A},topInstallers:Kn(W).slice(0,5),topVehicles:Kn(dt).slice(0,5),topBolters:Kn(Oe).slice(0,5),installActivity:Jn,deliveryActivity:vm}},[t]),Ho=T.useMemo(()=>{const x={};t.forEach(A=>{let F="";if(r==="installation"&&A.installation&&(F=A.installation.date),r==="delivery"&&A.delivery&&(F=A.delivery.date),r==="bolts"&&A.bolting&&(F=A.bolting.date),F&&(x[F]||(x[F]={parts:[],deliveryGroups:{}}),x[F].parts.push(A),r==="delivery"&&A.delivery)){const W=A.delivery.vehicle||"Mramata";x[F].deliveryGroups[W]||(x[F].deliveryGroups[W]=[]),x[F].deliveryGroups[W].push(A)}});const C={};return Object.keys(x).forEach(A=>{const{parts:F,deliveryGroups:W}=x[A],[qe,dt]=A.split("-").map(Number),Oe=`${qe}-${dt.toString().padStart(2,"0")}`;C[Oe]||(C[Oe]={monthLabel:N0(qe,dt-1),dates:[]});const Kn=Object.entries(W).map(([en,Jn])=>({vehicle:en,parts:Jn})).sort((en,Jn)=>en.vehicle.localeCompare(Jn.vehicle));C[Oe].dates.push({iso:A,label:T0(A),parts:F,deliveryGroups:Kn})}),Object.keys(C).sort((A,F)=>F.localeCompare(A)).map(A=>(C[A].dates.sort((F,W)=>W.iso.localeCompare(F.iso)),{key:A,...C[A]}))},[t,r]),lc=()=>{let x=ne;if(ne==="MUU"){if(!lt.trim())return;x=lt.trim()}i({installerNames:v,date:b,method:x}),D(null)},uc=()=>{o({vehicle:_,date:b,arrivalTime:ut,unloadingTime:R}),D(null)},cc=()=>{a({installerName:g,date:b}),D(null)},dc=(x,C)=>{x.stopPropagation(),Zt({parts:C})},om=(x,C)=>{h(x,r,C),Zt(null)},am=x=>{f(x,r)},lm=x=>{if(x.preventDefault(),ie||e.length===0)return;if(v.length===0){D(c.jsx("div",{className:"text-xs font-medium",children:"Vali vhemalt ks paigaldaja."}));return}if(ne==="MUU"&&!lt.trim()){D(c.jsx("div",{className:"text-xs font-medium",children:"Palun tpsusta muu paigaldusviis."}));return}const C=e.filter(z=>z.installation);if(C.length>0){D(c.jsx(Ea,{duplicates:C,onConfirm:lc,getPartLabel:Ne,mode:"installation"}));return}lc()},um=x=>{if(x.preventDefault(),ie||e.length===0)return;if(R<ut){D(c.jsx("div",{className:"text-xs font-medium",children:"Mahalaadimise lpp ei tohi olla enne saabumist."}));return}const C=e.filter(z=>z.delivery);if(C.length>0){D(c.jsx(Ea,{duplicates:C,onConfirm:uc,getPartLabel:Ne,mode:"delivery"}));return}uc()},cm=x=>{if(x.preventDefault(),ie||e.length===0)return;if(!g){D(c.jsx("div",{className:"text-xs font-medium",children:"Vali pingutaja nimi."}));return}const C=e.filter(z=>z.bolting);if(C.length>0){D(c.jsx(Ea,{duplicates:C,onConfirm:cc,getPartLabel:Ne,mode:"bolts"}));return}cc()},Wo=(x,C)=>{x.stopPropagation();const z=new Set(e.map(A=>A.id));if(new Set(C),x.ctrlKey||x.metaKey)C.every(F=>z.has(F))?C.forEach(F=>z.delete(F)):C.forEach(F=>z.add(F)),d(Array.from(z));else if(x.shiftKey)C.forEach(A=>z.add(A)),d(Array.from(z));else{const A=z.size===C.length&&C.every(F=>z.has(F));d(A?[]:C)}},dm=(x,C,z)=>{x.stopPropagation();const A=new Set(U);A.has(C)&&!x.ctrlKey&&!x.shiftKey?(A.delete(C),d([])):(A.add(C),Wo(x,z.map(F=>F.id))),L(A)},hm=(x,C,z)=>{x.stopPropagation(),q===C&&!x.ctrlKey&&!x.shiftKey?(te(null),d([])):(te(C),Wo(x,z.map(A=>A.id)))},fm=(x,C)=>{Wo(x,C.map(z=>z.id))},pm=()=>{const C=Ho.flatMap(F=>F.dates.flatMap(W=>W.parts)).map(F=>F.id);if(C.length===0)return;const z=new Set(e.map(F=>F.id)),A=C.every(F=>z.has(F));d(A?[]:C)},qo=x=>{const C=t.filter(z=>x==="install"?!!z.installation:x==="delivery"?!!z.delivery:x==="bolts"?!!z.bolting:!1).map(z=>z.id);d(C)},hc=(x,C)=>{const z=t.filter(A=>{var F,W;return C==="install"?((F=A.installation)==null?void 0:F.date)===x:C==="delivery"?((W=A.delivery)==null?void 0:W.date)===x:!1}).map(A=>A.id);d(z)},fc=(x,C)=>{const z=t.filter(A=>{var F,W;return C==="install"?(F=A.installation)==null?void 0:F.installers.includes(x):C==="bolts"?((W=A.bolting)==null?void 0:W.installer)===x:!1}).map(A=>A.id);d(z)},gm=x=>{const C=t.filter(z=>{var A;return((A=z.delivery)==null?void 0:A.vehicle)===x}).map(z=>z.id);d(C)},mm=e.slice(0,he),ym=e.length-he;return c.jsxs("div",{className:"h-full flex flex-col bg-white border-r border-gray-200 w-96 shadow-xl z-20 relative",children:[c.jsxs("div",{className:"p-5 border-b border-gray-100 bg-slate-50 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[c.jsx(c0,{className:"text-blue-600"}),"RIVEST TC manager v2.5"]}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Trimble Connect Laiendus"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>N(!E),className:"text-gray-400 hover:text-blue-600 transition-colors p-1",title:"Otsi GUID jrgi",children:c.jsx(Id,{size:18})}),c.jsx("button",{onClick:()=>G(!k),className:"text-gray-400 hover:text-gray-600 transition-colors p-1",title:"Seaded",children:c.jsx(k0,{size:18})})]})]}),E&&c.jsxs("div",{className:"p-4 border-b border-gray-200 bg-blue-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("h3",{className:"text-xs font-bold text-blue-800 flex items-center gap-1",children:[c.jsx(Id,{size:14}),"Otsi GUID jrgi"]}),c.jsx("button",{onClick:()=>N(!1),children:c.jsx(wr,{size:16,className:"text-gray-400 hover:text-gray-600"})})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",placeholder:"Sisesta IFC GUID...",value:O,onChange:x=>J(x.target.value),className:"flex-1 text-xs p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyDown:x=>{x.key==="Enter"&&O.trim()&&m&&(se(!0),m(O.trim()).then(C=>{se(!1),C?(J(""),N(!1)):alert("Objekti ei leitud selle GUID-iga")}))}}),c.jsxs("button",{onClick:()=>{O.trim()&&m&&(se(!0),m(O.trim()).then(x=>{se(!1),x?(J(""),N(!1)):alert("Objekti ei leitud selle GUID-iga")}))},disabled:!O.trim()||B||!m,className:"px-3 py-2 bg-blue-600 text-white rounded text-xs font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[B?c.jsx(Gu,{size:14,className:"animate-spin"}):c.jsx(x0,{size:14}),"Otsi"]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Kopeeri GUID Supabase'ist ja kleebi siia, et zoomida objekti juurde."})]}),k&&c.jsxs("div",{className:"absolute inset-0 z-[60] bg-white p-5 animate-in slide-in-from-top duration-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-700",children:"Seaded"}),c.jsx("button",{onClick:()=>G(!1),children:c.jsx(wr,{size:18,className:"text-gray-400"})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Paigalduse veerg"}),c.jsxs("select",{value:Te,onChange:x=>_t(x.target.value),className:"w-full text-xs p-2.5 border border-gray-300 rounded bg-gray-50",children:[c.jsx("option",{value:"castUnitPos",children:"This (Mark)"}),c.jsx("option",{value:"name",children:"Nimi"}),c.jsx("option",{value:"guid",children:"GUID"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Tarne veerg"}),c.jsxs("select",{value:At,onChange:x=>Nr(x.target.value),className:"w-full text-xs p-2.5 border border-gray-300 rounded bg-gray-50",children:[c.jsx("option",{value:"castUnitPos",children:"This (Mark)"}),c.jsx("option",{value:"name",children:"Nimi"}),c.jsx("option",{value:"guid",children:"GUID"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Poltide veerg"}),c.jsxs("select",{value:Or,onChange:x=>K(x.target.value),className:"w-full text-xs p-2.5 border border-gray-300 rounded bg-gray-50",children:[c.jsx("option",{value:"castUnitPos",children:"This (Mark)"}),c.jsx("option",{value:"name",children:"Nimi"}),c.jsx("option",{value:"guid",children:"GUID"})]})]})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:c.jsx("button",{onClick:()=>G(!1),className:"w-full py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-md text-sm font-semibold",children:"Sulge"})})]}),et&&c.jsx(P0,{mode:r,parts:et.parts,suggestions:Ks,selectedParts:e,onSave:om,onRemoveFromGroup:am,onClose:()=>Zt(null),getPartLabel:Ne,onSetSelection:d}),ct&&c.jsx(C0,{part:ct,onClose:()=>wt(null)}),Gn&&c.jsx(A0,{allParts:t,onClose:()=>Tr(!1)}),c.jsxs("div",{className:"flex border-b border-gray-200",children:[c.jsxs("button",{onClick:()=>s("installation"),className:`flex-1 py-3 text-xs font-medium flex justify-center items-center gap-1 border-b-2 transition-colors ${r==="installation"?"border-blue-600 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[c.jsx(ba,{size:14})," Paigaldus"]}),c.jsxs("button",{onClick:()=>s("bolts"),className:`flex-1 py-3 text-xs font-medium flex justify-center items-center gap-1 border-b-2 transition-colors ${r==="bolts"?"border-orange-500 text-orange-600 bg-orange-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[c.jsx(ka,{size:14})," Poldid"]}),c.jsxs("button",{onClick:()=>s("delivery"),className:`flex-1 py-3 text-xs font-medium flex justify-center items-center gap-1 border-b-2 transition-colors ${r==="delivery"?"border-blue-600 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[c.jsx(Ur,{size:14})," Tarne"]}),c.jsxs("button",{onClick:()=>s("statistics"),className:`flex-1 py-3 text-xs font-medium flex justify-center items-center gap-1 border-b-2 transition-colors ${r==="statistics"?"border-blue-600 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[c.jsx(u0,{size:14})," Statistika"]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto bg-white relative",children:[ie&&c.jsxs("div",{className:"absolute inset-0 z-50 bg-white/95 backdrop-blur-sm flex flex-col items-center justify-center p-6 text-center animate-in fade-in",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:c.jsx(l0,{className:"text-red-600",size:32})}),c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Tegevus peatatud!"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-xs",children:r==="bolts"?'Poltide mrkimiseks peab "Assembly Selection" olema VLJA llitatud.':'Selle tegevuse jaoks peab "Assembly Selection" olema SISSE llitatud.'}),c.jsx("div",{className:"bg-slate-100 px-4 py-2 rounded border border-slate-200 text-xs font-mono text-slate-600",children:"Muuda Trimble Connect seadeid"})]}),r==="statistics"&&c.jsxs("div",{className:"p-5 space-y-6 pb-10",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-sm font-bold text-gray-800 mb-3 flex items-center gap-2",children:[c.jsx(b0,{size:16,className:"text-blue-600"})," ldine Progress"]}),c.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm p-4 space-y-4",children:[c.jsx(ja,{label:"Tarnitud",value:be.counts.delivered,total:be.total,colorClass:"bg-blue-500",icon:Ur,onClick:()=>qo("delivery")}),c.jsx(ja,{label:"Paigaldatud",value:be.counts.installed,total:be.total,colorClass:"bg-green-600",icon:ba,onClick:()=>qo("install")}),c.jsx(ja,{label:"Poldid pingutatud",value:be.counts.bolted,total:be.total,colorClass:"bg-orange-500",icon:ka,onClick:()=>qo("bolts")})]})]}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-sm font-bold text-gray-800 mb-3 flex items-center gap-2",children:[c.jsx(ba,{size:16,className:"text-green-600"})," Paigaldus"]}),c.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm p-4",children:[be.installActivity.length>0?c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Pevane aktiivsus (7 peva)"}),c.jsx(Dd,{data:be.installActivity,colorClass:"bg-green-400",onBarClick:x=>hc(x,"install")})]}):c.jsx("div",{className:"text-xs text-gray-400 italic mb-4",children:"Aktiivsus puudub"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"Paigaldajate Edetabel"}),be.topInstallers.length>0?be.topInstallers.map((x,C)=>c.jsx(Ta,{rank:C+1,name:x.label,value:x.value,max:be.topInstallers[0].value,colorClass:"bg-green-500",onClick:()=>fc(x.label,"install")},x.label)):c.jsx("div",{className:"text-xs text-gray-400 italic",children:"Andmed puuduvad"})]})]})]}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-sm font-bold text-gray-800 mb-3 flex items-center gap-2",children:[c.jsx(Ur,{size:16,className:"text-blue-600"})," Tarne ja Transport"]}),c.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm p-4",children:[be.deliveryActivity.length>0?c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Saabumised (7 peva)"}),c.jsx(Dd,{data:be.deliveryActivity,colorClass:"bg-blue-400",onBarClick:x=>hc(x,"delivery")})]}):c.jsx("div",{className:"text-xs text-gray-400 italic mb-4",children:"Aktiivsus puudub"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"Top Veokid / Autod"}),be.topVehicles.length>0?be.topVehicles.map((x,C)=>c.jsx(Ta,{rank:C+1,name:x.label,value:x.value,max:be.topVehicles[0].value,colorClass:"bg-blue-500",onClick:()=>gm(x.label)},x.label)):c.jsx("div",{className:"text-xs text-gray-400 italic",children:"Andmed puuduvad"})]})]})]}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-sm font-bold text-gray-800 mb-3 flex items-center gap-2",children:[c.jsx(ka,{size:16,className:"text-orange-600"})," Poldid"]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm p-4",children:c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"Pingutajate Edetabel"}),be.topBolters.length>0?be.topBolters.map((x,C)=>c.jsx(Ta,{rank:C+1,name:x.label,value:x.value,max:be.topBolters[0].value,colorClass:"bg-orange-500",onClick:()=>fc(x.label,"bolts")},x.label)):c.jsx("div",{className:"text-xs text-gray-400 italic",children:"Andmed puuduvad"})]})})]})]}),(r==="installation"||r==="delivery"||r==="bolts")&&c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[c.jsxs("div",{className:"flex-none border-b border-gray-100 shadow-sm z-10",children:[c.jsxs("div",{className:"px-4 py-3 flex justify-between items-end bg-white",children:[c.jsxs("h2",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:["Valitud detailid (",e.length,")"]}),e.length>0&&c.jsx("button",{onClick:l,className:"text-xs text-red-500 hover:text-red-700 font-medium underline decoration-dotted",children:"Thjenda valik"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto px-2 pb-2",children:e.length===0?c.jsxs("div",{className:"h-16 flex flex-col items-center justify-center text-gray-400 border border-dashed border-gray-200 rounded bg-gray-50/30 m-2",children:[c.jsx(_0,{size:16,className:"mb-1 opacity-50"}),c.jsx("span",{className:"text-[10px]",children:"Vali mudelilt"})]}):c.jsxs("div",{className:"divide-y divide-gray-50 border rounded border-gray-100",children:[mm.map(x=>{let C="Ootel",z="",A=!1,F=null;if(r==="installation"&&x.installation){C="Paigaldatud",z=`${zt(x.installation.date)} (${x.installation.installers.join(", ")})`,A=!0;const W=hi[x.installation.method||"MUU"];W&&(F=W)}else r==="delivery"&&x.delivery?(C="Kohal",z=`${zt(x.delivery.date)} ${x.delivery.arrivalTime?"@"+x.delivery.arrivalTime:""} (${x.delivery.vehicle})`,A=!0):r==="bolts"&&x.bolting&&(C="Pingutatud",z=`${zt(x.bolting.date)} (${x.bolting.installer})`,A=!0);return c.jsxs("div",{className:`group flex items-center justify-between py-1 px-2 text-xs transition-colors border-b border-gray-50 last:border-0 hover:bg-gray-50 ${A?"bg-orange-50/50":""}`,children:[c.jsxs("div",{className:"flex items-center gap-2 min-w-0 overflow-hidden",children:[c.jsx("button",{onClick:()=>wt(x),className:"text-gray-400 hover:text-blue-500",children:c.jsx(w0,{size:14})}),c.jsxs("span",{className:"font-semibold text-slate-700 whitespace-nowrap flex items-center gap-1",children:[F&&c.jsx("span",{className:"text-gray-400",title:"Paigaldusviis",children:F}),Ne(x)]}),A&&c.jsxs("span",{className:"text-[10px] text-orange-600 truncate opacity-80",title:z,children:[C," ",z]})]}),c.jsx("button",{onClick:()=>Se(x.id),className:"text-gray-300 hover:text-red-500 p-0.5 rounded hover:bg-white flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(wr,{size:12})})]},x.id)}),ym>0&&c.jsxs("div",{className:"py-2 px-2 text-center bg-gray-50/50",children:[c.jsxs("p",{className:"text-[10px] text-gray-400 mb-1",children:["Kuvatud ",he," / ",e.length," detaili"]}),c.jsx("button",{onClick:()=>Q(x=>x+50),className:"text-xs text-blue-600 hover:underline font-medium",children:"Nita rohkem"})]})]})})]}),c.jsxs("div",{className:"bg-slate-50 min-h-[200px] border-t border-gray-100",children:[c.jsxs("div",{className:"p-4 pb-2 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-500 uppercase flex items-center gap-2",children:[c.jsx(v0,{size:14}),r==="installation"?"Paigalduse Ajalugu":r==="bolts"?"Poltide Ajalugu":"Tarne Ajalugu"]}),c.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Ava kuupev, et nha ja mrkida detaile."})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:pm,className:"flex items-center gap-1 text-[10px] bg-white border border-gray-200 shadow-sm px-2 py-1 rounded hover:bg-gray-50 text-gray-600",title:"Vali kik kuvatavad detailid",children:[c.jsx(f0,{size:12})," Vali kik"]}),c.jsxs("button",{onClick:()=>Tr(!0),className:"flex items-center gap-1 text-[10px] bg-white border border-gray-200 shadow-sm px-2 py-1 rounded hover:bg-gray-50 text-gray-600",children:[c.jsx(Np,{size:12})," Kalender"]})]})]}),c.jsx("div",{className:"space-y-2 px-3 pb-10",children:Ho.length===0?c.jsx("div",{className:"p-4 text-center text-gray-400 italic text-xs",children:"Ajalugu puudub"}):Ho.map(x=>{const C=U.has(x.key),z=x.dates.flatMap(A=>A.parts);return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-sm overflow-hidden",children:[c.jsx("button",{onClick:A=>dm(A,x.key,z),className:"w-full flex items-center justify-between px-3 py-2 bg-slate-100 hover:bg-slate-200 transition-colors",children:c.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-700",children:[C?c.jsx(p0,{size:14}):c.jsx(Cl,{size:14}),c.jsx("span",{children:x.monthLabel})]})}),C&&c.jsx("div",{className:"divide-y divide-gray-100",children:x.dates.map(A=>{const F=q===A.iso;return c.jsxs("div",{className:"bg-white",children:[c.jsxs("div",{className:`w-full flex items-center justify-between px-3 py-2 text-xs transition-colors
                                        ${F?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("button",{onClick:W=>hm(W,A.iso,A.parts),className:"flex-1 flex items-center gap-2 pl-4 text-left",children:[c.jsx(d0,{size:12,className:"opacity-50"}),c.jsx("span",{children:A.label})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-[10px] text-gray-500 border border-gray-200",children:A.parts.length}),r!=="delivery"&&c.jsx("button",{onClick:W=>dc(W,A.parts),className:"p-1 hover:bg-blue-200 rounded text-blue-600",title:"Muuda andmeid",children:c.jsx(uo,{size:12})})]})]}),F&&c.jsx("div",{className:"border-t border-blue-100 bg-blue-50/30 pl-8",children:r==="delivery"?A.deliveryGroups.map(W=>{var qe,dt;return c.jsxs("div",{children:[c.jsxs("div",{onClick:Oe=>fm(Oe,W.parts),className:"bg-blue-100/50 px-3 py-1.5 text-[11px] font-bold text-slate-600 border-y border-blue-200 flex justify-between items-center cursor-pointer hover:bg-blue-200/50 transition-colors",title:"Kliki, et valida ainult selle veose detailid",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ur,{size:12,className:"text-blue-500"}),c.jsx("span",{children:W.vehicle})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[((dt=(qe=W.parts[0])==null?void 0:qe.delivery)==null?void 0:dt.arrivalTime)&&c.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:[W.parts[0].delivery.arrivalTime," - ",W.parts[0].delivery.unloadingTime]}),c.jsxs("span",{className:"text-gray-500 font-normal",children:[W.parts.length," tk"]}),c.jsx("button",{onClick:Oe=>dc(Oe,W.parts),className:"p-1 hover:bg-blue-300 rounded text-blue-700",title:"Muuda selle veose andmeid",children:c.jsx(uo,{size:12})})]})]}),c.jsx("table",{className:"w-full text-xs text-left mb-1",children:c.jsx("tbody",{className:"divide-y divide-blue-100/50",children:W.parts.map(Oe=>c.jsx("tr",{className:"hover:bg-white/60",children:c.jsx("td",{className:"p-1.5 pl-6 font-medium text-gray-700",children:Ne(Oe)})},Oe.id))})})]},W.vehicle)}):c.jsxs("table",{className:"w-full text-xs text-left",children:[c.jsx("thead",{className:"bg-gray-50/50 border-b border-gray-100 text-gray-400",children:c.jsxs("tr",{children:[c.jsxs("th",{className:"p-1.5 pl-3 font-medium",children:["Detail (",r==="bolts"?Or:Te,")"]}),c.jsx("th",{className:"p-1.5 font-medium",children:r==="bolts"?"Pingutaja":"Paigaldaja"})]})}),c.jsx("tbody",{children:A.parts.map(W=>{var qe,dt,Oe;return c.jsxs("tr",{className:"border-b border-gray-100 last:border-0 hover:bg-white/60",children:[c.jsxs("td",{className:"p-1.5 pl-3 font-medium text-gray-700 flex items-center gap-1",children:[r==="installation"&&((qe=W.installation)==null?void 0:qe.method)&&hi[W.installation.method]&&c.jsx("span",{className:"text-gray-400 scale-75",children:hi[W.installation.method]}),Ne(W)]}),c.jsx("td",{className:"p-1.5 text-gray-500",children:r==="bolts"?(dt=W.bolting)==null?void 0:dt.installer:(Oe=W.installation)==null?void 0:Oe.installers.join(", ")})]},W.id)})})]})})]},A.iso)})})]},x.key)})})]})]}),c.jsxs("div",{className:"p-5 bg-white border-t border-gray-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10",children:[P&&c.jsxs("div",{className:`mb-4 border p-3 rounded-md flex gap-2 animate-in fade-in slide-in-from-bottom-2 ${String(P).includes("Jah, kirjuta le")||$a.isValidElement(P)?"bg-yellow-50 border-yellow-200 text-yellow-900":"bg-red-50 border-red-200 text-red-800"}`,children:[c.jsx("div",{className:"flex-shrink-0 mt-0.5",children:c.jsx(o0,{size:18,className:$a.isValidElement(P)?"text-yellow-600":"text-red-600"})}),c.jsx("div",{className:"flex-1",children:P})]}),r==="installation"&&c.jsxs("form",{onSubmit:lm,className:"space-y-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"flex-1",children:c.jsx(Rl,{label:"Paigaldajad",icon:c.jsx(xn,{size:14}),values:v,onChange:w,options:Ks.installers,placeholder:"Lisa nimi..."})}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Kuupev"}),c.jsx("input",{type:"date",value:b,onChange:x=>S(x.target.value),className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Paigaldus Viis"}),c.jsx("div",{className:"flex gap-1",children:Pl.map(x=>c.jsx("button",{type:"button",onClick:()=>vt(x),title:Al[x],className:`flex-1 py-1.5 text-xs font-medium rounded border transition-colors flex items-center justify-center gap-1.5 ${ne===x?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:hi[x]},x))}),ne==="MUU"&&c.jsx("div",{className:"mt-2 animate-in slide-in-from-top-1",children:c.jsx("input",{type:"text",value:lt,onChange:x=>jr(x.target.value),placeholder:"Kirjuta paigaldusviis...",className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",autoFocus:!0})})]}),c.jsxs("button",{type:"submit",disabled:e.length===0,className:`w-full flex items-center justify-center gap-2 py-2 rounded-md text-sm font-semibold transition-all shadow-sm ${e.length>0?"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer active:scale-95":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[c.jsx(xa,{size:16})," Salvesta"]})]}),r==="bolts"&&c.jsxs("form",{onSubmit:cm,className:"space-y-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"flex-1",children:c.jsx(kn,{label:"Pingutaja",icon:c.jsx(xn,{size:14}),value:g,onChange:y,options:Ks.installers,placeholder:"Vali nimi..."})}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Kuupev"}),c.jsx("input",{type:"date",value:b,onChange:x=>S(x.target.value),className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0})]})]}),c.jsxs("button",{type:"submit",disabled:e.length===0,className:`w-full flex items-center justify-center gap-2 py-2 rounded-md text-sm font-semibold transition-all shadow-sm ${e.length>0?"bg-orange-500 hover:bg-orange-600 text-white cursor-pointer active:scale-95":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[c.jsx(xa,{size:16})," Salvesta Pingutamine"]})]}),r==="delivery"&&c.jsxs("form",{onSubmit:um,className:"space-y-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"flex-1",children:c.jsx(kn,{label:"Auto Nr",icon:c.jsx(Ur,{size:14}),value:_,onChange:p,options:Ks.vehicles,placeholder:"Vali vi kirjuta..."})}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Kuupev"}),c.jsx("input",{type:"date",value:b,onChange:x=>S(x.target.value),className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Saabumine"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:c.jsx(Rd,{size:14})}),c.jsx("input",{type:"time",value:ut,onChange:x=>im(x.target.value),className:"w-full pl-8 pr-2 py-1.5 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0})]})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 mb-1 uppercase",children:"Lpp"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:c.jsx(Rd,{size:14})}),c.jsx("input",{type:"time",value:R,onChange:x=>H(x.target.value),className:"w-full pl-8 pr-2 py-1.5 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0})]})]})]}),c.jsxs("button",{type:"submit",disabled:e.length===0,className:`w-full flex items-center justify-center gap-2 py-2 rounded-md text-sm font-semibold transition-all shadow-sm ${e.length>0?"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer active:scale-95":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[c.jsx(xa,{size:16})," Salvesta"]})]})]})]})]}),Z&&c.jsxs("div",{className:"absolute inset-0 z-[100] bg-white/95 backdrop-blur flex flex-col items-center justify-center p-6 text-center animate-in fade-in duration-200",children:[c.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mb-4",children:c.jsx(Op,{className:"text-red-500",size:24})}),c.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Eemalda detail?"}),c.jsx("p",{className:"text-sm text-slate-500 mb-6 leading-relaxed",children:"Kas oled kindel, et soovid valitud detaili nimekirjast eemaldada?"}),c.jsxs("div",{className:"flex gap-3 w-full",children:[c.jsx("button",{onClick:()=>Se(null),className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-slate-700 rounded-md font-medium transition-colors",children:"Loobu"}),c.jsx("button",{onClick:()=>{Z&&(u(Z),Se(null))},className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md font-medium shadow-sm transition-colors",children:"Eemalda"})]})]})]})};var Ku={},ho={},Il=function(e,t){return Il=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Il(e,t)};function Cp(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Il(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fo=function(){return fo=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},fo.apply(this,arguments)};function Hn(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Pp(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function Ap(e,t){return function(r,n){t(r,n,e)}}function Rp(e,t,r,n,s,i){function o(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,f=!1,m=r.length-1;m>=0;m--){var v={};for(var w in n)v[w]=w==="access"?{}:n[w];for(var w in n.access)v.access[w]=n.access[w];v.addInitializer=function(p){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(p||null))};var _=(0,r[m])(a==="accessor"?{get:d.get,set:d.set}:d[l],v);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(d.get=h),(h=o(_.set))&&(d.set=h),(h=o(_.init))&&s.unshift(h)}else(h=o(_))&&(a==="field"?s.unshift(h):d[l]=h)}u&&Object.defineProperty(u,n.name,d),f=!0}function Ip(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function $p(e){return typeof e=="symbol"?e:"".concat(e)}function Dp(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Mp(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function $(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(h){o(h)}}function l(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((n=n.apply(e,t||[])).next())})}function Up(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Uo=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function Lp(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Uo(t,e,r)}function po(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ju(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function zp(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ju(arguments[t]));return e}function Fp(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Bp(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Ln(e){return this instanceof Ln?(this.v=e,this):new Ln(e)}function Vp(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(m){return function(v){return Promise.resolve(v).then(m,h)}}function a(m,v){n[m]&&(s[m]=function(w){return new Promise(function(_,p){i.push([m,w,_,p])>1||l(m,w)})},v&&(s[m]=v(s[m])))}function l(m,v){try{u(n[m](v))}catch(w){f(i[0][3],w)}}function u(m){m.value instanceof Ln?Promise.resolve(m.value.v).then(d,h):f(i[0][2],m)}function d(m){l("next",m)}function h(m){l("throw",m)}function f(m,v){m(v),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Hp(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:Ln(e[s](o)),done:!1}:i?i(o):o}:i}}function Wp(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof po=="function"?po(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,l){o=e[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},o)}}function qp(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var I0=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},$l=function(e){return $l=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},$l(e)};function Gp(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=$l(e),n=0;n<r.length;n++)r[n]!=="default"&&Uo(t,e,r[n]);return I0(t,e),t}function Kp(e){return e&&e.__esModule?e:{default:e}}function Jp(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Qp(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function Yp(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Xp(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var $0=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function Zp(e){function t(i){e.error=e.hasError?new $0(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return t(o),s()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function eg(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?t?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):e}const D0={__extends:Cp,__assign:fo,__rest:Hn,__decorate:Pp,__param:Ap,__esDecorate:Rp,__runInitializers:Ip,__propKey:$p,__setFunctionName:Dp,__metadata:Mp,__awaiter:$,__generator:Up,__createBinding:Uo,__exportStar:Lp,__values:po,__read:Ju,__spread:zp,__spreadArrays:Fp,__spreadArray:Bp,__await:Ln,__asyncGenerator:Vp,__asyncDelegator:Hp,__asyncValues:Wp,__makeTemplateObject:qp,__importStar:Gp,__importDefault:Kp,__classPrivateFieldGet:Jp,__classPrivateFieldSet:Qp,__classPrivateFieldIn:Yp,__addDisposableResource:Xp,__disposeResources:Zp,__rewriteRelativeImportExtension:eg},M0=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Xp,get __assign(){return fo},__asyncDelegator:Hp,__asyncGenerator:Vp,__asyncValues:Wp,__await:Ln,__awaiter:$,__classPrivateFieldGet:Jp,__classPrivateFieldIn:Yp,__classPrivateFieldSet:Qp,__createBinding:Uo,__decorate:Pp,__disposeResources:Zp,__esDecorate:Rp,__exportStar:Lp,__extends:Cp,__generator:Up,__importDefault:Kp,__importStar:Gp,__makeTemplateObject:qp,__metadata:Mp,__param:Ap,__propKey:$p,__read:Ju,__rest:Hn,__rewriteRelativeImportExtension:eg,__runInitializers:Ip,__setFunctionName:Dp,__spread:zp,__spreadArray:Bp,__spreadArrays:Fp,__values:po,default:D0},Symbol.toStringTag,{value:"Module"})),U0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Lo=class extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}},tg=class extends Lo{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Dl=class extends Lo{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Ml=class extends Lo{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var go;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(go||(go={}));class L0{constructor(t,{headers:r={},customFetch:n,region:s=go.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=U0(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return $(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:d,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const v=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,v.searchParams.set("forceFunctionRegion",m));let w;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(f["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(f["Content-Type"]="application/json",w=JSON.stringify(u)):w=u;let _=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(_=o.signal,d.addEventListener("abort",()=>o.abort())):_=o.signal);const p=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:w,signal:_}).catch(S=>{throw new tg(S)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new Dl(p);if(!p.ok)throw new Ml(p);let y=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return y==="application/json"?b=yield p.json():y==="application/octet-stream"||y==="application/pdf"?b=yield p.blob():y==="text/event-stream"?b=p:y==="multipart/form-data"?b=yield p.formData():b=yield p.text(),{data:b,error:null,response:p}}catch(a){return{data:null,error:a,response:a instanceof Ml||a instanceof Dl?a.context:void 0}}finally{i&&clearTimeout(i)}})}}const z0=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return go},FunctionsClient:L0,FunctionsError:Lo,FunctionsFetchError:tg,FunctionsHttpError:Ml,FunctionsRelayError:Dl},Symbol.toStringTag,{value:"Module"})),rg=zs(z0);var Le={};const Wn=zs(M0);var fi={},pi={},gi={},mi={},yi={},vi={},Md;function ng(){if(Md)return vi;Md=1,Object.defineProperty(vi,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return vi.default=e,vi}var Ud;function sg(){if(Ud)return yi;Ud=1,Object.defineProperty(yi,"__esModule",{value:!0});const t=Wn.__importDefault(ng());let r=class{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,d,h,f;let m=null,v=null,w=null,_=l.status,p=l.statusText;if(l.ok){if(this.method!=="HEAD"){const S=await l.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=S:v=JSON.parse(S))}const y=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),b=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");y&&b&&b.length>1&&(w=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(m={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,w=null,_=406,p="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const y=await l.text();try{m=JSON.parse(y),Array.isArray(m)&&l.status===404&&(v=[],m=null,_=200,p="OK")}catch{l.status===404&&y===""?(_=204,p="No Content"):m={message:y}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,_=200,p="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:v,count:w,status:_,statusText:p}});return this.shouldThrowOnError||(a=a.catch(l=>{var u,d,h,f,m,v;let w="";const _=l==null?void 0:l.cause;if(_){const p=(u=_==null?void 0:_.message)!==null&&u!==void 0?u:"",g=(d=_==null?void 0:_.code)!==null&&d!==void 0?d:"";w=`${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"FetchError"}: ${l==null?void 0:l.message}`,w+=`

Caused by: ${(f=_==null?void 0:_.name)!==null&&f!==void 0?f:"Error"}: ${p}`,g&&(w+=` (${g})`),_!=null&&_.stack&&(w+=`
${_.stack}`)}else w=(m=l==null?void 0:l.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(v=l==null?void 0:l.name)!==null&&v!==void 0?v:"FetchError"}: ${l==null?void 0:l.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(s,i)}returns(){return this}overrideTypes(){return this}};return yi.default=r,yi}var Ld;function ig(){if(Ld)return mi;Ld=1,Object.defineProperty(mi,"__esModule",{value:!0});const t=Wn.__importDefault(sg());let r=class extends t.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var d;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};return mi.default=r,mi}var zd;function Qu(){if(zd)return gi;zd=1,Object.defineProperty(gi,"__esModule",{value:!0});const t=Wn.__importDefault(ig()),r=new RegExp("[,()]");let n=class extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${u}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}};return gi.default=n,gi}var Fd;function og(){if(Fd)return pi;Fd=1,Object.defineProperty(pi,"__esModule",{value:!0});const t=Wn.__importDefault(Qu());let r=class{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return pi.default=r,pi}var Bd;function F0(){if(Bd)return fi;Bd=1,Object.defineProperty(fi,"__esModule",{value:!0});const e=Wn,t=e.__importDefault(og()),r=e.__importDefault(Qu());let n=class ag{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new ag(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:u}={}){var d;let h;const f=new URL(`${this.url}/rpc/${i}`);let m;a||l?(h=a?"HEAD":"GET",Object.entries(o).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{f.searchParams.append(w,_)})):(h="POST",m=o);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:h,url:f,headers:v,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};return fi.default=n,fi}Object.defineProperty(Le,"__esModule",{value:!0});Le.PostgrestError=Le.PostgrestBuilder=Le.PostgrestTransformBuilder=Le.PostgrestFilterBuilder=Le.PostgrestQueryBuilder=Le.PostgrestClient=void 0;const qn=Wn,lg=qn.__importDefault(F0());Le.PostgrestClient=lg.default;const ug=qn.__importDefault(og());Le.PostgrestQueryBuilder=ug.default;const cg=qn.__importDefault(Qu());Le.PostgrestFilterBuilder=cg.default;const dg=qn.__importDefault(ig());Le.PostgrestTransformBuilder=dg.default;const hg=qn.__importDefault(sg());Le.PostgrestBuilder=hg.default;const fg=qn.__importDefault(ng());Le.PostgrestError=fg.default;Le.default={PostgrestClient:lg.default,PostgrestQueryBuilder:ug.default,PostgrestFilterBuilder:cg.default,PostgrestTransformBuilder:dg.default,PostgrestBuilder:hg.default,PostgrestError:fg.default};class pg{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const B0="2.87.1",V0=`realtime-js/${B0}`,gg="1.0.0",H0="2.0.0",Vd=gg,Ul=1e4,W0=1e3,q0=100;var Lr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Lr||(Lr={}));var ve;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ve||(ve={}));var jt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(jt||(jt={}));var Ll;(function(e){e.websocket="websocket"})(Ll||(Ll={}));var zr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(zr||(zr={}));class G0{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,a=(s=t.ref)!==null&&s!==void 0?s:"",l=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(m),w=0;v.setUint8(w++,this.KINDS.userBroadcastPush),v.setUint8(w++,l.length),v.setUint8(w++,a.length),v.setUint8(w++,o.length),v.setUint8(w++,u.length),v.setUint8(w++,h.length),v.setUint8(w++,r),Array.from(l,p=>v.setUint8(w++,p.charCodeAt(0))),Array.from(a,p=>v.setUint8(w++,p.charCodeAt(0))),Array.from(o,p=>v.setUint8(w++,p.charCodeAt(0))),Array.from(u,p=>v.setUint8(w++,p.charCodeAt(0))),Array.from(h,p=>v.setUint8(w++,p.charCodeAt(0)));var _=new Uint8Array(m.byteLength+n.byteLength);return _.set(new Uint8Array(m),0),_.set(new Uint8Array(n),m.byteLength),_.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,a,l]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const h=n.decode(t.slice(l,l+o));l=l+o;const f=t.slice(l,t.byteLength),m=a===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,v={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class mg{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var oe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(oe||(oe={}));const Hd=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=K0(o,e,t,s),i),{}):{}},K0=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?yg(i,o):zl(o)},yg=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return X0(t,r)}switch(e){case oe.bool:return J0(t);case oe.float4:case oe.float8:case oe.int2:case oe.int4:case oe.int8:case oe.numeric:case oe.oid:return Q0(t);case oe.json:case oe.jsonb:return Y0(t);case oe.timestamp:return Z0(t);case oe.abstime:case oe.date:case oe.daterange:case oe.int4range:case oe.int8range:case oe.money:case oe.reltime:case oe.text:case oe.time:case oe.timestamptz:case oe.timetz:case oe.tsrange:case oe.tstzrange:return zl(t);default:return zl(t)}},zl=e=>e,J0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Q0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Y0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},X0=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>yg(t,a))}return e},Z0=e=>typeof e=="string"?e.replace(" ","T"):e,vg=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Na{constructor(t,r,n={},s=Ul){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Fl;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Fl||(Fl={}));let wg=class $i{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$i.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=$i.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=$i.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(_=>_.presence_ref),m=h.map(_=>_.presence_ref),v=d.filter(_=>m.indexOf(_.presence_ref)<0),w=h.filter(_=>f.indexOf(_.presence_ref)<0);v.length>0&&(a[u]=v),w.length>0&&(l[u]=w)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),d.length>0){const h=t[a].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[a].unshift(...f)}n(a,d,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Bl;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Bl||(Bl={}));var Cn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Cn||(Cn={}));var Dt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Dt||(Dt={}));const ew=ve;let _g=class ls{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Na(this,jt.join,this.params,this.timeout),this.rejoinTimer=new mg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ve.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jt.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new wg(this),this.broadcastEndpointURL=vg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ve.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Cn.PRESENCE]&&this.bindings[Cn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Dt.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Dt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(Dt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,p=[];for(let g=0;g<_;g++){const y=w[g],{filter:{event:b,schema:S,table:E,filter:N}}=y,O=m&&m[g];if(O&&O.event===b&&ls.isFilterValueEqual(O.schema,S)&&ls.isFilterValueEqual(O.table,E)&&ls.isFilterValueEqual(O.filter,N))p.push(Object.assign(Object.assign({},y),{id:O.id}));else{this.unsubscribe(),this.state=ve.errored,t==null||t(Dt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(Dt.SUBSCRIBED);return}}).receive("error",m=>{this.state=ve.errored,t==null||t(Dt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Dt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ve.joined&&t===Cn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ve.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Na(this,jt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ve.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Na(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>q0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=jt;if(n&&[a,l,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var v,w,_;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((_=(w=m.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,w,_,p,g,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const b=m.id,S=(v=m.filter)===null||v===void 0?void 0:v.event;return b&&((w=r.ids)===null||w===void 0?void 0:w.includes(b))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const b=(g=(p=m==null?void 0:m.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return b==="*"||b===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:w,table:_,commit_timestamp:p,type:g,errors:y}=v;f=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:p,eventType:g,new:{},old:{},errors:y}),this._getPayloadRecords(v))}m.callback(f,n)})}_isClosed(){return this.state===ve.closed}_isJoined(){return this.state===ve.joined}_isJoining(){return this.state===ve.joining}_isLeaving(){return this.state===ve.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ls.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(jt.close,{},t)}_onError(t){this._on(jt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ve.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Hd(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Hd(t.columns,t.old_record)),r}};const Oa=()=>{},wi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},tw=[1e3,2e3,5e3,1e4],rw=1e4,nw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let sw=class{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ul,this.transport=null,this.heartbeatIntervalMs=wi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Oa,this.ref=0,this.reconnectTimer=null,this.vsn=Vd,this.logger=Oa,this.conn=null,this.sendBuffer=[],this.serializer=new G0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ll.websocket}`,this.httpEndpoint=vg(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=pg.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Lr.connecting:return zr.Connecting;case Lr.open:return zr.Open;case Lr.closing:return zr.Closing;default:return zr.Closed}}isConnected(){return this.connectionState()===zr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new _g(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(W0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},wi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Lr.open||this.conn.readyState===Lr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(jt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([nw],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:V0};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(jt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new mg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,u,d,h,f,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Ul,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:wi.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Oa,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:Vd,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>tw[v-1]||rw,this.vsn){case gg:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(v,w)=>w(JSON.stringify(v)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(v,w)=>w(JSON.parse(v));break;case H0:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}};const iw=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:ew,get REALTIME_LISTEN_TYPES(){return Cn},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Bl},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Fl},get REALTIME_SUBSCRIBE_STATES(){return Dt},RealtimeChannel:_g,RealtimeClient:sw,RealtimePresence:wg,WebSocketFactory:pg},Symbol.toStringTag,{value:"Module"})),bg=zs(iw);class qs extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ce(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class xg extends qs{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mo extends qs{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Yu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ow=()=>Response,Vl=e=>{if(Array.isArray(e))return e.map(r=>Vl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Vl(n)}),t},aw=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lw=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),Ca=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},uw=(e,t,r)=>$(void 0,void 0,void 0,function*(){const n=yield ow();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new xg(Ca(s),i,o))}).catch(s=>{t(new mo(Ca(s),s))}):t(new mo(Ca(e),e))}),cw=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(aw(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Gs(e,t,r,n,s,i){return $(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,cw(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>uw(l,a,n))})})}function Us(e,t,r,n){return $(this,void 0,void 0,function*(){return Gs(e,"GET",t,r,n)})}function St(e,t,r,n,s){return $(this,void 0,void 0,function*(){return Gs(e,"POST",t,n,s,r)})}function Hl(e,t,r,n,s){return $(this,void 0,void 0,function*(){return Gs(e,"PUT",t,n,s,r)})}function dw(e,t,r,n){return $(this,void 0,void 0,function*(){return Gs(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Xu(e,t,r,n,s){return $(this,void 0,void 0,function*(){return Gs(e,"DELETE",t,n,s,r)})}class hw{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return $(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}}var kg;class fw{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[kg]="BlobDownloadBuilder",this.promise=null}asStream(){return new hw(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return $(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}}kg=Symbol.toStringTag;const pw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gw{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Yu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return $(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Wd),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?Hl:St)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}upload(t,r,n){return $(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return $(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:Wd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Hl(this.fetch,a.toString(),l,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ce(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return $(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield St(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new qs("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ce(n))return{data:null,error:n};throw n}})}update(t,r,n){return $(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return $(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ce(s))return{data:null,error:s};throw s}})}copy(t,r,n){return $(this,void 0,void 0,function*(){try{return{data:{path:(yield St(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ce(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return $(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield St(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ce(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return $(this,void 0,void 0,function*(){try{const s=yield St(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ce(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(t),l=()=>Us(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new fw(l,this.shouldThrowOnError)}info(t){return $(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Us(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Vl(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ce(n))return{data:null,error:n};throw n}})}exists(t){return $(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield dw(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ce(n)&&n instanceof mo){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(t){return $(this,void 0,void 0,function*(){try{return{data:yield Xu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}list(t,r,n){return $(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},pw),r),{prefix:t||""});return{data:yield St(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ce(s))return{data:null,error:s};throw s}})}listV2(t,r){return $(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield St(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ce(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Sg="2.87.1",Eg={"X-Client-Info":`storage-js/${Sg}`};class mw{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Eg),r),this.fetch=Yu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return $(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Us(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}getBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield Us(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}createBucket(t){return $(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield St(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ce(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return $(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ce(n))return{data:null,error:n};throw n}})}emptyBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield Xu(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Ls=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function yw(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function vw(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function ww(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const a=yw(e.baseUrl,n,s),l=await vw(e.auth),u=await t(a,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const m=h?f:void 0,v=m==null?void 0:m.error;throw new Ls((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:m})}return{status:u.status,headers:u.headers,data:f}}}}function _i(e){return e.join("")}var _w=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:_i(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_i(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_i(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_i(e.namespace)}`}),!0}catch(t){if(t instanceof Ls&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Ls&&r.status===409)return;throw r}}};function nn(e){return e.join("")}var bw=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nn(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${nn(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${nn(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nn(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nn(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nn(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Ls&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Ls&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},xw=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ww({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new _w(this.client,t),this.tableOps=new bw(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class jg{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Eg),r),this.fetch=Yu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}listBuckets(t){return $(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Us(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield Xu(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}from(t){if(!lw(t))throw new qs("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new xw({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>$(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,o){const a=i[o];return typeof a!="function"?a:(...l)=>$(this,void 0,void 0,function*(){try{return{data:yield a.apply(i,l),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}})}})}}const Zu={"X-Client-Info":`storage-js/${Sg}`,"Content-Type":"application/json"};class ec extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Je(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Di extends ec{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tg extends ec{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Wl;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Wl||(Wl={}));const zo=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),kw=()=>Response,Ng=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Sw=e=>Array.from(new Float32Array(e)),Ew=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},qd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jw=(e,t,r)=>$(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new Di(qd(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;t(new Di(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;t(new Di(a,s,o))}}else t(new Tg(qd(e),e))}),Tw=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(Ng(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function Nw(e,t,r,n,s,i){return $(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,Tw(t,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>jw(l,a,n))})})}function rt(e,t,r,n,s){return $(this,void 0,void 0,function*(){return Nw(e,"POST",t,n,s,r)})}class Og{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zu),r),this.fetch=zo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return $(this,void 0,void 0,function*(){try{return{data:(yield rt(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}getIndex(t,r){return $(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}listIndexes(t){return $(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return $(this,void 0,void 0,function*(){try{return{data:(yield rt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}}class Cg{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zu),r),this.fetch=zo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return $(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield rt(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}getVectors(t){return $(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}listVectors(t){return $(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield rt(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}queryVectors(t){return $(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}deleteVectors(t){return $(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield rt(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}}class Pg{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zu),r),this.fetch=zo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return $(this,void 0,void 0,function*(){try{return{data:(yield rt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}getBucket(t){return $(this,void 0,void 0,function*(){try{return{data:yield rt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}listBuckets(){return $(this,arguments,void 0,function*(t={}){try{return{data:yield rt(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $(this,void 0,void 0,function*(){try{return{data:(yield rt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}}class Ag extends Pg{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new Rg(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return $(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return $(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return $(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return $(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class Rg extends Og{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return $(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return $(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return $(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return $(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Ig(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class Ig extends Cg{constructor(t,r,n,s,i){super(t,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return $(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return $(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return $(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return $(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return $(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Ow extends mw{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new gw(this.url,this.headers,t,this.fetch)}get vectors(){return new Ag(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new jg(this.url+"/iceberg",this.headers,this.fetch)}}const Cw=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:jg,StorageApiError:xg,StorageClient:Ow,StorageError:qs,StorageUnknownError:mo,StorageVectorsApiError:Di,StorageVectorsClient:Ag,StorageVectorsError:ec,get StorageVectorsErrorCode(){return Wl},StorageVectorsUnknownError:Tg,VectorBucketApi:Pg,VectorBucketScope:Rg,VectorDataApi:Cg,VectorIndexApi:Og,VectorIndexScope:Ig,isPlainObject:Ng,isStorageError:ce,isStorageVectorsError:Je,normalizeToFloat32:Sw,resolveFetch:zo,resolveResponse:kw,validateVectorDimension:Ew},Symbol.toStringTag,{value:"Module"})),Pw=zs(Cw);var $g={},Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.version=void 0;Fo.version="2.87.1";(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=Fo;let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})($g);var Dg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=s=>s?(...i)=>s(...i):(...i)=>fetch(...i);e.resolveFetch=t;const r=()=>Headers;e.resolveHeadersConstructor=r;const n=(s,i,o)=>{const a=(0,e.resolveFetch)(o),l=(0,e.resolveHeadersConstructor)();return async(u,d)=>{var h;const f=(h=await i())!==null&&h!==void 0?h:s;let m=new l(d==null?void 0:d.headers);return m.has("apikey")||m.set("apikey",s),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),a(u,Object.assign(Object.assign({},d),{headers:m}))}};e.fetchWithAuth=n})(Dg);var Er={};Object.defineProperty(Er,"__esModule",{value:!0});Er.isBrowser=void 0;Er.uuid=Aw;Er.ensureTrailingSlash=Mg;Er.applySettingDefaults=Iw;Er.validateSupabaseUrl=$w;function Aw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,r=e=="x"?t:t&3|8;return r.toString(16)})}function Mg(e){return e.endsWith("/")?e:e+"/"}const Rw=()=>typeof window<"u";Er.isBrowser=Rw;function Iw(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function $w(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Mg(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Bo={};const Ug="2.87.1",ln=30*1e3,ql=3,Pa=ql*ln,Dw="http://localhost:9999",Mw="supabase.auth.token",Uw={"X-Client-Info":`gotrue-js/${Ug}`},Gl="X-Supabase-Api-Version",Lg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Lw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zw=10*60*1e3;let zn=class extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}};function M(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let zg=class extends zn{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}};function Fg(e){return M(e)&&e.name==="AuthApiError"}let ar=class extends zn{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}},Xt=class extends zn{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}},Ge=class extends Xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Bg(e){return M(e)&&e.name==="AuthSessionMissingError"}let $r=class extends Xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},us=class extends Xt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},cs=class extends Xt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Vg(e){return M(e)&&e.name==="AuthImplicitGrantRedirectError"}let Kl=class extends Xt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},yo=class extends Xt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}};function Mi(e){return M(e)&&e.name==="AuthRetryableFetchError"}let Jl=class extends Xt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}};function Fw(e){return M(e)&&e.name==="AuthWeakPasswordError"}let vo=class extends Xt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gd=` 	
\r=`.split(""),Bw=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Gd.length;t+=1)e[Gd[t].charCodeAt(0)]=-2;for(let t=0;t<wo.length;t+=1)e[wo[t].charCodeAt(0)]=t;return e})();function Kd(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(wo[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(wo[n]),t.queuedBits-=6}}function Hg(e,t,r){const n=Bw[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Jd(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Ww(o,n,r)};for(let o=0;o<e.length;o+=1)Hg(e.charCodeAt(o),s,i);return t.join("")}function Vw(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Hw(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Vw(n,t)}}function Ww(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Pn(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Hg(e.charCodeAt(s),r,n);return new Uint8Array(t)}function qw(e){const t=[];return Hw(e,r=>t.push(r)),new Uint8Array(t)}function Hr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Kd(s,r,n)),Kd(null,r,n),t.join("")}function Gw(e){return Math.round(Date.now()/1e3)+e}function Kw(){return Symbol("auth-callback")}const Pe=()=>typeof window<"u"&&typeof document<"u",Pr={tested:!1,writable:!1},Wg=()=>{if(!Pe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pr.tested)return Pr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Pr.tested=!0,Pr.writable=!0}catch{Pr.tested=!0,Pr.writable=!1}return Pr.writable};function Jw(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const qg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Qw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",un=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ar=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ce=async(e,t)=>{await e.removeItem(t)};class Vo{constructor(){this.promise=new Vo.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Vo.promiseConstructor=Promise;function Aa(e){const t=e.split(".");if(t.length!==3)throw new vo("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Lw.test(t[n]))throw new vo("JWT not in base64url format");return{header:JSON.parse(Jd(t[0])),payload:JSON.parse(Jd(t[1])),signature:Pn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Yw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Xw(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function Zw(e){return("0"+e.toString(16)).substr(-2)}function e_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Zw).join("")}async function t_(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function r_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await t_(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function sn(e,t,r=!1){const n=e_();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await un(e,`${t}-code-verifier`,s);const i=await r_(n);return[i,n===i?"plain":"s256"]}const n_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function s_(e){const t=e.headers.get(Gl);if(!t||!t.match(n_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function i_(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function o_(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const a_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function on(e){if(!a_.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ra(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function l_(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Qd(e){return JSON.parse(JSON.stringify(e))}const Dr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),u_=[502,503,504];async function Yd(e){var t;if(!Qw(e))throw new yo(Dr(e),0);if(u_.includes(e.status))throw new yo(Dr(e),e.status);let r;try{r=await e.json()}catch(i){throw new ar(Dr(i),i)}let n;const s=s_(e);if(s&&s.getTime()>=Lg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Jl(Dr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ge}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Jl(Dr(r),e.status,r.weak_password.reasons);throw new zg(Dr(r),e.status||500,n)}const c_=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function V(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Gl]||(i[Gl]=Lg["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await d_(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function d_(e,t,r,n,s,i){const o=c_(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new yo(Dr(l),0)}if(a.ok||await Yd(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Yd(l)}}function xt(e){var t;let r=null;p_(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Gw(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Xd(e){const t=xt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function lr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function h_(e){return{data:e,error:null}}function f_(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Hn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Zd(e){return e}function p_(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ui=["global","local","others"];let tc=class{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=qg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ui[0]){if(Ui.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ui.join(", ")}`);try{return await V(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await V(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:lr})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Hn(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await V(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:f_,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(M(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await V(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:lr})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await V(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Zd});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(v.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(M(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){on(t);try{return await V(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:lr})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){on(t);try{return await V(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:lr})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){on(t);try{return await V(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:lr})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){on(t.userId);try{const{data:r,error:n}=await V(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _deleteFactor(t){on(t.userId),on(t.id);try{return{data:await V(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await V(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Zd});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(v.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(M(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await V(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await V(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await V(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await V(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await V(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}};function eh(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Mr={debug:!!(globalThis&&Wg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rc extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let Gg=class extends rc{};class g_ extends rc{}async function Kg(e,t,r){Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Gg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Mr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const th={};async function m_(e,t,r){var n;const s=(n=th[e])!==null&&n!==void 0?n:Promise.resolve(),i=Promise.race([s.catch(()=>null),t>=0?new Promise((o,a)=>{setTimeout(()=>{a(new g_(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await r());return th[e]=i.catch(async o=>{if(o&&o.isAcquireTimeout)return await s,null;throw o}),await i}function y_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Jg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function v_(e){return parseInt(e,16)}function w_(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function __(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=Jg(e.address),v=d?`${d}://${n}`:n,w=e.statement?`${e.statement}
`:"",_=`${v} wants you to sign in with your Ethereum account:
${m}

${w}`;let p=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(p+=`
Expiration Time: ${s.toISOString()}`),a&&(p+=`
Not Before: ${a.toISOString()}`),l&&(p+=`
Request ID: ${l}`),u){let g=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);g+=`
- ${y}`}p+=g}return`${_}
${p}`}class we extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class _o extends we{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function b_({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new we({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new we({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new we({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new we({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new we({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new we({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new we({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new we({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Qg(o)){if(i.rp.id!==o)return new we({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new we({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new we({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new we({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new we({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function x_({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new we({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new we({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Qg(n)){if(r.rpId!==n)return new we({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new we({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new we({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new we({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class k_{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const S_=new k_;function E_(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=Hn(e,["challenge","user","excludeCredentials"]),i=Pn(t).buffer,o=Object.assign(Object.assign({},r),{id:Pn(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Pn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function j_(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Hn(e,["challenge","allowCredentials"]),s=Pn(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Pn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function T_(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Hr(new Uint8Array(e.response.attestationObject)),clientDataJSON:Hr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function N_(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Hr(new Uint8Array(s.authenticatorData)),clientDataJSON:Hr(new Uint8Array(s.clientDataJSON)),signature:Hr(new Uint8Array(s.signature)),userHandle:s.userHandle?Hr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Qg(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function rh(){var e,t;return!!(Pe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function O_(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new _o("Browser returned unexpected credential type",t)}:{data:null,error:new _o("Empty credential response",t)}}catch(t){return{data:null,error:b_({error:t,options:e})}}}async function C_(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new _o("Browser returned unexpected credential type",t)}:{data:null,error:new _o("Empty credential response",t)}}catch(t){return{data:null,error:x_({error:t,options:e})}}}const P_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},A_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function bo(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const a=n[i];t(a)?n[i]=bo(a,o):n[i]=bo(o)}else n[i]=o}return n}function R_(e,t){return bo(P_,e,t||{})}function I_(e,t){return bo(A_,e,t||{})}class $_{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:a};const l=s??S_.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=R_(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await O_({publicKey:u,signal:l});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=I_(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await C_(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return M(o)?{data:null,error:o}:{data:null,error:new ar("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new zn("rpId is required for WebAuthn authentication")};try{if(!rh())return{data:null,error:new ar("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return M(o)?{data:null,error:o}:{data:null,error:new ar("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new zn("rpId is required for WebAuthn registration")};try{if(!rh())return{data:null,error:new ar("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return M(o)?{data:null,error:o}:{data:null,error:new ar("Unexpected error in register",o)}}}}y_();const D_={url:Dw,storageKey:Mw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Uw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function nh(e,t,r){return await r()}const an={};let nc=class Ql{get jwks(){var t,r;return(r=(t=an[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){an[this.storageKey]=Object.assign(Object.assign({},an[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=an[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){an[this.storageKey]=Object.assign(Object.assign({},an[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},D_),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Ql.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ql.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Pe()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new tc({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=qg(i.fetch),this.lock=i.lock||nh,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Pe()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Kg:this.lock=nh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Wg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eh(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=eh(this.memoryStorage)),Pe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ug}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Pe()&&(r=Jw(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Pe()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Vg(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return M(r)?this._returnResult({error:r}):this._returnResult({error:new ar("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:xt}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(M(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await sn(this.storage,this.storageKey)),i=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:xt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:xt})}else throw new us("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Ce(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await Ce(this.storage,`${this.storageKey}-code-verifier`),M(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xd})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xd})}else throw new us("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new $r;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,a,l,u,d,h,f;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:w,wallet:_,statement:p,options:g}=t;let y;if(Pe())if(typeof _=="object")y=_;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")y=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=_}const b=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href),S=await y.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=Jg(S[0]);let N=(n=g==null?void 0:g.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const J=await y.request({method:"eth_chainId"});N=v_(J)}const O={domain:b.host,address:E,statement:p,uri:b.href,version:"1",chainId:N,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=__(O),v=await y.request({method:"personal_sign",params:[w_(m),E]})}try{const{data:w,error:_}=await V(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:xt});if(_)throw _;if(!w||!w.session||!w.user){const p=new $r;return this._returnResult({data:{user:null,session:null},error:p})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:_})}catch(w){if(M(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,s,i,o,a,l,u,d,h,f,m;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:_,wallet:p,statement:g,options:y}=t;let b;if(Pe())if(typeof p=="object")b=p;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))b=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=p}const S=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const E=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),g?{statement:g}:null));let N;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")N=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)N=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)v=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),w=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const E=await b.signMessage(new TextEncoder().encode(v),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:_,error:p}=await V(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Hr(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:xt});if(p)throw p;if(!_||!_.session||!_.user){const g=new $r;return this._returnResult({data:{user:null,session:null},error:g})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:p})}catch(_){if(M(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const r=await Ar(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await V(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:xt});if(await Ce(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new $r;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Ce(this.storage,`${this.storageKey}-code-verifier`),M(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:xt}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new $r;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await sn(this.storage,this.storageKey));const{error:h}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:d}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new us("You must provide either an email or phone number.")}catch(a){if(await Ce(this.storage,`${this.storageKey}-code-verifier`),M(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await V(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:xt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await sn(this.storage,this.storageKey));const u=await V(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:h_});return!((i=u.data)===null||i===void 0)&&i.url&&Pe()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Ce(this.storage,`${this.storageKey}-code-verifier`),M(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ge;const{error:s}=await V(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(M(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await V(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await V(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new us("You must provide either an email or phone number and a type")}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ar(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Pa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Ar(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ra()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=l_(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:lr}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ge}:await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:lr})})}catch(r){if(M(r))return Bg(r)&&(await this._removeSession(),await Ce(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ge;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await sn(this.storage,this.storageKey));const{data:u,error:d}=await V(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:lr});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Ce(this.storage,`${this.storageKey}-code-verifier`),M(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ge;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Aa(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(M(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ge;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(M(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Pe())throw new cs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new cs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Kl("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Kl("No code detected.");const{data:g,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new cs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const m=f-d;m*1e3<=ln&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const p={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:t.type},error:null})}catch(n){if(M(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ar(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(Fg(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await Ce(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Kw(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await sn(this.storage,this.storageKey,!0));try{return await V(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Ce(this.storage,`${this.storageKey}-code-verifier`),M(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await V(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Pe()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(M(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:d}=t,h=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:xt}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new $r}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(await Ce(this.storage,`${this.storageKey}-code-verifier`),M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await V(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Xw(async s=>(s>0&&await Yw(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await V(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Mi(i)&&Date.now()+o-n<ln})}catch(n){if(this._debug(r,"error",n),M(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Pe()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ar(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Ar(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await un(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ra()}else if(s&&!s.user&&!s.user){const o=await Ar(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Ce(this.storage,this.storageKey+"-user"),await un(this.storage,this.storageKey,s)):s.user=Ra()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Pa;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Pa}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Mi(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ge;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Vo;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ge;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),M(i)){const o={data:null,error:i};return Mi(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ce(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await un(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Qd(s);await un(this.storage,this.storageKey,i)}else{const s=Qd(r);await un(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ce(this.storage,this.storageKey),await Ce(this.storage,this.storageKey+"-code-verifier"),await Ce(this.storage,this.storageKey+"-user"),this.userStorage&&await Ce(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Pe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ln);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ln);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ln}ms, refresh threshold is ${ql} ticks`),s<=ql&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rc)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await sn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await V(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await V(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?T_(t.webauthn.credential_response):N_(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await V(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await V(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:E_(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:j_(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Aa(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await V(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ge})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ge});const o=await V(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Pe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ge});const o=await V(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Pe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await V(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ge})})}catch(t){if(M(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await V(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ge})})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+zw>s)return n;const{data:i,error:o}=await V(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:v}=await this.getSession();if(v||!m.session)return this._returnResult({data:null,error:v});n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Aa(n);r!=null&&r.allowExpired||i_(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=o_(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,qw(`${a}.${l}`)))throw new vo("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(M(n))return this._returnResult({data:null,error:n});throw n}}};nc.nextInstanceID={};const M_=tc,U_=nc,L_=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:M_,AuthApiError:zg,AuthClient:U_,AuthError:zn,AuthImplicitGrantRedirectError:cs,AuthInvalidCredentialsError:us,AuthInvalidJwtError:vo,AuthInvalidTokenResponseError:$r,AuthPKCEGrantCodeExchangeError:Kl,AuthRetryableFetchError:yo,AuthSessionMissingError:Ge,AuthUnknownError:ar,AuthWeakPasswordError:Jl,CustomAuthError:Xt,GoTrueAdminApi:tc,GoTrueClient:nc,NavigatorLockAcquireTimeoutError:Gg,SIGN_OUT_SCOPES:Ui,isAuthApiError:Fg,isAuthError:M,isAuthImplicitGrantRedirectError:Vg,isAuthRetryableFetchError:Mi,isAuthSessionMissingError:Bg,isAuthWeakPasswordError:Fw,lockInternals:Mr,navigatorLock:Kg,processLock:m_},Symbol.toStringTag,{value:"Module"})),Yg=zs(L_);Object.defineProperty(Bo,"__esModule",{value:!0});Bo.SupabaseAuthClient=void 0;const z_=Yg;class F_ extends z_.AuthClient{constructor(t){super(t)}}Bo.SupabaseAuthClient=F_;Object.defineProperty(ho,"__esModule",{value:!0});const B_=rg,V_=Le,H_=bg,W_=Pw,bi=$g,q_=Dg,sh=Er,G_=Bo;let K_=class{constructor(t,r,n){var s,i,o;this.supabaseUrl=t,this.supabaseKey=r;const a=(0,sh.validateSupabaseUrl)(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:bi.DEFAULT_DB_OPTIONS,realtime:bi.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},bi.DEFAULT_AUTH_OPTIONS),{storageKey:l}),global:bi.DEFAULT_GLOBAL_OPTIONS},d=(0,sh.applySettingDefaults)(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=(0,q_.fetchWithAuth)(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new V_.PostgrestClient(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new W_.StorageClient(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new B_.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:u,throwOnError:d},h,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new G_.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:a,lock:l,debug:u,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new H_.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};ho.default=K_;(function(e){var t=tn&&tn.__createBinding||(Object.create?function(d,h,f,m){m===void 0&&(m=f);var v=Object.getOwnPropertyDescriptor(h,f);(!v||("get"in v?!h.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(d,m,v)}:function(d,h,f,m){m===void 0&&(m=f),d[m]=h[f]}),r=tn&&tn.__exportStar||function(d,h){for(var f in d)f!=="default"&&!Object.prototype.hasOwnProperty.call(h,f)&&t(h,d,f)},n=tn&&tn.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const s=n(ho);r(Yg,e);var i=Le;Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var o=rg;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),r(bg,e);var a=ho;Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return n(a).default}});const l=(d,h,f)=>new s.default(d,h,f);e.createClient=l;function u(){if(typeof window<"u"||typeof process>"u")return!1;const d=process.version;if(d==null)return!1;const h=d.match(/^v(\d+)\./);return h?parseInt(h[1],10)<=18:!1}u()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Ku);const Xg=lh(Ku),J_=wm({__proto__:null,default:Xg},[Ku]),{PostgrestError:Pb,FunctionsHttpError:Ab,FunctionsFetchError:Rb,FunctionsRelayError:Ib,FunctionsError:$b,FunctionRegion:Db,SupabaseClient:Mb,createClient:Q_,GoTrueAdminApi:Ub,GoTrueClient:Lb,AuthAdminApi:zb,AuthClient:Fb,navigatorLock:Bb,NavigatorLockAcquireTimeoutError:Vb,lockInternals:Hb,processLock:Wb,SIGN_OUT_SCOPES:qb,AuthError:Gb,AuthApiError:Kb,AuthUnknownError:Jb,CustomAuthError:Qb,AuthSessionMissingError:Yb,AuthInvalidTokenResponseError:Xb,AuthInvalidCredentialsError:Zb,AuthImplicitGrantRedirectError:ex,AuthPKCEGrantCodeExchangeError:tx,AuthRetryableFetchError:rx,AuthWeakPasswordError:nx,AuthInvalidJwtError:sx,isAuthError:ix,isAuthApiError:ox,isAuthSessionMissingError:ax,isAuthImplicitGrantRedirectError:lx,isAuthRetryableFetchError:ux,isAuthWeakPasswordError:cx,RealtimePresence:dx,RealtimeChannel:hx,RealtimeClient:fx,REALTIME_LISTEN_TYPES:px,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:gx,REALTIME_PRESENCE_LISTEN_EVENTS:mx,REALTIME_SUBSCRIBE_STATES:yx,REALTIME_CHANNEL_STATES:vx}=Xg||J_,Y_="https://gswlwfxvhjdabmctqibw.supabase.co",X_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdzd2x3Znh2aGpkYWJtY3RxaWJ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzNTg4MzEsImV4cCI6MjA4MDkzNDgzMX0.IghB-DtpXDbtDtMaHhuAflMnQwYf7kJn3I9zX7Q38RU",Fe=Q_(Y_,X_);class tr{static async syncParts(t,r,n,s,i){var u,d,h,f,m,v,w;if(!i||i.length===0)return;const o=i.map(_=>{const p=_.properties,g={position_code:p["Tekla_Assembly.Cast_unit_position_code"]||null,rebar_weight:this.parseNumber(p["Tekla_Assembly.Cast_unit_rebar_weight"]),bottom_elevation:this.parseNumber(p["Tekla_Assembly.Cast_unit_bottom_elevation"]),top_elevation:this.parseNumber(p["Tekla_Assembly.Cast_unit_top_elevation"]),cast_unit_type:p["Tekla_Assembly.Cast_unit_type"]||null},y=Object.values(g).some(b=>b!==null);return{guid:_.guid,project_id:t,project_name:p.Project||r,model_id:p.ModelId||n,model_name:p.FileName||s,file_name:p.FileName||s,object_id:_.objectId,mark:p["Tekla_Assembly.Cast_unit_Mark"]||p.Mark||p.Name||"N/A",name:p.Name||p["Tekla_Assembly.Cast_unit_Mark"]||null,type:p.Type||p["Tekla_Assembly.Cast_unit_type"]||"Unknown",assembly:p["Tekla_Assembly.Assembly"]||p.Assembly||p["Assembly Code"]||null,weight:this.parseNumber(p["Tekla_Assembly.Cast_unit_weight"]||p.Weight),phase:p.Phase||p["Assembly Phase"]||null,profile:p.Profile||p.Section||null,material:p.Material||p.Grade||null,length:this.parseNumber(p.Length),tekla_data:y?g:null,updated_at:new Date().toISOString()}});console.log(" Sample part to sync:",{guid:(u=o[0])==null?void 0:u.guid,project:(d=o[0])==null?void 0:d.project_name,fileName:(h=o[0])==null?void 0:h.file_name,modelId:(f=o[0])==null?void 0:f.model_id,mark:(m=o[0])==null?void 0:m.mark,type:(v=o[0])==null?void 0:v.type,teklaData:(w=o[0])==null?void 0:w.tekla_data});const{data:a,error:l}=await Fe.from("assembly_parts").upsert(o).select();if(console.log(" Upsert result:",{data:(a==null?void 0:a.length)||0,error:l==null?void 0:l.message}),l)throw console.error("Error syncing parts:",l),new Error(`Failed to sync parts: ${l.message}`);console.log(` Synced ${i.length} parts with full metadata (Project: ${r}, Model: ${s})`)}static async getPartsByGuids(t,r){if(!r||r.length===0)return[];const{data:n,error:s}=await Fe.from("assembly_parts").select(`
        *,
        installation:installations(*),
        delivery:deliveries(*),
        bolting:boltings(*),
        logs:part_logs(*)
      `).eq("project_id",t).in("guid",r).order("mark",{ascending:!0});if(s)throw console.error("Error fetching parts by GUIDs:",s),new Error(`Failed to fetch parts: ${s.message}`);return n||[]}static async getParts(t,r,n){if(!n||n.length===0)return[];const{data:s,error:i}=await Fe.from("assembly_parts").select(`
        *,
        installation:installations(*),
        delivery:deliveries(*),
        bolting:boltings(*),
        logs:part_logs(*)
      `).eq("project_id",t).eq("model_id",r).in("object_id",n).order("mark",{ascending:!0});if(i)throw console.error("Error fetching parts:",i),new Error(`Failed to fetch parts: ${i.message}`);return s||[]}static async saveInstallation(t,r,n){if(!t||t.length===0)throw new Error("No parts selected");if(!r.installers||r.installers.length===0)throw new Error("At least one installer is required");if(!r.date)throw new Error("Installation date is required");if(!r.method)throw new Error("Installation method is required");const s=t.map(l=>({part_id:l,installers:r.installers,date:r.date,method:r.method,created_by:n})),{error:i}=await Fe.from("installations").upsert(s,{onConflict:"part_id"});if(i)throw console.error("Error saving installations:",i),new Error(`Failed to save installations: ${i.message}`);const o=t.map(l=>({part_id:l,action:`Paigaldatud: ${r.method} (${r.installers.join(", ")})`,user_name:n})),{error:a}=await Fe.from("part_logs").insert(o);a&&console.error("Error creating logs:",a),console.log(` Saved installation for ${t.length} parts`)}static async saveDelivery(t,r,n){if(!t||t.length===0)throw new Error("No parts selected");if(!r.vehicle)throw new Error("Vehicle is required");if(!r.date)throw new Error("Delivery date is required");const s=t.map(l=>({part_id:l,vehicle:r.vehicle,date:r.date,arrival_time:r.arrivalTime||null,unloading_time:r.unloadingTime||null,created_by:n})),{error:i}=await Fe.from("deliveries").upsert(s,{onConflict:"part_id"});if(i)throw console.error("Error saving deliveries:",i),new Error(`Failed to save deliveries: ${i.message}`);const o=t.map(l=>({part_id:l,action:`Tarnitud: ${r.vehicle}`,user_name:n})),{error:a}=await Fe.from("part_logs").insert(o);a&&console.error("Error creating logs:",a),console.log(` Saved delivery for ${t.length} parts`)}static async saveBolting(t,r,n){if(!t||t.length===0)throw new Error("No parts selected");if(!r.installer)throw new Error("Installer is required");if(!r.date)throw new Error("Bolting date is required");const s=t.map(l=>({part_id:l,installer:r.installer,date:r.date,created_by:n})),{error:i}=await Fe.from("boltings").upsert(s,{onConflict:"part_id"});if(i)throw console.error("Error saving boltings:",i),new Error(`Failed to save boltings: ${i.message}`);const o=t.map(l=>({part_id:l,action:`Poldid pingutatud (${r.installer})`,user_name:n})),{error:a}=await Fe.from("part_logs").insert(o);a&&console.error("Error creating logs:",a),console.log(` Saved bolting for ${t.length} parts`)}static async bulkUpdate(t,r,n,s){if(!t||t.length===0)throw new Error("No parts selected");switch(r){case"installation":await this.saveInstallation(t,n,s);break;case"delivery":await this.saveDelivery(t,n,s);break;case"bolts":await this.saveBolting(t,n,s);break}}static async deleteData(t,r,n){if(!t||t.length===0)throw new Error("No parts selected");let s,i;switch(r){case"installation":s="installations",i="Eemaldati paigaldusest";break;case"delivery":s="deliveries",i="Eemaldati tarnest";break;case"bolts":s="boltings",i="Eemaldati poltide nimekirjast";break;default:throw new Error("Invalid mode")}const{error:o}=await Fe.from(s).delete().in("part_id",t);if(o)throw console.error(`Error deleting ${r}:`,o),new Error(`Failed to delete ${r}: ${o.message}`);const a=t.map(u=>({part_id:u,action:i,user_name:n})),{error:l}=await Fe.from("part_logs").insert(a);l&&console.error("Error creating logs:",l),console.log(` Deleted ${r} for ${t.length} parts`)}static async getStatistics(t,r){const{count:n}=await Fe.from("assembly_parts").select("*",{count:"exact",head:!0}).eq("project_id",t).eq("model_id",r),{count:s}=await Fe.from("installations").select("*, assembly_parts!inner(*)",{count:"exact",head:!0}).eq("assembly_parts.project_id",t).eq("assembly_parts.model_id",r),{count:i}=await Fe.from("deliveries").select("*, assembly_parts!inner(*)",{count:"exact",head:!0}).eq("assembly_parts.project_id",t).eq("assembly_parts.model_id",r),{count:o}=await Fe.from("boltings").select("*, assembly_parts!inner(*)",{count:"exact",head:!0}).eq("assembly_parts.project_id",t).eq("assembly_parts.model_id",r);return{total:n||0,installed:s||0,delivered:i||0,bolted:o||0}}static parseNumber(t){if(t==null||t==="")return null;const r=parseFloat(t);return isNaN(r)?null:r}}async function Zg(e,t,r){try{const n=e.viewer;if(typeof n.getPsetDefinitions=="function"){const s=await n.getPsetDefinitions(t);if(console.log(" Pset definitions:",s),s&&Array.isArray(s)){for(const i of s)if(i!=null&&i.guid||i!=null&&i.GlobalId||i!=null&&i.GUID)return{found:!0,guid:i.guid||i.GlobalId||i.GUID,source:"getPsetDefinitions",additionalData:i}}return{found:!1,additionalData:{psets:s}}}}catch(n){console.log(" getPsetDefinitions not available:",n.message)}return{found:!1}}async function sc(e,t,r){try{const n=e.viewer;if(typeof n.getEntities=="function"){const s=await n.getEntities(t,r);if(console.log(" Entities:",s),s&&Array.isArray(s))for(const i of s){const o=["guid","GUID","GlobalId","globalId","guidIfc","ifcGuid"];for(const a of o)if(i[a])return{found:!0,guid:String(i[a]),source:`getEntities.${a}`,additionalData:i}}return{found:!1,additionalData:{entities:s}}}}catch(n){console.log(" getEntities not available:",n.message)}return{found:!1}}async function em(e,t){var r;try{const i=(await e.viewer.getModels()).find(o=>o.id===t);if(i){console.log(" Model info:",i);const o=i;return(r=o.metadata)!=null&&r.guids||o.guidMapping?{found:!0,source:"model.metadata",additionalData:o.metadata||o.guidMapping}:{found:!1,additionalData:{model:i}}}}catch(n){console.log(" getModels error:",n.message)}return{found:!1}}async function ic(e,t,r){try{const n=e.viewer,s={};if(typeof n.getHierarchyParents=="function"){const i=await n.getHierarchyParents(t,[r]);if(console.log(" Parents:",i),s.parents=i,i&&Array.isArray(i)){for(const o of i)if(o!=null&&o.guid||o!=null&&o.GlobalId||o!=null&&o.GUID)return{found:!0,guid:o.guid||o.GlobalId||o.GUID,source:"hierarchy.parent",additionalData:o}}}if(typeof n.getHierarchyChildren=="function"){const i=await n.getHierarchyChildren(t,[r]);console.log(" Children:",i),s.children=i}return{found:!1,additionalData:s}}catch(n){console.log(" Hierarchy methods error:",n.message)}return{found:!1}}async function tm(e,t,r){try{const n=e.viewer;if(typeof n.getObjectTree=="function"){const s=await n.getObjectTree(t);console.log(" Object tree:",s);const i=a=>{if(!a)return null;if(a.id===r||a.objectRuntimeId===r)return a;if(a.children&&Array.isArray(a.children))for(const l of a.children){const u=i(l);if(u)return u}return null},o=i(s);return o!=null&&o.guid||o!=null&&o.GlobalId?{found:!0,guid:o.guid||o.GlobalId,source:"objectTree",additionalData:o}:{found:!1,additionalData:{tree:s}}}}catch(n){console.log(" getObjectTree not available:",n.message)}return{found:!1}}async function oc(e,t,r){try{const s=await e.viewer.getObjectProperties(t,[r],{includeHidden:!0});if(!s||!s[0])return{found:!1};const i=[],o=(a,l="")=>{!a||typeof a!="object"||Object.entries(a).forEach(([u,d])=>{const h=l?`${l}.${u}`:u,f=/guid|globalid|ifcguid/i.test(u);if(typeof d=="string"){const m=/^[0-9A-Za-z_$]{22}$/.test(d),v=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(d);(f||m||v)&&i.push({path:h,value:d,type:v?"MS":m?"IFC":"Unknown"})}else typeof d=="object"&&d!==null&&o(d,h)})};if(o(s[0]),i.length>0){const a=i.find(d=>d.type==="IFC"),l=i.find(d=>d.type==="MS"),u=a||l||i[0];return{found:!0,guid:u.value,source:`deepSearch.${u.path}`,additionalData:{allGuidsFound:i,rawProps:s[0]}}}return{found:!1,additionalData:{rawProps:s[0]}}}catch(n){console.log(" Deep search error:",n.message)}return{found:!1}}function ac(e){const t=e.viewer;return Object.keys(t).filter(r=>typeof t[r]=="function").sort()}async function rm(e){var v,w,_;console.log(` Testing all GUID extraction methods...
`);const t=await e.viewer.getSelection();if(!t||t.length===0)return console.log(" No selection - please select an object first"),null;const r=t[0],n=r.modelId||r,s=await e.viewer.getObjects({selected:!0});if(!s||s.length===0)return console.log(" No objects in selection"),null;const i=((v=s[0])==null?void 0:v.objects)||[];if(i.length===0)return console.log(" No objects found in first model"),null;const o=String(((w=i[0])==null?void 0:w.id)||((_=i[0])==null?void 0:_.objectRuntimeId));console.log(`Testing with modelId: ${n}, objectId: ${o}
`);const a={modelId:String(n),objectId:o,guidsFound:[],apiMethodsAvailable:ac(e),rawData:{}};console.log(""),console.log("Method 1: getObjectProperties (deep search)"),console.log("");const l=await oc(e,n,o);l.found&&l.guid?(a.guidsFound.push({guid:l.guid,source:l.source||"properties",type:l.guid.includes("-")?"MS":"IFC"}),console.log(` Found GUID: ${l.guid} (source: ${l.source})`)):console.log(" No GUID found in properties"),a.rawData.properties=l.additionalData,console.log(`
`),console.log("Method 2: getPsetDefinitions"),console.log("");const u=await Zg(e,n);u.found&&u.guid&&(a.guidsFound.push({guid:u.guid,source:"psetDefinitions",type:u.guid.includes("-")?"MS":"IFC"}),console.log(` Found GUID: ${u.guid}`)),a.rawData.psets=u.additionalData,console.log(`
`),console.log("Method 3: getEntities"),console.log("");const d=await sc(e,n,[o]);d.found&&d.guid&&(a.guidsFound.push({guid:d.guid,source:"entities",type:d.guid.includes("-")?"MS":"IFC"}),console.log(` Found GUID: ${d.guid}`)),a.rawData.entities=d.additionalData,console.log(`
`),console.log("Method 4: Model metadata"),console.log("");const h=await em(e,n);a.rawData.model=h.additionalData,console.log(`
`),console.log("Method 5: Hierarchy"),console.log("");const f=await ic(e,n,o);f.found&&f.guid&&(a.guidsFound.push({guid:f.guid,source:"hierarchy",type:f.guid.includes("-")?"MS":"IFC"}),console.log(` Found GUID: ${f.guid}`)),a.rawData.hierarchy=f.additionalData,console.log(`
`),console.log("Method 6: Object Tree"),console.log("");const m=await tm(e,n,o);return m.found&&m.guid&&(a.guidsFound.push({guid:m.guid,source:"objectTree",type:m.guid.includes("-")?"MS":"IFC"}),console.log(` Found GUID: ${m.guid}`)),a.rawData.objectTree=m.additionalData,console.log(`
`),console.log("Available API methods"),console.log(""),console.log("API.viewer methods:",a.apiMethodsAvailable),console.log(`
 GUID search complete`),console.log(`   Found ${a.guidsFound.length} GUID(s):`),a.guidsFound.forEach((p,g)=>{console.log(`   ${g+1}. ${p.guid} (${p.type}, source: ${p.source})`)}),a}async function nm(e,t,r){const n=await oc(e,t,r);if(n.found&&n.guid)return n.guid;const s=await sc(e,t,[r]);if(s.found&&s.guid)return s.guid;const i=await ic(e,t,r);return i.found&&i.guid?i.guid:null}typeof window<"u"&&(window.guidUtils={findGUID_AllMethods:rm,quickFindGUID:nm,getGUIDFromPset:Zg,getGUIDFromEntities:sc,getGUIDFromModel:em,getGUIDFromHierarchy:ic,getGUIDFromObjectTree:tm,deepSearchPropertiesForGUID:oc,getAvailableViewerMethods:ac});const ih="v2.5",Z_=()=>{const e=new URLSearchParams(window.location.search);return{guid:e.get("guid")||void 0,project:e.get("project")||void 0}},oh=async(e,t)=>{console.log(` Searching for object with GUID: ${t}`);try{const r=e.viewer,n=await r.getModels();if(!n||n.length===0)return console.warn(" No models loaded"),!1;for(const s of n){const i=s.id;console.log(`   Searching in model: ${s.name} (${i})`);try{const o=await r.getEntities(i);if(o&&Array.isArray(o))for(const a of o)try{const l=await r.getObjectProperties(i,[a.id||a.objectRuntimeId],{includeHidden:!0});if(l&&l[0]&&JSON.stringify(l[0]).includes(t)){console.log(` Found object with GUID ${t} in model ${s.name}`);const d=a.id||a.objectRuntimeId;await r.setSelection([d]);try{const h=await r.getObjectBoundingBoxes([d]);if(h&&h.length>0){const f=h[0],m={x:(f.min.x+f.max.x)/2,y:(f.min.y+f.max.y)/2,z:(f.min.z+f.max.z)/2},v=await r.getCamera();await r.setCamera({...v,lookAt:m,position:{x:m.x+10,y:m.y+10,z:m.z+10}}),console.log(" Zoomed to object at:",m)}}catch(h){console.warn(" Could not zoom to object:",h)}return!0}}catch{}}catch(o){console.warn(` Could not search model ${s.name}:`,o)}}return console.warn(` Object with GUID ${t} not found`),!1}catch(r){return console.error(" Error searching for GUID:",r),!1}},eb=async e=>{try{const r=await e.viewer.getObjects({selected:!0});return!r||!Array.isArray(r)?[]:r.filter(n=>(n==null?void 0:n.modelId)&&Array.isArray(n==null?void 0:n.objects)&&n.objects.length>0).map(n=>({modelId:String(n.modelId),objects:n.objects}))}catch(t){return console.error(" getSelectedObjects failed:",t),[]}};function Ia(e){if(!e)return"UNKNOWN";const t=String(e);return/^[0-9A-Za-z_$]{22}$/.test(t)?"IFC":/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i.test(t)?"MS":"UNKNOWN"}const tb=(e,t,r,n)=>{var m;const s={},i=new Map,o=(e==null?void 0:e.id)||(e==null?void 0:e.objectRuntimeId),a=String(o),l=(v,w,_)=>{let p=`${v}.${w}`.replace(/[^\w.-]/g,"_"),g=_;g==null?g="":typeof g=="boolean"?g=g?"Yes":"No":typeof g=="object"&&g!==null&&(g=JSON.stringify(g));const y=g==null?"":String(g);i.set(p,y),s[p]=y,s[w]||(s[w]=y)},u=(e==null?void 0:e.properties)||[];Array.isArray(u)?u.forEach(v=>{const w=(v==null?void 0:v.name)||(v==null?void 0:v.propertySetName)||"Unknown",_=(v==null?void 0:v.properties)||(v==null?void 0:v.data)||[];Array.isArray(_)?_.forEach(p=>{const g=(p==null?void 0:p.displayValue)??(p==null?void 0:p.value)??(p==null?void 0:p.propertyValue)??(p==null?void 0:p.data)??"",y=(p==null?void 0:p.name)||(p==null?void 0:p.propertyName)||"Unknown";l(w,y,g)}):typeof _=="object"&&Object.entries(_).forEach(([p,g])=>l(w,p,g))}):typeof u=="object"&&u!==null&&Object.entries(u).forEach(([v,w])=>l("Properties",v,w)),e!=null&&e.id&&(s.ObjectId=String(e.id)),e!=null&&e.name&&(s.Name=String(e.name)),e!=null&&e.type&&(s.Type=String(e.type)),e!=null&&e.Product&&(s.ProductName=e.Product.Product_Name||e.Product.name,s.ProductDescription=e.Product.Product_Description||e.Product.description,s.ProductType=e.Product.Product_Object_Type||e.Product.type);let d="",h="";for(const[v,w]of i){if(!/guid|globalid|tekla_guid|id_guid/i.test(v))continue;const _=Ia(w);_==="IFC"&&!d&&(d=w),_==="MS"&&!h&&(h=w)}if(!d&&(e!=null&&e.guidIfc)&&(d=String(e.guidIfc)),!d&&(e!=null&&e.GlobalId)&&Ia(e.GlobalId)==="IFC"&&(d=String(e.GlobalId)),!h&&((m=e==null?void 0:e.ReferenceObject)!=null&&m.globalId)&&(h=String(e.ReferenceObject.globalId)),!h&&(r!=null&&r.globalId)&&(h=String(r.globalId),s["ReferenceObject.GlobalId"]=h),!d&&n){const v=Ia(n);v==="IFC"?d=n:v==="MS"&&!h?h=n:!d&&!h&&(d=n)}const f=d||h||`runtime-${t}-${a}`;return s.GUID=f,s.GUID_IFC=d,s.GUID_MS=h,{objectId:a,guid:f,properties:s}},rb=async e=>{var t,r,n;console.log("%c","color: #3b82f6; font-weight: bold;"),console.log("%c      RIVEST TC MANAGER - DIAGNOSTIC REPORT "+ih+"          ","color: #3b82f6; font-weight: bold;"),console.log("%c","color: #3b82f6; font-weight: bold;"),console.log("%c Timestamp: "+new Date().toISOString(),"color: #6b7280;"),console.log(""),console.group("%c 1. API OBJECT STRUCTURE","color: #10b981; font-weight: bold;"),console.log("API object keys:",Object.keys(e)),console.log("API.viewer methods:",e.viewer?Object.keys(e.viewer):"N/A"),console.log("API.user methods:",e.user?Object.keys(e.user):"N/A"),console.log("API.project methods:",e.project?Object.keys(e.project):"N/A"),console.log("Full API object:",e),console.groupEnd(),console.group("%c 2. USER INFO","color: #f59e0b; font-weight: bold;");try{const s=await e.user.getUser();console.log("User details:",JSON.stringify(s,null,2)),console.table({"User ID":s.id||"N/A",Name:s.name||"N/A",Email:s.email||"N/A",Status:" OK"})}catch(s){console.error(" Failed to get user:",s)}console.groupEnd(),console.group("%c 3. PROJECT INFO","color: #8b5cf6; font-weight: bold;");try{const s=await e.project.getProject();console.log("Project details:",JSON.stringify(s,null,2)),console.table({"Project ID":s.id||"N/A",Name:s.name||"N/A",Description:s.description||"N/A",Status:" OK"})}catch(s){console.error(" Failed to get project:",s)}console.groupEnd(),console.group("%c 4. MODELS INFO","color: #ec4899; font-weight: bold;");try{const s=await e.viewer.getModels();console.log("Models count:",(s==null?void 0:s.length)||0),console.log("Models raw:",JSON.stringify(s,null,2)),s&&s.length>0&&s.forEach((i,o)=>{console.log(`Model ${o+1}:`,{id:i.id,name:i.name,type:i.type,url:i.url})})}catch(s){console.error(" Failed to get models:",s)}console.groupEnd(),console.group("%c 5. CURRENT SELECTION","color: #ef4444; font-weight: bold;");try{const s=await e.viewer.getSelection();if(console.log("Selection count:",(s==null?void 0:s.length)||0),console.log("Selection IDs:",s),s&&s.length>0){const i=await e.viewer.getObjects({selected:!0});if(console.log("Selected objects raw:",JSON.stringify(i,null,2)),i&&i.length>0){const o=((t=i[0])==null?void 0:t.objects)||[];if(o.length>0){const a=o[0];console.log("First object:",a);try{const l=await e.viewer.getObjectProperties([a.objectRuntimeId]);console.log("First object properties:",JSON.stringify(l,null,2))}catch(l){console.warn("Could not get properties:",l)}}}}else console.log(" No objects selected")}catch(s){console.error(" Failed to get selection:",s)}console.groupEnd(),console.group("%c 6. VIEWER STATE","color: #06b6d4; font-weight: bold;");try{const s=["getCamera","getViewpoint","getClippingPlanes","getVisibility"];for(const i of s)try{if(typeof e.viewer[i]=="function"){const o=await e.viewer[i]();console.log(`viewer.${i}():`,o)}}catch{console.log(`viewer.${i}():  Not available or error`)}}catch(s){console.error(" Viewer state error:",s)}console.groupEnd(),console.group("%c 7. EXTENSION INFO","color: #84cc16; font-weight: bold;");try{e.extension?(console.log("Extension object:",e.extension),console.log("Extension methods:",Object.keys(e.extension))):console.log("Extension object not available")}catch(s){console.error(" Extension info error:",s)}console.groupEnd(),console.group("%c 8. DATATABLE API","color: #14b8a6; font-weight: bold;");try{const s=e.dataTable;if(s){console.log("DataTable API available:",Object.keys(s));try{const i=await((r=s.getDataTableConfig)==null?void 0:r.call(s));console.log("DataTable config:",JSON.stringify(i,null,2))}catch{console.log("getDataTableConfig:  Not available or error")}try{const i=await((n=s.getSelectedRowsData)==null?void 0:n.call(s));console.log("Selected rows data:",JSON.stringify(i,null,2))}catch{console.log("getSelectedRowsData:  Not available or error")}for(const i of Object.keys(s))console.log(`  - dataTable.${i}: ${typeof s[i]}`)}else console.log("DataTable API not available")}catch(s){console.error(" DataTable API error:",s)}return console.groupEnd(),console.group("%c 9. ENVIRONMENT","color: #f97316; font-weight: bold;"),console.table({"Window location":window.location.href,"Parent origin":document.referrer||"N/A","User Agent":navigator.userAgent.substring(0,50)+"...",Language:navigator.language,Online:navigator.onLine?" Yes":" No"}),console.groupEnd(),console.log("%c","color: #3b82f6; font-weight: bold;"),console.log("%c               DIAGNOSTIC COMPLETE                          ","color: #3b82f6; font-weight: bold;"),console.log("%c","color: #3b82f6; font-weight: bold;"),{timestamp:new Date().toISOString(),version:ih}},ah=async(e,t)=>{try{const r=e.viewer,n=await r.getModels();if(!n||n.length===0)return;for(const s of n){const i=s.id;try{if(t){if(typeof r.setModelRenderMode=="function")await r.setModelRenderMode(i,"XRAY");else if(typeof r.setObjectsOpacity=="function"){const o=await r.getEntities(i);if(o&&Array.isArray(o)){const a=o.map(l=>l.id||l.objectRuntimeId);await r.setObjectsOpacity(a,.3)}}console.log(" Model set to GREY/XRAY mode")}else typeof r.setModelRenderMode=="function"?await r.setModelRenderMode(i,"SOLID"):typeof r.resetObjectsOpacity=="function"&&await r.resetObjectsOpacity(),console.log(" Model restored to NORMAL mode")}catch(o){console.warn(` Could not set model ${i} render mode:`,o)}}}catch(r){console.warn(" setModelGrey failed:",r)}},nb=e=>{const t=e.some(r=>{const n=r.properties["Tekla_Assembly.Cast_unit_Mark"]||r.properties["Tekla_Assembly.Assembly_Mark"]||r.properties["Assembly.Mark"]||r.properties.Mark;return n&&n!==""&&n!=="N/A"&&n!=="undefined"});return console.log(` Assembly Selection Check: ${t?" AVAILABLE":" NOT AVAILABLE"}`),t},sb=()=>c.jsx("div",{className:"p-4 mb-4 bg-yellow-50 border border-yellow-300 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"text-2xl",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Assembly Selection puudub!"}),c.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"Paigaldusandmete sisestamiseks aktiveeri Teklas Assembly Selection:"}),c.jsxs("ol",{className:"text-sm text-yellow-700 space-y-1 ml-4 list-decimal",children:[c.jsx("li",{children:"Tekla  File  Project Properties"}),c.jsx("li",{children:"Assembly   Assembly Selection"}),c.jsx("li",{children:"Ekspordi uuesti IFC fail Trimble Connect'i"})]}),c.jsx("p",{className:"text-sm text-yellow-600 mt-3 italic",children:"Praegu kuvatakse ainult ksikud detailid ilma Assembly Mark'ideta."})]})]})});function ib(){const[e,t]=T.useState(null),[r,n]=T.useState(""),[s,i]=T.useState(!0),[o,a]=T.useState([]),[l,u]=T.useState("installation"),[d,h]=T.useState("Kasutaja"),[f,m]=T.useState(""),[v,w]=T.useState(""),[_,p]=T.useState(""),[g,y]=T.useState(""),[b,S]=T.useState(!1),[E,N]=T.useState(null),O=T.useRef(null);T.useEffect(()=>{async function U(){try{const L=await r0(window.parent,(D,Z)=>{console.log(" Workspace event:",D,Z),D==="extension.accessToken"&&console.log(" Access token received"),D==="viewer.selectionChanged"&&(console.log(" Selection changed:",Z),O.current&&O.current(Z.selection||[]))},3e4);t(L),console.log(" Connected to Trimble Connect"),window.API=L,window.findGUID_AllMethods=()=>rm(L),window.quickFindGUID=(D,Z)=>nm(L,D,Z),window.getAvailableViewerMethods=()=>ac(L),console.log(" Debug utilities exposed: window.API, window.findGUID_AllMethods(), window.quickFindGUID(modelId, objectId), window.getAvailableViewerMethods()"),await rb(L);try{const D=await L.user.getUser();h(D.name||D.email||"Kasutaja"),console.log(" User:",D.name||D.email)}catch(D){console.warn(" Could not get user info:",D)}try{const D=await L.project.getProject();m(D.id),w(D.name),console.log(" Project:",D.name,D.id)}catch(D){console.warn(" Could not get project info:",D)}try{const D=await L.viewer.getModels();if(D&&D.length>0){const Z=D[0];p(Z.id),y(Z.name||"Unknown Model"),console.log(" Model:",Z.name,Z.id)}}catch(D){console.warn(" Could not get model info:",D)}const P=Z_();P.guid&&(console.log(" Deep link detected! GUID:",P.guid),setTimeout(async()=>{await oh(L,P.guid)?console.log(" Deep link successful - zoomed to object"):console.warn(" Deep link failed - object not found")},2e3)),i(!1)}catch(L){n((L==null?void 0:L.message)||"Failed to connect to Trimble Connect"),console.error(" Connection error:",L),i(!1)}}U()},[]);const J=T.useRef([]);T.useEffect(()=>{if(!e||s)return;const U=async()=>{try{const D=await e.viewer.getSelection()||[],Z=J.current;(D.length!==Z.length||D.some((ct,wt)=>ct!==Z[wt]))&&(console.log(" Polling detected selection change:",D.length,"objects"),J.current=D,O.current&&O.current(D))}catch{}},L=setInterval(U,2e3);return U(),()=>clearInterval(L)},[e,s]);const B=T.useCallback(async U=>{var L;if(!e||!f||!v){console.log(" Skipping selection change - not ready");return}if(!U||U.length===0){console.log(" Selection cleared"),a([]),N(null);return}console.log(`
`),console.log(" FULL EXTRACTION - Metadata + Tekla + Properties"),console.log(""),console.log(`Selected: ${U.length} objects`),S(!0),await ah(e,!0);try{const P=e.viewer;console.log(`
 STEP 1: Loading project and model metadata...`);const D=await e.project.getProject(),Z=(D==null?void 0:D.name)||v||"Unknown Project";console.log(`   Project: ${Z} (${f})`);const Se=await P.getModels(),ct=new Map;Se==null||Se.forEach(k=>{k!=null&&k.id&&(k!=null&&k.name)&&(ct.set(String(k.id),String(k.name)),console.log(`   Model: ${k.name} (${k.id})`))}),console.log(`
 STEP 2: Getting selected objects...`);const wt=await eb(e);if(!wt.length){console.warn(" No objects selected"),a([]);return}console.log(` Found ${wt.length} model(s) with selected objects`),console.log(`
 STEP 3: Loading full properties with metadata...`);const et=[];for(const{modelId:k,objects:G}of wt){const Te=ct.get(k)||g||"Unknown Model";console.log(`
    Model: ${Te} (${k})`),console.log(`   Objects count: ${G.length}`);const _t=G.map(K=>Number(K==null?void 0:K.id)).filter(K=>Number.isFinite(K));let At=G;try{console.log("    Loading properties with getObjectProperties...");const K=await P.getObjectProperties(k,_t,{includeHidden:!0});console.log(`    Got ${(K==null?void 0:K.length)||0} property sets`);const he=Q=>JSON.stringify(Q,(Ne,ie)=>typeof ie=="bigint"?ie.toString():ie,2);console.log("    RAW fullProperties:",he(K)),At=G.map((Q,Ne)=>{const ie=K==null?void 0:K[Ne];return console.log(`    Object ${Ne} propData:`,he(ie)),{...Q,properties:(ie==null?void 0:ie.properties)||ie||Q.properties}})}catch(K){console.error("    getObjectProperties failed:",K.message);try{console.log("    Trying alternative: getObjectProperties with array...");for(let he=0;he<G.length;he++){const Q=G[he],Ne=(Q==null?void 0:Q.id)||(Q==null?void 0:Q.objectRuntimeId);try{const ie=await P.getObjectProperties([Ne]);ie&&ie.length>0&&(At[he]={...Q,properties:((L=ie[0])==null?void 0:L.properties)||ie})}catch{}}}catch{console.warn("    Alternative method also failed")}}console.log(`
    BATCH loading GUID data for ${_t.length} objects...`);const Nr=new Map;try{console.log("       Batch getObjectMetadata...");const K=P;if(typeof K.getObjectMetadata=="function"){const he=await K.getObjectMetadata(k,_t);Array.isArray(he)&&(he.forEach((Q,Ne)=>{const ie=_t[Ne];Q&&ie&&Nr.set(ie,Q)}),console.log(`       Got metadata for ${Nr.size} objects`))}else console.log("       getObjectMetadata not available")}catch(K){console.warn(`       Batch getObjectMetadata failed: ${K.message}`)}const Or=new Map;try{console.log("       Batch convertToObjectIds...");const K=P;if(typeof K.convertToObjectIds=="function"){const he=await K.convertToObjectIds(k,_t);Array.isArray(he)&&(he.forEach((Q,Ne)=>{const ie=_t[Ne];Q&&ie&&Or.set(ie,String(Q))}),console.log(`       Got external IDs for ${Or.size} objects`))}else console.log("       convertToObjectIds not available")}catch(K){console.warn(`       Batch convertToObjectIds failed: ${K.message}`)}console.log(`
    Flattening ${At.length} objects with pre-loaded GUID data...`);for(const K of At)try{const he=Number(K==null?void 0:K.id),Q=tb(K,k,Nr.get(he),Or.get(he));Q.properties.FileName=Te,Q.properties.ModelId=k,Q.properties.Project=Z,Q.properties.Type=(K==null?void 0:K.type)||Q.properties.Type||Q.properties["Tekla_Assembly.Cast_unit_type"]||"Unknown",Q.properties.Name=(K==null?void 0:K.name)||Q.properties.Name||Q.properties["Tekla_Assembly.Cast_unit_Mark"]||"",console.log(`    Object ${Q.objectId}:`),console.log(`      GUID: ${Q.guid}`),console.log(`      FileName: ${Q.properties.FileName}`),console.log(`      Type: ${Q.properties.Type}`),console.log(`      Mark: ${Q.properties["Tekla_Assembly.Cast_unit_Mark"]||Q.properties.Mark||"N/A"}`),et.push(Q)}catch(he){console.error(`    Failed to flatten object ${K==null?void 0:K.id}:`,he.message)}}console.log(`
 Total properties collected: ${et.length}`),console.log(`
 STEP 4: Verifying required fields...`),et.forEach((k,G)=>{const Te=k.properties;console.log(`
   Object ${G+1}/${et.length}:`),console.log(`       GUID: ${k.guid||" MISSING"}`),console.log(`       FileName: ${Te.FileName||" MISSING"}`),console.log(`       ModelId: ${Te.ModelId||" MISSING"}`),console.log(`       Project: ${Te.Project||" MISSING"}`),console.log(`       Type: ${Te.Type||"(empty)"}`),console.log(`       Name: ${Te.Name||"(empty)"}`);const _t=["Tekla_Assembly.Cast_unit_Mark","Tekla_Assembly.Assembly","Tekla_Assembly.Cast_unit_weight","Tekla_Assembly.Cast_unit_position_code"],At=_t.filter(Nr=>Te[Nr]);At.length>0&&console.log(`       Tekla fields: ${At.length}/${_t.length} found`)}),console.log(`
 STEP 5: Checking Assembly Selection...`);const Zt=nb(et);if(N(Zt),Zt||console.warn(" Assembly Selection NOT available - parts will show without Assembly Mark"),console.log(`
 STEP 6: Syncing to Supabase...`),et.length===0)throw new Error("No properties could be loaded");await tr.syncParts(f,v,_||"default-model",g||"Unknown Model",et),console.log(" Synced to Supabase"),console.log(`
 STEP 6: Loading from Supabase...`);const Gn=et.map(k=>k.guid),Tr=await tr.getPartsByGuids(f,Gn);console.log(` Loaded ${Tr.length} parts from database`),a(Tr.map(k=>({id:k.object_id,guid:k.guid,mark:k.mark||"N/A",assembly:k.assembly||"",name:k.name||"",weight:k.weight||0,phase:k.phase||"",isSelected:!0,installation:k.installation?{installers:k.installation.installers,date:k.installation.date,method:k.installation.method}:void 0,delivery:k.delivery?{vehicle:k.delivery.vehicle,date:k.delivery.date,arrivalTime:k.delivery.arrival_time,unloadingTime:k.delivery.unloading_time}:void 0,bolting:k.bolting?{installer:k.bolting.installer,date:k.bolting.date}:void 0,logs:(k.logs||[]).map(G=>({timestamp:G.timestamp,action:G.action,user:G.user_name}))}))),console.log(`
`)}catch(P){console.error(" Error:",P),alert("Viga andmete laadimisel: "+P.message)}finally{S(!1),ah(e,!1).catch(()=>{})}},[e,f,v,_,g]);T.useEffect(()=>{O.current=B},[B]);const se=T.useCallback(async(U,L)=>{if(e)try{const P=L.replace("#",""),D=parseInt(P.substring(0,2),16)/255,Z=parseInt(P.substring(2,4),16)/255,Se=parseInt(P.substring(4,6),16)/255;await e.viewer.setObjectColors(U.map(ct=>({objectId:ct,color:{r:D,g:Z,b:Se,a:1}}))),console.log(` Colorized ${U.length} objects with ${L}`)}catch(P){console.error(" Error colorizing objects:",P)}},[e]),ne=T.useCallback(async U=>(await tr.getParts(f,_,U)).map(P=>P.id),[f,_]),vt=T.useCallback(async U=>{const L=o.filter(P=>P.isSelected).map(P=>P.id);if(L.length===0){alert("Vali vhemalt ks objekt");return}try{const P=await ne(L);await tr.saveInstallation(P,U,d),await se(L,"#4ade80"),await B(L),console.log(" Installation saved successfully")}catch(P){console.error(" Error saving installation:",P),alert("Viga salvestamisel: "+P.message)}},[o,d,se,B,ne]),lt=T.useCallback(async U=>{const L=o.filter(P=>P.isSelected).map(P=>P.id);if(L.length===0){alert("Vali vhemalt ks objekt");return}try{const P=await ne(L);await tr.saveDelivery(P,U,d),await se(L,"#60a5fa"),await B(L),console.log(" Delivery saved successfully")}catch(P){console.error(" Error saving delivery:",P),alert("Viga salvestamisel: "+P.message)}},[o,d,se,B,ne]),jr=T.useCallback(async U=>{const L=o.filter(P=>P.isSelected).map(P=>P.id);if(L.length===0){alert("Vali vhemalt ks objekt");return}try{const P=await ne(L);await tr.saveBolting(P,U,d),await se(L,"#fb923c"),await B(L),console.log(" Bolting saved successfully")}catch(P){console.error(" Error saving bolting:",P),alert("Viga salvestamisel: "+P.message)}},[o,d,se,B,ne]),ut=T.useCallback(async(U,L,P)=>{try{const D=await ne(U);await tr.bulkUpdate(D,L,P,d),await B(U),console.log(" Bulk update successful")}catch(D){console.error(" Error in bulk update:",D),alert("Viga uuendamisel: "+D.message)}},[d,B,ne]),Pt=T.useCallback(async(U,L)=>{try{const P=await ne(U);await tr.deleteData(P,L,d),await(e==null?void 0:e.viewer.resetObjectColors(U)),await B(U),console.log(" Delete successful")}catch(P){console.error(" Error deleting data:",P),alert("Viga kustutamisel: "+P.message)}},[e,d,B,ne]),R=T.useCallback(()=>{e&&e.viewer.clearSelection()},[e]),H=T.useCallback(U=>{const L=o.filter(P=>P.isSelected&&P.id!==U).map(P=>P.id);e&&e.viewer.setSelection(L)},[e,o]),q=T.useCallback(U=>{e&&e.viewer.setSelection(U)},[e]);if(s)return c.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xl font-semibold mb-2",children:"hendatakse..."}),c.jsx("div",{className:"text-sm text-gray-500",children:"Trimble Connect"}),c.jsx("div",{className:"mt-4 text-xs text-gray-400",children:"Laadib Workspace API-t"})]})});if(r)return c.jsx("div",{className:"flex items-center justify-center h-screen p-4 bg-red-50",children:c.jsxs("div",{className:"text-center max-w-md",children:[c.jsx("div",{className:"text-red-600 text-lg font-bold mb-3",children:" henduse viga"}),c.jsx("div",{className:"text-red-700 mb-4",children:r}),c.jsx("div",{className:"text-sm text-red-600 opacity-75",children:"Veendu, et laiendus on laaditud Trimble Connect Web rakenduses."}),c.jsx("div",{className:"mt-4 text-xs text-gray-500",children:"Manifest ID: assembly-installer"})]})});const te=o.filter(U=>U.isSelected);return c.jsxs("div",{className:"flex h-screen w-screen overflow-hidden font-sans bg-white",children:[b&&c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-lg flex items-center gap-3",children:[c.jsx("div",{className:"animate-spin w-6 h-6 border-3 border-blue-500 border-t-transparent rounded-full"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Laaditakse andmeid..."})]})}),c.jsxs("div",{className:"flex flex-col w-full h-full",children:[E===!1&&c.jsx(sb,{}),c.jsx(R0,{selectedParts:te,allParts:o,mode:l,assemblySelectionEnabled:E!==!1,onModeChange:u,onSaveInstallation:vt,onSaveDelivery:lt,onSaveBolting:jr,onClearSelection:R,onRemovePart:H,onSetSelection:q,onBulkUpdate:ut,onDeleteData:Pt,onZoomToGuid:e?U=>oh(e,U):void 0})]})]})}const sm=document.getElementById("root");if(!sm)throw new Error("Could not find root element to mount to");const ob=Da.createRoot(sm);ob.render(c.jsx($a.StrictMode,{children:c.jsx(ib,{})}));
